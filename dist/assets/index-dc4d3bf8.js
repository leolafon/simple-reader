var je=(N,k)=>()=>(k||N((k={exports:{}}).exports,k),k.exports);var Oi=je(($t,Kt)=>{(function(){const k=document.createElement("link").relList;if(k&&k.supports&&k.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))o(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const r of g.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function y(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function o(f){if(f.ep)return;f.ep=!0;const g=y(f);fetch(f.href,g)}})();function xt(){}function Se(N,k){for(const y in k)N[y]=k[y];return N}function Pe(N){return!!N&&(typeof N=="object"||typeof N=="function")&&typeof N.then=="function"}function Ce(N){return N()}function ge(){return Object.create(null)}function Vt(N){N.forEach(Ce)}function ue(N){return typeof N=="function"}function Zt(N,k){return N!=N?k==k:N!==k||N&&typeof N=="object"||typeof N=="function"}function Be(N){return Object.keys(N).length===0}function Me(N,...k){if(N==null)return xt;const y=N.subscribe(...k);return y.unsubscribe?()=>y.unsubscribe():y}function Dt(N,k){N.appendChild(k)}function Ct(N,k,y){N.insertBefore(k,y||null)}function kt(N){N.parentNode&&N.parentNode.removeChild(N)}function Fe(N,k){for(let y=0;y<N.length;y+=1)N[y]&&N[y].d(k)}function Ot(N){return document.createElement(N)}function Wt(N){return document.createTextNode(N)}function Gt(){return Wt(" ")}function ie(){return Wt("")}function Oe(N,k,y,o){return N.addEventListener(k,y,o),()=>N.removeEventListener(k,y,o)}function Lt(N,k,y){y==null?N.removeAttribute(k):N.getAttribute(k)!==y&&N.setAttribute(k,y)}function Ue(N){return Array.from(N.childNodes)}function ae(N,k){k=""+k,N.data!==k&&(N.data=k)}function qe(N,k,{bubbles:y=!1,cancelable:o=!1}={}){const f=document.createEvent("CustomEvent");return f.initCustomEvent(N,y,o,k),f}function ee(N,k){return new N(k)}let Yt;function At(N){Yt=N}function ne(){if(!Yt)throw new Error("Function called outside component initialization");return Yt}function We(N){ne().$$.after_update.push(N)}function He(N){ne().$$.on_destroy.push(N)}function Xe(){const N=ne();return(k,y,{cancelable:o=!1}={})=>{const f=N.$$.callbacks[k];if(f){const g=qe(k,y,{cancelable:o});return f.slice().forEach(r=>{r.call(N,g)}),!g.defaultPrevented}return!0}}function ve(N,k){const y=N.$$.callbacks[k.type];y&&y.slice().forEach(o=>o.call(this,k))}const qt=[],be=[];let Ht=[];const ye=[],Ne=Promise.resolve();let he=!1;function Te(){he||(he=!0,Ne.then(de))}function Ve(){return Te(),Ne}function le(N){Ht.push(N)}const oe=new Set;let Ft=0;function de(){if(Ft!==0)return;const N=Yt;do{try{for(;Ft<qt.length;){const k=qt[Ft];Ft++,At(k),Ze(k.$$)}}catch(k){throw qt.length=0,Ft=0,k}for(At(null),qt.length=0,Ft=0;be.length;)be.pop()();for(let k=0;k<Ht.length;k+=1){const y=Ht[k];oe.has(y)||(oe.add(y),y())}Ht.length=0}while(qt.length);for(;ye.length;)ye.pop()();he=!1,oe.clear(),At(N)}function Ze(N){if(N.fragment!==null){N.update(),Vt(N.before_update);const k=N.dirty;N.dirty=[-1],N.fragment&&N.fragment.p(N.ctx,k),N.after_update.forEach(le)}}function $e(N){const k=[],y=[];Ht.forEach(o=>N.indexOf(o)===-1?k.push(o):y.push(o)),y.forEach(o=>o()),Ht=k}const te=new Set;let jt;function re(){jt={r:0,c:[],p:jt}}function se(){jt.r||Vt(jt.c),jt=jt.p}function Tt(N,k){N&&N.i&&(te.delete(N),N.i(k))}function It(N,k,y,o){if(N&&N.o){if(te.has(N))return;te.add(N),jt.c.push(()=>{te.delete(N),o&&(y&&N.d(1),o())}),N.o(k)}else o&&o()}function ce(N,k){const y=k.token={};function o(f,g,r,l){if(k.token!==y)return;k.resolved=l;let i=k.ctx;r!==void 0&&(i=i.slice(),i[r]=l);const h=f&&(k.current=f)(i);let c=!1;k.block&&(k.blocks?k.blocks.forEach((a,w)=>{w!==g&&a&&(re(),It(a,1,1,()=>{k.blocks[w]===a&&(k.blocks[w]=null)}),se())}):k.block.d(1),h.c(),Tt(h,1),h.m(k.mount(),k.anchor),c=!0),k.block=h,k.blocks&&(k.blocks[g]=h),c&&de()}if(Pe(N)){const f=ne();if(N.then(g=>{At(f),o(k.then,1,k.value,g),At(null)},g=>{if(At(f),o(k.catch,2,k.error,g),At(null),!k.hasCatch)throw g}),k.current!==k.pending)return o(k.pending,0),!0}else{if(k.current!==k.then)return o(k.then,1,k.value,N),!0;k.resolved=N}}function Ie(N,k,y){const o=k.slice(),{resolved:f}=N;N.current===N.then&&(o[N.value]=f),N.current===N.catch&&(o[N.error]=f),N.block.p(o,y)}const Ge=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ae(N,k){const y={},o={},f={$$scope:1};let g=N.length;for(;g--;){const r=N[g],l=k[g];if(l){for(const i in r)i in l||(o[i]=1);for(const i in l)f[i]||(y[i]=l[i],f[i]=1);N[g]=l}else for(const i in r)f[i]=1}for(const r in o)r in y||(y[r]=void 0);return y}function Re(N){return typeof N=="object"&&N!==null?N:{}}function Xt(N){N&&N.c()}function Pt(N,k,y,o){const{fragment:f,after_update:g}=N.$$;f&&f.m(k,y),o||le(()=>{const r=N.$$.on_mount.map(Ce).filter(ue);N.$$.on_destroy?N.$$.on_destroy.push(...r):Vt(r),N.$$.on_mount=[]}),g.forEach(le)}function Bt(N,k){const y=N.$$;y.fragment!==null&&($e(y.after_update),Vt(y.on_destroy),y.fragment&&y.fragment.d(k),y.on_destroy=y.fragment=null,y.ctx=[])}function Ye(N,k){N.$$.dirty[0]===-1&&(qt.push(N),Te(),N.$$.dirty.fill(0)),N.$$.dirty[k/31|0]|=1<<k%31}function Jt(N,k,y,o,f,g,r,l=[-1]){const i=Yt;At(N);const h=N.$$={fragment:null,ctx:[],props:g,update:xt,not_equal:f,bound:ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(k.context||(i?i.$$.context:[])),callbacks:ge(),dirty:l,skip_bound:!1,root:k.target||i.$$.root};r&&r(h.root);let c=!1;if(h.ctx=y?y(N,k.props||{},(a,w,...s)=>{const d=s.length?s[0]:w;return h.ctx&&f(h.ctx[a],h.ctx[a]=d)&&(!h.skip_bound&&h.bound[a]&&h.bound[a](d),c&&Ye(N,a)),w}):[],h.update(),c=!0,Vt(h.before_update),h.fragment=o?o(h.ctx):!1,k.target){if(k.hydrate){const a=Ue(k.target);h.fragment&&h.fragment.l(a),a.forEach(kt)}else h.fragment&&h.fragment.c();k.intro&&Tt(N.$$.fragment),Pt(N,k.target,k.anchor,k.customElement),de()}At(i)}class Qt{$destroy(){Bt(this,1),this.$destroy=xt}$on(k,y){if(!ue(y))return xt;const o=this.$$.callbacks[k]||(this.$$.callbacks[k]=[]);return o.push(y),()=>{const f=o.indexOf(y);f!==-1&&o.splice(f,1)}}$set(k){this.$$set&&!Be(k)&&(this.$$.skip_bound=!0,this.$$set(k),this.$$.skip_bound=!1)}}/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(N){typeof $t=="object"&&typeof Kt<"u"?Kt.exports=N():typeof define=="function"&&define.amd?define([],N):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=N()})(function(){return function N(k,y,o){function f(l,i){if(!y[l]){if(!k[l]){var h=typeof require=="function"&&require;if(!i&&h)return h(l,!0);if(g)return g(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var a=y[l]={exports:{}};k[l][0].call(a.exports,function(w){var s=k[l][1][w];return f(s||w)},a,a.exports,N,k,y,o)}return y[l].exports}for(var g=typeof require=="function"&&require,r=0;r<o.length;r++)f(o[r]);return f}({1:[function(N,k,y){var o=N("./utils"),f=N("./support"),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";y.encode=function(r){for(var l,i,h,c,a,w,s,d=[],_=0,n=r.length,e=n,u=o.getTypeOf(r)!=="string";_<r.length;)e=n-_,h=u?(l=r[_++],i=_<n?r[_++]:0,_<n?r[_++]:0):(l=r.charCodeAt(_++),i=_<n?r.charCodeAt(_++):0,_<n?r.charCodeAt(_++):0),c=l>>2,a=(3&l)<<4|i>>4,w=1<e?(15&i)<<2|h>>6:64,s=2<e?63&h:64,d.push(g.charAt(c)+g.charAt(a)+g.charAt(w)+g.charAt(s));return d.join("")},y.decode=function(r){var l,i,h,c,a,w,s=0,d=0,_="data:";if(r.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var n,e=3*(r=r.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(r.charAt(r.length-1)===g.charAt(64)&&e--,r.charAt(r.length-2)===g.charAt(64)&&e--,e%1!=0)throw new Error("Invalid base64 input, bad content length.");for(n=f.uint8array?new Uint8Array(0|e):new Array(0|e);s<r.length;)l=g.indexOf(r.charAt(s++))<<2|(c=g.indexOf(r.charAt(s++)))>>4,i=(15&c)<<4|(a=g.indexOf(r.charAt(s++)))>>2,h=(3&a)<<6|(w=g.indexOf(r.charAt(s++))),n[d++]=l,a!==64&&(n[d++]=i),w!==64&&(n[d++]=h);return n}},{"./support":30,"./utils":32}],2:[function(N,k,y){var o=N("./external"),f=N("./stream/DataWorker"),g=N("./stream/Crc32Probe"),r=N("./stream/DataLengthProbe");function l(i,h,c,a,w){this.compressedSize=i,this.uncompressedSize=h,this.crc32=c,this.compression=a,this.compressedContent=w}l.prototype={getContentWorker:function(){var i=new f(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new r("data_length")),h=this;return i.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),i},getCompressedWorker:function(){return new f(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(i,h,c){return i.pipe(new g).pipe(new r("uncompressedSize")).pipe(h.compressWorker(c)).pipe(new r("compressedSize")).withStreamInfo("compression",h)},k.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(N,k,y){var o=N("./stream/GenericWorker");y.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},y.DEFLATE=N("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(N,k,y){var o=N("./utils"),f=function(){for(var g,r=[],l=0;l<256;l++){g=l;for(var i=0;i<8;i++)g=1&g?3988292384^g>>>1:g>>>1;r[l]=g}return r}();k.exports=function(g,r){return g!==void 0&&g.length?o.getTypeOf(g)!=="string"?function(l,i,h,c){var a=f,w=c+h;l^=-1;for(var s=c;s<w;s++)l=l>>>8^a[255&(l^i[s])];return-1^l}(0|r,g,g.length,0):function(l,i,h,c){var a=f,w=c+h;l^=-1;for(var s=c;s<w;s++)l=l>>>8^a[255&(l^i.charCodeAt(s))];return-1^l}(0|r,g,g.length,0):0}},{"./utils":32}],5:[function(N,k,y){y.base64=!1,y.binary=!1,y.dir=!1,y.createFolders=!0,y.date=null,y.compression=null,y.compressionOptions=null,y.comment=null,y.unixPermissions=null,y.dosPermissions=null},{}],6:[function(N,k,y){var o=null;o=typeof Promise<"u"?Promise:N("lie"),k.exports={Promise:o}},{lie:37}],7:[function(N,k,y){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",f=N("pako"),g=N("./utils"),r=N("./stream/GenericWorker"),l=o?"uint8array":"array";function i(h,c){r.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=c,this.meta={}}y.magic="\b\0",g.inherits(i,r),i.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(g.transformTo(l,h.data),!1)},i.prototype.flush=function(){r.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},i.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this._pako=null},i.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(c){h.push({data:c,meta:h.meta})}},y.compressWorker=function(h){return new i("Deflate",h)},y.uncompressWorker=function(){return new i("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(N,k,y){function o(a,w){var s,d="";for(s=0;s<w;s++)d+=String.fromCharCode(255&a),a>>>=8;return d}function f(a,w,s,d,_,n){var e,u,v=a.file,b=a.compression,x=n!==l.utf8encode,p=g.transformTo("string",n(v.name)),S=g.transformTo("string",l.utf8encode(v.name)),j=v.comment,U=g.transformTo("string",n(j)),P=g.transformTo("string",l.utf8encode(j)),W=S.length!==v.name.length,E=P.length!==j.length,X="",Q="",J="",ct=v.dir,et=v.date,ht={crc32:0,compressedSize:0,uncompressedSize:0};w&&!s||(ht.crc32=a.crc32,ht.compressedSize=a.compressedSize,ht.uncompressedSize=a.uncompressedSize);var G=0;w&&(G|=8),x||!W&&!E||(G|=2048);var $=0,at=0;ct&&($|=16),_==="UNIX"?(at=798,$|=function(ot,yt){var mt=ot;return ot||(mt=yt?16893:33204),(65535&mt)<<16}(v.unixPermissions,ct)):(at=20,$|=function(ot){return 63&(ot||0)}(v.dosPermissions)),e=et.getUTCHours(),e<<=6,e|=et.getUTCMinutes(),e<<=5,e|=et.getUTCSeconds()/2,u=et.getUTCFullYear()-1980,u<<=4,u|=et.getUTCMonth()+1,u<<=5,u|=et.getUTCDate(),W&&(Q=o(1,1)+o(i(p),4)+S,X+="up"+o(Q.length,2)+Q),E&&(J=o(1,1)+o(i(U),4)+P,X+="uc"+o(J.length,2)+J);var st="";return st+=`
\0`,st+=o(G,2),st+=b.magic,st+=o(e,2),st+=o(u,2),st+=o(ht.crc32,4),st+=o(ht.compressedSize,4),st+=o(ht.uncompressedSize,4),st+=o(p.length,2),st+=o(X.length,2),{fileRecord:h.LOCAL_FILE_HEADER+st+p+X,dirRecord:h.CENTRAL_FILE_HEADER+o(at,2)+st+o(U.length,2)+"\0\0\0\0"+o($,4)+o(d,4)+p+X+U}}var g=N("../utils"),r=N("../stream/GenericWorker"),l=N("../utf8"),i=N("../crc32"),h=N("../signature");function c(a,w,s,d){r.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=s,this.encodeFileName=d,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}g.inherits(c,r),c.prototype.push=function(a){var w=a.meta.percent||0,s=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,r.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:s?(w+100*(s-d-1))/s:100}}))},c.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name;var w=this.streamFiles&&!a.file.dir;if(w){var s=f(a,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:s.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(a){this.accumulate=!1;var w=this.streamFiles&&!a.file.dir,s=f(a,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),w)this.push({data:function(d){return h.DATA_DESCRIPTOR+o(d.crc32,4)+o(d.compressedSize,4)+o(d.uncompressedSize,4)}(a),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var a=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var s=this.bytesWritten-a,d=function(_,n,e,u,v){var b=g.transformTo("string",v(u));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(_,2)+o(_,2)+o(n,4)+o(e,4)+o(b.length,2)+b}(this.dirRecords.length,s,a,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(a){this._sources.push(a);var w=this;return a.on("data",function(s){w.processChunk(s)}),a.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),a.on("error",function(s){w.error(s)}),this},c.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(a){var w=this._sources;if(!r.prototype.error.call(this,a))return!1;for(var s=0;s<w.length;s++)try{w[s].error(a)}catch{}return!0},c.prototype.lock=function(){r.prototype.lock.call(this);for(var a=this._sources,w=0;w<a.length;w++)a[w].lock()},k.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(N,k,y){var o=N("../compressions"),f=N("./ZipFileWorker");y.generateWorker=function(g,r,l){var i=new f(r.streamFiles,l,r.platform,r.encodeFileName),h=0;try{g.forEach(function(c,a){h++;var w=function(n,e){var u=n||e,v=o[u];if(!v)throw new Error(u+" is not a valid compression method !");return v}(a.options.compression,r.compression),s=a.options.compressionOptions||r.compressionOptions||{},d=a.dir,_=a.date;a._compressWorker(w,s).withStreamInfo("file",{name:c,dir:d,date:_,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(i)}),i.entriesCount=h}catch(c){i.error(c)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(N,k,y){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f=new o;for(var g in this)typeof this[g]!="function"&&(f[g]=this[g]);return f}}(o.prototype=N("./object")).loadAsync=N("./load"),o.support=N("./support"),o.defaults=N("./defaults"),o.version="3.10.1",o.loadAsync=function(f,g){return new o().loadAsync(f,g)},o.external=N("./external"),k.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(N,k,y){var o=N("./utils"),f=N("./external"),g=N("./utf8"),r=N("./zipEntries"),l=N("./stream/Crc32Probe"),i=N("./nodejsUtils");function h(c){return new f.Promise(function(a,w){var s=c.decompressed.getContentWorker().pipe(new l);s.on("error",function(d){w(d)}).on("end",function(){s.streamInfo.crc32!==c.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):a()}).resume()})}k.exports=function(c,a){var w=this;return a=o.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:g.utf8decode}),i.isNode&&i.isStream(c)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",c,!0,a.optimizedBinaryString,a.base64).then(function(s){var d=new r(a);return d.load(s),d}).then(function(s){var d=[f.Promise.resolve(s)],_=s.files;if(a.checkCRC32)for(var n=0;n<_.length;n++)d.push(h(_[n]));return f.Promise.all(d)}).then(function(s){for(var d=s.shift(),_=d.files,n=0;n<_.length;n++){var e=_[n],u=e.fileNameStr,v=o.resolve(e.fileNameStr);w.file(v,e.decompressed,{binary:!0,optimizedBinaryString:!0,date:e.date,dir:e.dir,comment:e.fileCommentStr.length?e.fileCommentStr:null,unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions,createFolders:a.createFolders}),e.dir||(w.file(v).unsafeOriginalName=u)}return d.zipComment.length&&(w.comment=d.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(N,k,y){var o=N("../utils"),f=N("../stream/GenericWorker");function g(r,l){f.call(this,"Nodejs stream input adapter for "+r),this._upstreamEnded=!1,this._bindStream(l)}o.inherits(g,f),g.prototype._bindStream=function(r){var l=this;(this._stream=r).pause(),r.on("data",function(i){l.push({data:i,meta:{percent:0}})}).on("error",function(i){l.isPaused?this.generatedError=i:l.error(i)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},g.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},g.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},k.exports=g},{"../stream/GenericWorker":28,"../utils":32}],13:[function(N,k,y){var o=N("readable-stream").Readable;function f(g,r,l){o.call(this,r),this._helper=g;var i=this;g.on("data",function(h,c){i.push(h)||i._helper.pause(),l&&l(c)}).on("error",function(h){i.emit("error",h)}).on("end",function(){i.push(null)})}N("../utils").inherits(f,o),f.prototype._read=function(){this._helper.resume()},k.exports=f},{"../utils":32,"readable-stream":16}],14:[function(N,k,y){k.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,f){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,f);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,f)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var f=new Buffer(o);return f.fill(0),f},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(N,k,y){function o(v,b,x){var p,S=g.getTypeOf(b),j=g.extend(x||{},i);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(v=_(v)),j.createFolders&&(p=d(v))&&n.call(this,p,!0);var U=S==="string"&&j.binary===!1&&j.base64===!1;x&&x.binary!==void 0||(j.binary=!U),(b instanceof h&&b.uncompressedSize===0||j.dir||!b||b.length===0)&&(j.base64=!1,j.binary=!0,b="",j.compression="STORE",S="string");var P=null;P=b instanceof h||b instanceof r?b:w.isNode&&w.isStream(b)?new s(v,b):g.prepareContent(v,b,j.binary,j.optimizedBinaryString,j.base64);var W=new c(v,P,j);this.files[v]=W}var f=N("./utf8"),g=N("./utils"),r=N("./stream/GenericWorker"),l=N("./stream/StreamHelper"),i=N("./defaults"),h=N("./compressedObject"),c=N("./zipObject"),a=N("./generate"),w=N("./nodejsUtils"),s=N("./nodejs/NodejsStreamInputAdapter"),d=function(v){v.slice(-1)==="/"&&(v=v.substring(0,v.length-1));var b=v.lastIndexOf("/");return 0<b?v.substring(0,b):""},_=function(v){return v.slice(-1)!=="/"&&(v+="/"),v},n=function(v,b){return b=b!==void 0?b:i.createFolders,v=_(v),this.files[v]||o.call(this,v,null,{dir:!0,createFolders:b}),this.files[v]};function e(v){return Object.prototype.toString.call(v)==="[object RegExp]"}var u={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(v){var b,x,p;for(b in this.files)p=this.files[b],(x=b.slice(this.root.length,b.length))&&b.slice(0,this.root.length)===this.root&&v(x,p)},filter:function(v){var b=[];return this.forEach(function(x,p){v(x,p)&&b.push(p)}),b},file:function(v,b,x){if(arguments.length!==1)return v=this.root+v,o.call(this,v,b,x),this;if(e(v)){var p=v;return this.filter(function(j,U){return!U.dir&&p.test(j)})}var S=this.files[this.root+v];return S&&!S.dir?S:null},folder:function(v){if(!v)return this;if(e(v))return this.filter(function(S,j){return j.dir&&v.test(S)});var b=this.root+v,x=n.call(this,b),p=this.clone();return p.root=x.name,p},remove:function(v){v=this.root+v;var b=this.files[v];if(b||(v.slice(-1)!=="/"&&(v+="/"),b=this.files[v]),b&&!b.dir)delete this.files[v];else for(var x=this.filter(function(S,j){return j.name.slice(0,v.length)===v}),p=0;p<x.length;p++)delete this.files[x[p].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(v){var b,x={};try{if((x=g.extend(v||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),x.type==="binarystring"&&(x.type="string"),!x.type)throw new Error("No output type specified.");g.checkSupport(x.type),x.platform!=="darwin"&&x.platform!=="freebsd"&&x.platform!=="linux"&&x.platform!=="sunos"||(x.platform="UNIX"),x.platform==="win32"&&(x.platform="DOS");var p=x.comment||this.comment||"";b=a.generateWorker(this,x,p)}catch(S){(b=new r("error")).error(S)}return new l(b,x.type||"string",x.mimeType)},generateAsync:function(v,b){return this.generateInternalStream(v).accumulate(b)},generateNodeStream:function(v,b){return(v=v||{}).type||(v.type="nodebuffer"),this.generateInternalStream(v).toNodejsStream(b)}};k.exports=u},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(N,k,y){k.exports=N("stream")},{stream:void 0}],17:[function(N,k,y){var o=N("./DataReader");function f(g){o.call(this,g);for(var r=0;r<this.data.length;r++)g[r]=255&g[r]}N("../utils").inherits(f,o),f.prototype.byteAt=function(g){return this.data[this.zero+g]},f.prototype.lastIndexOfSignature=function(g){for(var r=g.charCodeAt(0),l=g.charCodeAt(1),i=g.charCodeAt(2),h=g.charCodeAt(3),c=this.length-4;0<=c;--c)if(this.data[c]===r&&this.data[c+1]===l&&this.data[c+2]===i&&this.data[c+3]===h)return c-this.zero;return-1},f.prototype.readAndCheckSignature=function(g){var r=g.charCodeAt(0),l=g.charCodeAt(1),i=g.charCodeAt(2),h=g.charCodeAt(3),c=this.readData(4);return r===c[0]&&l===c[1]&&i===c[2]&&h===c[3]},f.prototype.readData=function(g){if(this.checkOffset(g),g===0)return[];var r=this.data.slice(this.zero+this.index,this.zero+this.index+g);return this.index+=g,r},k.exports=f},{"../utils":32,"./DataReader":18}],18:[function(N,k,y){var o=N("../utils");function f(g){this.data=g,this.length=g.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(g){this.checkIndex(this.index+g)},checkIndex:function(g){if(this.length<this.zero+g||g<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+g+"). Corrupted zip ?")},setIndex:function(g){this.checkIndex(g),this.index=g},skip:function(g){this.setIndex(this.index+g)},byteAt:function(){},readInt:function(g){var r,l=0;for(this.checkOffset(g),r=this.index+g-1;r>=this.index;r--)l=(l<<8)+this.byteAt(r);return this.index+=g,l},readString:function(g){return o.transformTo("string",this.readData(g))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var g=this.readInt(4);return new Date(Date.UTC(1980+(g>>25&127),(g>>21&15)-1,g>>16&31,g>>11&31,g>>5&63,(31&g)<<1))}},k.exports=f},{"../utils":32}],19:[function(N,k,y){var o=N("./Uint8ArrayReader");function f(g){o.call(this,g)}N("../utils").inherits(f,o),f.prototype.readData=function(g){this.checkOffset(g);var r=this.data.slice(this.zero+this.index,this.zero+this.index+g);return this.index+=g,r},k.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(N,k,y){var o=N("./DataReader");function f(g){o.call(this,g)}N("../utils").inherits(f,o),f.prototype.byteAt=function(g){return this.data.charCodeAt(this.zero+g)},f.prototype.lastIndexOfSignature=function(g){return this.data.lastIndexOf(g)-this.zero},f.prototype.readAndCheckSignature=function(g){return g===this.readData(4)},f.prototype.readData=function(g){this.checkOffset(g);var r=this.data.slice(this.zero+this.index,this.zero+this.index+g);return this.index+=g,r},k.exports=f},{"../utils":32,"./DataReader":18}],21:[function(N,k,y){var o=N("./ArrayReader");function f(g){o.call(this,g)}N("../utils").inherits(f,o),f.prototype.readData=function(g){if(this.checkOffset(g),g===0)return new Uint8Array(0);var r=this.data.subarray(this.zero+this.index,this.zero+this.index+g);return this.index+=g,r},k.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(N,k,y){var o=N("../utils"),f=N("../support"),g=N("./ArrayReader"),r=N("./StringReader"),l=N("./NodeBufferReader"),i=N("./Uint8ArrayReader");k.exports=function(h){var c=o.getTypeOf(h);return o.checkSupport(c),c!=="string"||f.uint8array?c==="nodebuffer"?new l(h):f.uint8array?new i(o.transformTo("uint8array",h)):new g(o.transformTo("array",h)):new r(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(N,k,y){y.LOCAL_FILE_HEADER="PK",y.CENTRAL_FILE_HEADER="PK",y.CENTRAL_DIRECTORY_END="PK",y.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",y.ZIP64_CENTRAL_DIRECTORY_END="PK",y.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(N,k,y){var o=N("./GenericWorker"),f=N("../utils");function g(r){o.call(this,"ConvertWorker to "+r),this.destType=r}f.inherits(g,o),g.prototype.processChunk=function(r){this.push({data:f.transformTo(this.destType,r.data),meta:r.meta})},k.exports=g},{"../utils":32,"./GenericWorker":28}],25:[function(N,k,y){var o=N("./GenericWorker"),f=N("../crc32");function g(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}N("../utils").inherits(g,o),g.prototype.processChunk=function(r){this.streamInfo.crc32=f(r.data,this.streamInfo.crc32||0),this.push(r)},k.exports=g},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(N,k,y){var o=N("../utils"),f=N("./GenericWorker");function g(r){f.call(this,"DataLengthProbe for "+r),this.propName=r,this.withStreamInfo(r,0)}o.inherits(g,f),g.prototype.processChunk=function(r){if(r){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+r.data.length}f.prototype.processChunk.call(this,r)},k.exports=g},{"../utils":32,"./GenericWorker":28}],27:[function(N,k,y){var o=N("../utils"),f=N("./GenericWorker");function g(r){f.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,r.then(function(i){l.dataIsReady=!0,l.data=i,l.max=i&&i.length||0,l.type=o.getTypeOf(i),l.isPaused||l._tickAndRepeat()},function(i){l.error(i)})}o.inherits(g,f),g.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},g.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},g.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},g.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var r=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":r=this.data.substring(this.index,l);break;case"uint8array":r=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":r=this.data.slice(this.index,l)}return this.index=l,this.push({data:r,meta:{percent:this.max?this.index/this.max*100:0}})},k.exports=g},{"../utils":32,"./GenericWorker":28}],28:[function(N,k,y){function o(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,g){return this._listeners[f].push(g),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,g){if(this._listeners[f])for(var r=0;r<this._listeners[f].length;r++)this._listeners[f][r].call(this,g)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var g=this;return f.on("data",function(r){g.processChunk(r)}),f.on("end",function(){g.end()}),f.on("error",function(r){g.error(r)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var f=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),!f},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,g){return this.extraStreamInfo[f]=g,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},k.exports=o},{}],29:[function(N,k,y){var o=N("../utils"),f=N("./ConvertWorker"),g=N("./GenericWorker"),r=N("../base64"),l=N("../support"),i=N("../external"),h=null;if(l.nodestream)try{h=N("../nodejs/NodejsStreamOutputAdapter")}catch{}function c(w,s){return new i.Promise(function(d,_){var n=[],e=w._internalType,u=w._outputType,v=w._mimeType;w.on("data",function(b,x){n.push(b),s&&s(x)}).on("error",function(b){n=[],_(b)}).on("end",function(){try{var b=function(x,p,S){switch(x){case"blob":return o.newBlob(o.transformTo("arraybuffer",p),S);case"base64":return r.encode(p);default:return o.transformTo(x,p)}}(u,function(x,p){var S,j=0,U=null,P=0;for(S=0;S<p.length;S++)P+=p[S].length;switch(x){case"string":return p.join("");case"array":return Array.prototype.concat.apply([],p);case"uint8array":for(U=new Uint8Array(P),S=0;S<p.length;S++)U.set(p[S],j),j+=p[S].length;return U;case"nodebuffer":return Buffer.concat(p);default:throw new Error("concat : unsupported type '"+x+"'")}}(e,n),v);d(b)}catch(x){_(x)}n=[]}).resume()})}function a(w,s,d){var _=s;switch(s){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=s,this._mimeType=d,o.checkSupport(_),this._worker=w.pipe(new f(_)),w.lock()}catch(n){this._worker=new g("error"),this._worker.error(n)}}a.prototype={accumulate:function(w){return c(this,w)},on:function(w,s){var d=this;return w==="data"?this._worker.on(w,function(_){s.call(d,_.data,_.meta)}):this._worker.on(w,function(){o.delay(s,arguments,d)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},w)}},k.exports=a},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(N,k,y){if(y.base64=!0,y.array=!0,y.string=!0,y.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",y.nodebuffer=typeof Buffer<"u",y.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")y.blob=!1;else{var o=new ArrayBuffer(0);try{y.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(o),y.blob=f.getBlob("application/zip").size===0}catch{y.blob=!1}}}try{y.nodestream=!!N("readable-stream").Readable}catch{y.nodestream=!1}},{"readable-stream":16}],31:[function(N,k,y){for(var o=N("./utils"),f=N("./support"),g=N("./nodejsUtils"),r=N("./stream/GenericWorker"),l=new Array(256),i=0;i<256;i++)l[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;l[254]=l[254]=1;function h(){r.call(this,"utf-8 decode"),this.leftOver=null}function c(){r.call(this,"utf-8 encode")}y.utf8encode=function(a){return f.nodebuffer?g.newBufferFrom(a,"utf-8"):function(w){var s,d,_,n,e,u=w.length,v=0;for(n=0;n<u;n++)(64512&(d=w.charCodeAt(n)))==55296&&n+1<u&&(64512&(_=w.charCodeAt(n+1)))==56320&&(d=65536+(d-55296<<10)+(_-56320),n++),v+=d<128?1:d<2048?2:d<65536?3:4;for(s=f.uint8array?new Uint8Array(v):new Array(v),n=e=0;e<v;n++)(64512&(d=w.charCodeAt(n)))==55296&&n+1<u&&(64512&(_=w.charCodeAt(n+1)))==56320&&(d=65536+(d-55296<<10)+(_-56320),n++),d<128?s[e++]=d:(d<2048?s[e++]=192|d>>>6:(d<65536?s[e++]=224|d>>>12:(s[e++]=240|d>>>18,s[e++]=128|d>>>12&63),s[e++]=128|d>>>6&63),s[e++]=128|63&d);return s}(a)},y.utf8decode=function(a){return f.nodebuffer?o.transformTo("nodebuffer",a).toString("utf-8"):function(w){var s,d,_,n,e=w.length,u=new Array(2*e);for(s=d=0;s<e;)if((_=w[s++])<128)u[d++]=_;else if(4<(n=l[_]))u[d++]=65533,s+=n-1;else{for(_&=n===2?31:n===3?15:7;1<n&&s<e;)_=_<<6|63&w[s++],n--;1<n?u[d++]=65533:_<65536?u[d++]=_:(_-=65536,u[d++]=55296|_>>10&1023,u[d++]=56320|1023&_)}return u.length!==d&&(u.subarray?u=u.subarray(0,d):u.length=d),o.applyFromCharCode(u)}(a=o.transformTo(f.uint8array?"uint8array":"array",a))},o.inherits(h,r),h.prototype.processChunk=function(a){var w=o.transformTo(f.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(f.uint8array){var s=w;(w=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),w.set(s,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var d=function(n,e){var u;for((e=e||n.length)>n.length&&(e=n.length),u=e-1;0<=u&&(192&n[u])==128;)u--;return u<0||u===0?e:u+l[n[u]]>e?u:e}(w),_=w;d!==w.length&&(f.uint8array?(_=w.subarray(0,d),this.leftOver=w.subarray(d,w.length)):(_=w.slice(0,d),this.leftOver=w.slice(d,w.length))),this.push({data:y.utf8decode(_),meta:a.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:y.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},y.Utf8DecodeWorker=h,o.inherits(c,r),c.prototype.processChunk=function(a){this.push({data:y.utf8encode(a.data),meta:a.meta})},y.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(N,k,y){var o=N("./support"),f=N("./base64"),g=N("./nodejsUtils"),r=N("./external");function l(s){return s}function i(s,d){for(var _=0;_<s.length;++_)d[_]=255&s.charCodeAt(_);return d}N("setimmediate"),y.newBlob=function(s,d){y.checkSupport("blob");try{return new Blob([s],{type:d})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(s),_.getBlob(d)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(s,d,_){var n=[],e=0,u=s.length;if(u<=_)return String.fromCharCode.apply(null,s);for(;e<u;)d==="array"||d==="nodebuffer"?n.push(String.fromCharCode.apply(null,s.slice(e,Math.min(e+_,u)))):n.push(String.fromCharCode.apply(null,s.subarray(e,Math.min(e+_,u)))),e+=_;return n.join("")},stringifyByChar:function(s){for(var d="",_=0;_<s.length;_++)d+=String.fromCharCode(s[_]);return d},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,g.allocBuffer(1)).length===1}catch{return!1}}()}};function c(s){var d=65536,_=y.getTypeOf(s),n=!0;if(_==="uint8array"?n=h.applyCanBeUsed.uint8array:_==="nodebuffer"&&(n=h.applyCanBeUsed.nodebuffer),n)for(;1<d;)try{return h.stringifyByChunk(s,_,d)}catch{d=Math.floor(d/2)}return h.stringifyByChar(s)}function a(s,d){for(var _=0;_<s.length;_++)d[_]=s[_];return d}y.applyFromCharCode=c;var w={};w.string={string:l,array:function(s){return i(s,new Array(s.length))},arraybuffer:function(s){return w.string.uint8array(s).buffer},uint8array:function(s){return i(s,new Uint8Array(s.length))},nodebuffer:function(s){return i(s,g.allocBuffer(s.length))}},w.array={string:c,array:l,arraybuffer:function(s){return new Uint8Array(s).buffer},uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return g.newBufferFrom(s)}},w.arraybuffer={string:function(s){return c(new Uint8Array(s))},array:function(s){return a(new Uint8Array(s),new Array(s.byteLength))},arraybuffer:l,uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return g.newBufferFrom(new Uint8Array(s))}},w.uint8array={string:c,array:function(s){return a(s,new Array(s.length))},arraybuffer:function(s){return s.buffer},uint8array:l,nodebuffer:function(s){return g.newBufferFrom(s)}},w.nodebuffer={string:c,array:function(s){return a(s,new Array(s.length))},arraybuffer:function(s){return w.nodebuffer.uint8array(s).buffer},uint8array:function(s){return a(s,new Uint8Array(s.length))},nodebuffer:l},y.transformTo=function(s,d){if(d=d||"",!s)return d;y.checkSupport(s);var _=y.getTypeOf(d);return w[_][s](d)},y.resolve=function(s){for(var d=s.split("/"),_=[],n=0;n<d.length;n++){var e=d[n];e==="."||e===""&&n!==0&&n!==d.length-1||(e===".."?_.pop():_.push(e))}return _.join("/")},y.getTypeOf=function(s){return typeof s=="string"?"string":Object.prototype.toString.call(s)==="[object Array]"?"array":o.nodebuffer&&g.isBuffer(s)?"nodebuffer":o.uint8array&&s instanceof Uint8Array?"uint8array":o.arraybuffer&&s instanceof ArrayBuffer?"arraybuffer":void 0},y.checkSupport=function(s){if(!o[s.toLowerCase()])throw new Error(s+" is not supported by this platform")},y.MAX_VALUE_16BITS=65535,y.MAX_VALUE_32BITS=-1,y.pretty=function(s){var d,_,n="";for(_=0;_<(s||"").length;_++)n+="\\x"+((d=s.charCodeAt(_))<16?"0":"")+d.toString(16).toUpperCase();return n},y.delay=function(s,d,_){setImmediate(function(){s.apply(_||null,d||[])})},y.inherits=function(s,d){function _(){}_.prototype=d.prototype,s.prototype=new _},y.extend=function(){var s,d,_={};for(s=0;s<arguments.length;s++)for(d in arguments[s])Object.prototype.hasOwnProperty.call(arguments[s],d)&&_[d]===void 0&&(_[d]=arguments[s][d]);return _},y.prepareContent=function(s,d,_,n,e){return r.Promise.resolve(d).then(function(u){return o.blob&&(u instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(u))!==-1)&&typeof FileReader<"u"?new r.Promise(function(v,b){var x=new FileReader;x.onload=function(p){v(p.target.result)},x.onerror=function(p){b(p.target.error)},x.readAsArrayBuffer(u)}):u}).then(function(u){var v=y.getTypeOf(u);return v?(v==="arraybuffer"?u=y.transformTo("uint8array",u):v==="string"&&(e?u=f.decode(u):_&&n!==!0&&(u=function(b){return i(b,o.uint8array?new Uint8Array(b.length):new Array(b.length))}(u))),u):r.Promise.reject(new Error("Can't read the data of '"+s+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(N,k,y){var o=N("./reader/readerFor"),f=N("./utils"),g=N("./signature"),r=N("./zipEntry"),l=N("./support");function i(h){this.files=[],this.loadOptions=h}i.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var c=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(c)+", expected "+f.pretty(h)+")")}},isSignature:function(h,c){var a=this.reader.index;this.reader.setIndex(h);var w=this.reader.readString(4)===c;return this.reader.setIndex(a),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),c=l.uint8array?"uint8array":"array",a=f.transformTo(c,h);this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,c,a,w=this.zip64EndOfCentralSize-44;0<w;)h=this.reader.readInt(2),c=this.reader.readInt(4),a=this.reader.readData(c),this.zip64ExtensibleData[h]={id:h,length:c,value:a}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,c;for(h=0;h<this.files.length;h++)c=this.files[h],this.reader.setIndex(c.localHeaderOffset),this.checkSignature(g.LOCAL_FILE_HEADER),c.readLocalPart(this.reader),c.handleUTF8(),c.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(g.CENTRAL_FILE_HEADER);)(h=new r({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(g.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,g.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var c=h;if(this.checkSignature(g.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,g.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);var w=c-a;if(0<w)this.isSignature(c,g.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(h){this.reader=o(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},k.exports=i},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(N,k,y){var o=N("./reader/readerFor"),f=N("./utils"),g=N("./compressedObject"),r=N("./crc32"),l=N("./utf8"),i=N("./compressions"),h=N("./support");function c(a,w){this.options=a,this.loadOptions=w}c.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(a){var w,s;if(a.skip(22),this.fileNameLength=a.readInt(2),s=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(s),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(d){for(var _ in i)if(Object.prototype.hasOwnProperty.call(i,_)&&i[_].magic===d)return i[_];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new g(this.compressedSize,this.uncompressedSize,this.crc32,w,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var w=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(w),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a==0&&(this.dosPermissions=63&this.externalFileAttributes),a==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=o(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var w,s,d,_=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index+4<_;)w=a.readInt(2),s=a.readInt(2),d=a.readData(s),this.extraFields[w]={id:w,length:s,value:d};a.setIndex(_)},handleUTF8:function(){var a=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var s=f.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(s)}var d=this.findExtraFieldUnicodeComment();if(d!==null)this.fileCommentStr=d;else{var _=f.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var w=o(a.value);return w.readInt(1)!==1||r(this.fileName)!==w.readInt(4)?null:l.utf8decode(w.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var w=o(a.value);return w.readInt(1)!==1||r(this.fileComment)!==w.readInt(4)?null:l.utf8decode(w.readData(a.length-5))}return null}},k.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(N,k,y){function o(w,s,d){this.name=w,this.dir=d.dir,this.date=d.date,this.comment=d.comment,this.unixPermissions=d.unixPermissions,this.dosPermissions=d.dosPermissions,this._data=s,this._dataBinary=d.binary,this.options={compression:d.compression,compressionOptions:d.compressionOptions}}var f=N("./stream/StreamHelper"),g=N("./stream/DataWorker"),r=N("./utf8"),l=N("./compressedObject"),i=N("./stream/GenericWorker");o.prototype={internalStream:function(w){var s=null,d="string";try{if(!w)throw new Error("No output type specified.");var _=(d=w.toLowerCase())==="string"||d==="text";d!=="binarystring"&&d!=="text"||(d="string"),s=this._decompressWorker();var n=!this._dataBinary;n&&!_&&(s=s.pipe(new r.Utf8EncodeWorker)),!n&&_&&(s=s.pipe(new r.Utf8DecodeWorker))}catch(e){(s=new i("error")).error(e)}return new f(s,d,"")},async:function(w,s){return this.internalStream(w).accumulate(s)},nodeStream:function(w,s){return this.internalStream(w||"nodebuffer").toNodejsStream(s)},_compressWorker:function(w,s){if(this._data instanceof l&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var d=this._decompressWorker();return this._dataBinary||(d=d.pipe(new r.Utf8EncodeWorker)),l.createWorkerFrom(d,w,s)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof i?this._data:new g(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},a=0;a<h.length;a++)o.prototype[h[a]]=c;k.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(N,k,y){(function(o){var f,g,r=o.MutationObserver||o.WebKitMutationObserver;if(r){var l=0,i=new r(w),h=o.document.createTextNode("");i.observe(h,{characterData:!0}),f=function(){h.data=l=++l%2}}else if(o.setImmediate||o.MessageChannel===void 0)f="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var s=o.document.createElement("script");s.onreadystatechange=function(){w(),s.onreadystatechange=null,s.parentNode.removeChild(s),s=null},o.document.documentElement.appendChild(s)}:function(){setTimeout(w,0)};else{var c=new o.MessageChannel;c.port1.onmessage=w,f=function(){c.port2.postMessage(0)}}var a=[];function w(){var s,d;g=!0;for(var _=a.length;_;){for(d=a,a=[],s=-1;++s<_;)d[s]();_=a.length}g=!1}k.exports=function(s){a.push(s)!==1||g||f()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(N,k,y){var o=N("immediate");function f(){}var g={},r=["REJECTED"],l=["FULFILLED"],i=["PENDING"];function h(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=i,this.queue=[],this.outcome=void 0,_!==f&&s(this,_)}function c(_,n,e){this.promise=_,typeof n=="function"&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),typeof e=="function"&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}function a(_,n,e){o(function(){var u;try{u=n(e)}catch(v){return g.reject(_,v)}u===_?g.reject(_,new TypeError("Cannot resolve promise with itself")):g.resolve(_,u)})}function w(_){var n=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof n=="function")return function(){n.apply(_,arguments)}}function s(_,n){var e=!1;function u(x){e||(e=!0,g.reject(_,x))}function v(x){e||(e=!0,g.resolve(_,x))}var b=d(function(){n(v,u)});b.status==="error"&&u(b.value)}function d(_,n){var e={};try{e.value=_(n),e.status="success"}catch(u){e.status="error",e.value=u}return e}(k.exports=h).prototype.finally=function(_){if(typeof _!="function")return this;var n=this.constructor;return this.then(function(e){return n.resolve(_()).then(function(){return e})},function(e){return n.resolve(_()).then(function(){throw e})})},h.prototype.catch=function(_){return this.then(null,_)},h.prototype.then=function(_,n){if(typeof _!="function"&&this.state===l||typeof n!="function"&&this.state===r)return this;var e=new this.constructor(f);return this.state!==i?a(e,this.state===l?_:n,this.outcome):this.queue.push(new c(e,_,n)),e},c.prototype.callFulfilled=function(_){g.resolve(this.promise,_)},c.prototype.otherCallFulfilled=function(_){a(this.promise,this.onFulfilled,_)},c.prototype.callRejected=function(_){g.reject(this.promise,_)},c.prototype.otherCallRejected=function(_){a(this.promise,this.onRejected,_)},g.resolve=function(_,n){var e=d(w,n);if(e.status==="error")return g.reject(_,e.value);var u=e.value;if(u)s(_,u);else{_.state=l,_.outcome=n;for(var v=-1,b=_.queue.length;++v<b;)_.queue[v].callFulfilled(n)}return _},g.reject=function(_,n){_.state=r,_.outcome=n;for(var e=-1,u=_.queue.length;++e<u;)_.queue[e].callRejected(n);return _},h.resolve=function(_){return _ instanceof this?_:g.resolve(new this(f),_)},h.reject=function(_){var n=new this(f);return g.reject(n,_)},h.all=function(_){var n=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=_.length,u=!1;if(!e)return this.resolve([]);for(var v=new Array(e),b=0,x=-1,p=new this(f);++x<e;)S(_[x],x);return p;function S(j,U){n.resolve(j).then(function(P){v[U]=P,++b!==e||u||(u=!0,g.resolve(p,v))},function(P){u||(u=!0,g.reject(p,P))})}},h.race=function(_){var n=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=_.length,u=!1;if(!e)return this.resolve([]);for(var v=-1,b=new this(f);++v<e;)x=_[v],n.resolve(x).then(function(p){u||(u=!0,g.resolve(b,p))},function(p){u||(u=!0,g.reject(b,p))});var x;return b}},{immediate:36}],38:[function(N,k,y){var o={};(0,N("./lib/utils/common").assign)(o,N("./lib/deflate"),N("./lib/inflate"),N("./lib/zlib/constants")),k.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(N,k,y){var o=N("./zlib/deflate"),f=N("./utils/common"),g=N("./utils/strings"),r=N("./zlib/messages"),l=N("./zlib/zstream"),i=Object.prototype.toString,h=0,c=-1,a=0,w=8;function s(_){if(!(this instanceof s))return new s(_);this.options=f.assign({level:c,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:a,to:""},_||{});var n=this.options;n.raw&&0<n.windowBits?n.windowBits=-n.windowBits:n.gzip&&0<n.windowBits&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var e=o.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(e!==h)throw new Error(r[e]);if(n.header&&o.deflateSetHeader(this.strm,n.header),n.dictionary){var u;if(u=typeof n.dictionary=="string"?g.string2buf(n.dictionary):i.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,(e=o.deflateSetDictionary(this.strm,u))!==h)throw new Error(r[e]);this._dict_set=!0}}function d(_,n){var e=new s(n);if(e.push(_,!0),e.err)throw e.msg||r[e.err];return e.result}s.prototype.push=function(_,n){var e,u,v=this.strm,b=this.options.chunkSize;if(this.ended)return!1;u=n===~~n?n:n===!0?4:0,typeof _=="string"?v.input=g.string2buf(_):i.call(_)==="[object ArrayBuffer]"?v.input=new Uint8Array(_):v.input=_,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new f.Buf8(b),v.next_out=0,v.avail_out=b),(e=o.deflate(v,u))!==1&&e!==h)return this.onEnd(e),!(this.ended=!0);v.avail_out!==0&&(v.avail_in!==0||u!==4&&u!==2)||(this.options.to==="string"?this.onData(g.buf2binstring(f.shrinkBuf(v.output,v.next_out))):this.onData(f.shrinkBuf(v.output,v.next_out)))}while((0<v.avail_in||v.avail_out===0)&&e!==1);return u===4?(e=o.deflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===h):u!==2||(this.onEnd(h),!(v.avail_out=0))},s.prototype.onData=function(_){this.chunks.push(_)},s.prototype.onEnd=function(_){_===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},y.Deflate=s,y.deflate=d,y.deflateRaw=function(_,n){return(n=n||{}).raw=!0,d(_,n)},y.gzip=function(_,n){return(n=n||{}).gzip=!0,d(_,n)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(N,k,y){var o=N("./zlib/inflate"),f=N("./utils/common"),g=N("./utils/strings"),r=N("./zlib/constants"),l=N("./zlib/messages"),i=N("./zlib/zstream"),h=N("./zlib/gzheader"),c=Object.prototype.toString;function a(s){if(!(this instanceof a))return new a(s);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},s||{});var d=this.options;d.raw&&0<=d.windowBits&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),!(0<=d.windowBits&&d.windowBits<16)||s&&s.windowBits||(d.windowBits+=32),15<d.windowBits&&d.windowBits<48&&!(15&d.windowBits)&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var _=o.inflateInit2(this.strm,d.windowBits);if(_!==r.Z_OK)throw new Error(l[_]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function w(s,d){var _=new a(d);if(_.push(s,!0),_.err)throw _.msg||l[_.err];return _.result}a.prototype.push=function(s,d){var _,n,e,u,v,b,x=this.strm,p=this.options.chunkSize,S=this.options.dictionary,j=!1;if(this.ended)return!1;n=d===~~d?d:d===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof s=="string"?x.input=g.binstring2buf(s):c.call(s)==="[object ArrayBuffer]"?x.input=new Uint8Array(s):x.input=s,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new f.Buf8(p),x.next_out=0,x.avail_out=p),(_=o.inflate(x,r.Z_NO_FLUSH))===r.Z_NEED_DICT&&S&&(b=typeof S=="string"?g.string2buf(S):c.call(S)==="[object ArrayBuffer]"?new Uint8Array(S):S,_=o.inflateSetDictionary(this.strm,b)),_===r.Z_BUF_ERROR&&j===!0&&(_=r.Z_OK,j=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),!(this.ended=!0);x.next_out&&(x.avail_out!==0&&_!==r.Z_STREAM_END&&(x.avail_in!==0||n!==r.Z_FINISH&&n!==r.Z_SYNC_FLUSH)||(this.options.to==="string"?(e=g.utf8border(x.output,x.next_out),u=x.next_out-e,v=g.buf2string(x.output,e),x.next_out=u,x.avail_out=p-u,u&&f.arraySet(x.output,x.output,e,u,0),this.onData(v)):this.onData(f.shrinkBuf(x.output,x.next_out)))),x.avail_in===0&&x.avail_out===0&&(j=!0)}while((0<x.avail_in||x.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(n=r.Z_FINISH),n===r.Z_FINISH?(_=o.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):n!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),!(x.avail_out=0))},a.prototype.onData=function(s){this.chunks.push(s)},a.prototype.onEnd=function(s){s===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg},y.Inflate=a,y.inflate=w,y.inflateRaw=function(s,d){return(d=d||{}).raw=!0,w(s,d)},y.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(N,k,y){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";y.assign=function(r){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var i=l.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(var h in i)i.hasOwnProperty(h)&&(r[h]=i[h])}}return r},y.shrinkBuf=function(r,l){return r.length===l?r:r.subarray?r.subarray(0,l):(r.length=l,r)};var f={arraySet:function(r,l,i,h,c){if(l.subarray&&r.subarray)r.set(l.subarray(i,i+h),c);else for(var a=0;a<h;a++)r[c+a]=l[i+a]},flattenChunks:function(r){var l,i,h,c,a,w;for(l=h=0,i=r.length;l<i;l++)h+=r[l].length;for(w=new Uint8Array(h),l=c=0,i=r.length;l<i;l++)a=r[l],w.set(a,c),c+=a.length;return w}},g={arraySet:function(r,l,i,h,c){for(var a=0;a<h;a++)r[c+a]=l[i+a]},flattenChunks:function(r){return[].concat.apply([],r)}};y.setTyped=function(r){r?(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,f)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,g))},y.setTyped(o)},{}],42:[function(N,k,y){var o=N("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch{f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{g=!1}for(var r=new o.Buf8(256),l=0;l<256;l++)r[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function i(h,c){if(c<65537&&(h.subarray&&g||!h.subarray&&f))return String.fromCharCode.apply(null,o.shrinkBuf(h,c));for(var a="",w=0;w<c;w++)a+=String.fromCharCode(h[w]);return a}r[254]=r[254]=1,y.string2buf=function(h){var c,a,w,s,d,_=h.length,n=0;for(s=0;s<_;s++)(64512&(a=h.charCodeAt(s)))==55296&&s+1<_&&(64512&(w=h.charCodeAt(s+1)))==56320&&(a=65536+(a-55296<<10)+(w-56320),s++),n+=a<128?1:a<2048?2:a<65536?3:4;for(c=new o.Buf8(n),s=d=0;d<n;s++)(64512&(a=h.charCodeAt(s)))==55296&&s+1<_&&(64512&(w=h.charCodeAt(s+1)))==56320&&(a=65536+(a-55296<<10)+(w-56320),s++),a<128?c[d++]=a:(a<2048?c[d++]=192|a>>>6:(a<65536?c[d++]=224|a>>>12:(c[d++]=240|a>>>18,c[d++]=128|a>>>12&63),c[d++]=128|a>>>6&63),c[d++]=128|63&a);return c},y.buf2binstring=function(h){return i(h,h.length)},y.binstring2buf=function(h){for(var c=new o.Buf8(h.length),a=0,w=c.length;a<w;a++)c[a]=h.charCodeAt(a);return c},y.buf2string=function(h,c){var a,w,s,d,_=c||h.length,n=new Array(2*_);for(a=w=0;a<_;)if((s=h[a++])<128)n[w++]=s;else if(4<(d=r[s]))n[w++]=65533,a+=d-1;else{for(s&=d===2?31:d===3?15:7;1<d&&a<_;)s=s<<6|63&h[a++],d--;1<d?n[w++]=65533:s<65536?n[w++]=s:(s-=65536,n[w++]=55296|s>>10&1023,n[w++]=56320|1023&s)}return i(n,w)},y.utf8border=function(h,c){var a;for((c=c||h.length)>h.length&&(c=h.length),a=c-1;0<=a&&(192&h[a])==128;)a--;return a<0||a===0?c:a+r[h[a]]>c?a:c}},{"./common":41}],43:[function(N,k,y){k.exports=function(o,f,g,r){for(var l=65535&o|0,i=o>>>16&65535|0,h=0;g!==0;){for(g-=h=2e3<g?2e3:g;i=i+(l=l+f[r++]|0)|0,--h;);l%=65521,i%=65521}return l|i<<16|0}},{}],44:[function(N,k,y){k.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(N,k,y){var o=function(){for(var f,g=[],r=0;r<256;r++){f=r;for(var l=0;l<8;l++)f=1&f?3988292384^f>>>1:f>>>1;g[r]=f}return g}();k.exports=function(f,g,r,l){var i=o,h=l+r;f^=-1;for(var c=l;c<h;c++)f=f>>>8^i[255&(f^g[c])];return-1^f}},{}],46:[function(N,k,y){var o,f=N("../utils/common"),g=N("./trees"),r=N("./adler32"),l=N("./crc32"),i=N("./messages"),h=0,c=4,a=0,w=-2,s=-1,d=4,_=2,n=8,e=9,u=286,v=30,b=19,x=2*u+1,p=15,S=3,j=258,U=j+S+1,P=42,W=113,E=1,X=2,Q=3,J=4;function ct(t,I){return t.msg=i[I],I}function et(t){return(t<<1)-(4<t?9:0)}function ht(t){for(var I=t.length;0<=--I;)t[I]=0}function G(t){var I=t.state,D=I.pending;D>t.avail_out&&(D=t.avail_out),D!==0&&(f.arraySet(t.output,I.pending_buf,I.pending_out,D,t.next_out),t.next_out+=D,I.pending_out+=D,t.total_out+=D,t.avail_out-=D,I.pending-=D,I.pending===0&&(I.pending_out=0))}function $(t,I){g._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,I),t.block_start=t.strstart,G(t.strm)}function at(t,I){t.pending_buf[t.pending++]=I}function st(t,I){t.pending_buf[t.pending++]=I>>>8&255,t.pending_buf[t.pending++]=255&I}function ot(t,I){var D,A,R=t.max_chain_length,F=t.strstart,Z=t.prev_length,K=t.nice_match,V=t.strstart>t.w_size-U?t.strstart-(t.w_size-U):0,nt=t.window,lt=t.w_mask,rt=t.prev,L=t.strstart+j,B=nt[F+Z-1],M=nt[F+Z];t.prev_length>=t.good_match&&(R>>=2),K>t.lookahead&&(K=t.lookahead);do if(nt[(D=I)+Z]===M&&nt[D+Z-1]===B&&nt[D]===nt[F]&&nt[++D]===nt[F+1]){F+=2,D++;do;while(nt[++F]===nt[++D]&&nt[++F]===nt[++D]&&nt[++F]===nt[++D]&&nt[++F]===nt[++D]&&nt[++F]===nt[++D]&&nt[++F]===nt[++D]&&nt[++F]===nt[++D]&&nt[++F]===nt[++D]&&F<L);if(A=j-(L-F),F=L-j,Z<A){if(t.match_start=I,K<=(Z=A))break;B=nt[F+Z-1],M=nt[F+Z]}}while((I=rt[I&lt])>V&&--R!=0);return Z<=t.lookahead?Z:t.lookahead}function yt(t){var I,D,A,R,F,Z,K,V,nt,lt,rt=t.w_size;do{if(R=t.window_size-t.lookahead-t.strstart,t.strstart>=rt+(rt-U)){for(f.arraySet(t.window,t.window,rt,rt,0),t.match_start-=rt,t.strstart-=rt,t.block_start-=rt,I=D=t.hash_size;A=t.head[--I],t.head[I]=rt<=A?A-rt:0,--D;);for(I=D=rt;A=t.prev[--I],t.prev[I]=rt<=A?A-rt:0,--D;);R+=rt}if(t.strm.avail_in===0)break;if(Z=t.strm,K=t.window,V=t.strstart+t.lookahead,nt=R,lt=void 0,lt=Z.avail_in,nt<lt&&(lt=nt),D=lt===0?0:(Z.avail_in-=lt,f.arraySet(K,Z.input,Z.next_in,lt,V),Z.state.wrap===1?Z.adler=r(Z.adler,K,lt,V):Z.state.wrap===2&&(Z.adler=l(Z.adler,K,lt,V)),Z.next_in+=lt,Z.total_in+=lt,lt),t.lookahead+=D,t.lookahead+t.insert>=S)for(F=t.strstart-t.insert,t.ins_h=t.window[F],t.ins_h=(t.ins_h<<t.hash_shift^t.window[F+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[F+S-1])&t.hash_mask,t.prev[F&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=F,F++,t.insert--,!(t.lookahead+t.insert<S)););}while(t.lookahead<U&&t.strm.avail_in!==0)}function mt(t,I){for(var D,A;;){if(t.lookahead<U){if(yt(t),t.lookahead<U&&I===h)return E;if(t.lookahead===0)break}if(D=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),D!==0&&t.strstart-D<=t.w_size-U&&(t.match_length=ot(t,D)),t.match_length>=S)if(A=g._tr_tally(t,t.strstart-t.match_start,t.match_length-S),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=S){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else A=g._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(A&&($(t,!1),t.strm.avail_out===0))return E}return t.insert=t.strstart<S-1?t.strstart:S-1,I===c?($(t,!0),t.strm.avail_out===0?Q:J):t.last_lit&&($(t,!1),t.strm.avail_out===0)?E:X}function dt(t,I){for(var D,A,R;;){if(t.lookahead<U){if(yt(t),t.lookahead<U&&I===h)return E;if(t.lookahead===0)break}if(D=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=S-1,D!==0&&t.prev_length<t.max_lazy_match&&t.strstart-D<=t.w_size-U&&(t.match_length=ot(t,D),t.match_length<=5&&(t.strategy===1||t.match_length===S&&4096<t.strstart-t.match_start)&&(t.match_length=S-1)),t.prev_length>=S&&t.match_length<=t.prev_length){for(R=t.strstart+t.lookahead-S,A=g._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-S),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=R&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=S-1,t.strstart++,A&&($(t,!1),t.strm.avail_out===0))return E}else if(t.match_available){if((A=g._tr_tally(t,0,t.window[t.strstart-1]))&&$(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return E}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(A=g._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<S-1?t.strstart:S-1,I===c?($(t,!0),t.strm.avail_out===0?Q:J):t.last_lit&&($(t,!1),t.strm.avail_out===0)?E:X}function pt(t,I,D,A,R){this.good_length=t,this.max_lazy=I,this.nice_length=D,this.max_chain=A,this.func=R}function _t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=n,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*x),this.dyn_dtree=new f.Buf16(2*(2*v+1)),this.bl_tree=new f.Buf16(2*(2*b+1)),ht(this.dyn_ltree),ht(this.dyn_dtree),ht(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(p+1),this.heap=new f.Buf16(2*u+1),ht(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*u+1),ht(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function bt(t){var I;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=_,(I=t.state).pending=0,I.pending_out=0,I.wrap<0&&(I.wrap=-I.wrap),I.status=I.wrap?P:W,t.adler=I.wrap===2?0:1,I.last_flush=h,g._tr_init(I),a):ct(t,w)}function O(t){var I=bt(t);return I===a&&function(D){D.window_size=2*D.w_size,ht(D.head),D.max_lazy_match=o[D.level].max_lazy,D.good_match=o[D.level].good_length,D.nice_match=o[D.level].nice_length,D.max_chain_length=o[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=S-1,D.match_available=0,D.ins_h=0}(t.state),I}function m(t,I,D,A,R,F){if(!t)return w;var Z=1;if(I===s&&(I=6),A<0?(Z=0,A=-A):15<A&&(Z=2,A-=16),R<1||e<R||D!==n||A<8||15<A||I<0||9<I||F<0||d<F)return ct(t,w);A===8&&(A=9);var K=new _t;return(t.state=K).strm=t,K.wrap=Z,K.gzhead=null,K.w_bits=A,K.w_size=1<<K.w_bits,K.w_mask=K.w_size-1,K.hash_bits=R+7,K.hash_size=1<<K.hash_bits,K.hash_mask=K.hash_size-1,K.hash_shift=~~((K.hash_bits+S-1)/S),K.window=new f.Buf8(2*K.w_size),K.head=new f.Buf16(K.hash_size),K.prev=new f.Buf16(K.w_size),K.lit_bufsize=1<<R+6,K.pending_buf_size=4*K.lit_bufsize,K.pending_buf=new f.Buf8(K.pending_buf_size),K.d_buf=1*K.lit_bufsize,K.l_buf=3*K.lit_bufsize,K.level=I,K.strategy=F,K.method=D,O(t)}o=[new pt(0,0,0,0,function(t,I){var D=65535;for(D>t.pending_buf_size-5&&(D=t.pending_buf_size-5);;){if(t.lookahead<=1){if(yt(t),t.lookahead===0&&I===h)return E;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var A=t.block_start+D;if((t.strstart===0||t.strstart>=A)&&(t.lookahead=t.strstart-A,t.strstart=A,$(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-U&&($(t,!1),t.strm.avail_out===0))return E}return t.insert=0,I===c?($(t,!0),t.strm.avail_out===0?Q:J):(t.strstart>t.block_start&&($(t,!1),t.strm.avail_out),E)}),new pt(4,4,8,4,mt),new pt(4,5,16,8,mt),new pt(4,6,32,32,mt),new pt(4,4,16,16,dt),new pt(8,16,32,32,dt),new pt(8,16,128,128,dt),new pt(8,32,128,256,dt),new pt(32,128,258,1024,dt),new pt(32,258,258,4096,dt)],y.deflateInit=function(t,I){return m(t,I,n,15,8,0)},y.deflateInit2=m,y.deflateReset=O,y.deflateResetKeep=bt,y.deflateSetHeader=function(t,I){return t&&t.state?t.state.wrap!==2?w:(t.state.gzhead=I,a):w},y.deflate=function(t,I){var D,A,R,F;if(!t||!t.state||5<I||I<0)return t?ct(t,w):w;if(A=t.state,!t.output||!t.input&&t.avail_in!==0||A.status===666&&I!==c)return ct(t,t.avail_out===0?-5:w);if(A.strm=t,D=A.last_flush,A.last_flush=I,A.status===P)if(A.wrap===2)t.adler=0,at(A,31),at(A,139),at(A,8),A.gzhead?(at(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),at(A,255&A.gzhead.time),at(A,A.gzhead.time>>8&255),at(A,A.gzhead.time>>16&255),at(A,A.gzhead.time>>24&255),at(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),at(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(at(A,255&A.gzhead.extra.length),at(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(t.adler=l(t.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(at(A,0),at(A,0),at(A,0),at(A,0),at(A,0),at(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),at(A,3),A.status=W);else{var Z=n+(A.w_bits-8<<4)<<8;Z|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(Z|=32),Z+=31-Z%31,A.status=W,st(A,Z),A.strstart!==0&&(st(A,t.adler>>>16),st(A,65535&t.adler)),t.adler=1}if(A.status===69)if(A.gzhead.extra){for(R=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>R&&(t.adler=l(t.adler,A.pending_buf,A.pending-R,R)),G(t),R=A.pending,A.pending!==A.pending_buf_size));)at(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>R&&(t.adler=l(t.adler,A.pending_buf,A.pending-R,R)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){R=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>R&&(t.adler=l(t.adler,A.pending_buf,A.pending-R,R)),G(t),R=A.pending,A.pending===A.pending_buf_size)){F=1;break}F=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,at(A,F)}while(F!==0);A.gzhead.hcrc&&A.pending>R&&(t.adler=l(t.adler,A.pending_buf,A.pending-R,R)),F===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){R=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>R&&(t.adler=l(t.adler,A.pending_buf,A.pending-R,R)),G(t),R=A.pending,A.pending===A.pending_buf_size)){F=1;break}F=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,at(A,F)}while(F!==0);A.gzhead.hcrc&&A.pending>R&&(t.adler=l(t.adler,A.pending_buf,A.pending-R,R)),F===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&G(t),A.pending+2<=A.pending_buf_size&&(at(A,255&t.adler),at(A,t.adler>>8&255),t.adler=0,A.status=W)):A.status=W),A.pending!==0){if(G(t),t.avail_out===0)return A.last_flush=-1,a}else if(t.avail_in===0&&et(I)<=et(D)&&I!==c)return ct(t,-5);if(A.status===666&&t.avail_in!==0)return ct(t,-5);if(t.avail_in!==0||A.lookahead!==0||I!==h&&A.status!==666){var K=A.strategy===2?function(V,nt){for(var lt;;){if(V.lookahead===0&&(yt(V),V.lookahead===0)){if(nt===h)return E;break}if(V.match_length=0,lt=g._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++,lt&&($(V,!1),V.strm.avail_out===0))return E}return V.insert=0,nt===c?($(V,!0),V.strm.avail_out===0?Q:J):V.last_lit&&($(V,!1),V.strm.avail_out===0)?E:X}(A,I):A.strategy===3?function(V,nt){for(var lt,rt,L,B,M=V.window;;){if(V.lookahead<=j){if(yt(V),V.lookahead<=j&&nt===h)return E;if(V.lookahead===0)break}if(V.match_length=0,V.lookahead>=S&&0<V.strstart&&(rt=M[L=V.strstart-1])===M[++L]&&rt===M[++L]&&rt===M[++L]){B=V.strstart+j;do;while(rt===M[++L]&&rt===M[++L]&&rt===M[++L]&&rt===M[++L]&&rt===M[++L]&&rt===M[++L]&&rt===M[++L]&&rt===M[++L]&&L<B);V.match_length=j-(B-L),V.match_length>V.lookahead&&(V.match_length=V.lookahead)}if(V.match_length>=S?(lt=g._tr_tally(V,1,V.match_length-S),V.lookahead-=V.match_length,V.strstart+=V.match_length,V.match_length=0):(lt=g._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++),lt&&($(V,!1),V.strm.avail_out===0))return E}return V.insert=0,nt===c?($(V,!0),V.strm.avail_out===0?Q:J):V.last_lit&&($(V,!1),V.strm.avail_out===0)?E:X}(A,I):o[A.level].func(A,I);if(K!==Q&&K!==J||(A.status=666),K===E||K===Q)return t.avail_out===0&&(A.last_flush=-1),a;if(K===X&&(I===1?g._tr_align(A):I!==5&&(g._tr_stored_block(A,0,0,!1),I===3&&(ht(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),G(t),t.avail_out===0))return A.last_flush=-1,a}return I!==c?a:A.wrap<=0?1:(A.wrap===2?(at(A,255&t.adler),at(A,t.adler>>8&255),at(A,t.adler>>16&255),at(A,t.adler>>24&255),at(A,255&t.total_in),at(A,t.total_in>>8&255),at(A,t.total_in>>16&255),at(A,t.total_in>>24&255)):(st(A,t.adler>>>16),st(A,65535&t.adler)),G(t),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?a:1)},y.deflateEnd=function(t){var I;return t&&t.state?(I=t.state.status)!==P&&I!==69&&I!==73&&I!==91&&I!==103&&I!==W&&I!==666?ct(t,w):(t.state=null,I===W?ct(t,-3):a):w},y.deflateSetDictionary=function(t,I){var D,A,R,F,Z,K,V,nt,lt=I.length;if(!t||!t.state||(F=(D=t.state).wrap)===2||F===1&&D.status!==P||D.lookahead)return w;for(F===1&&(t.adler=r(t.adler,I,lt,0)),D.wrap=0,lt>=D.w_size&&(F===0&&(ht(D.head),D.strstart=0,D.block_start=0,D.insert=0),nt=new f.Buf8(D.w_size),f.arraySet(nt,I,lt-D.w_size,D.w_size,0),I=nt,lt=D.w_size),Z=t.avail_in,K=t.next_in,V=t.input,t.avail_in=lt,t.next_in=0,t.input=I,yt(D);D.lookahead>=S;){for(A=D.strstart,R=D.lookahead-(S-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[A+S-1])&D.hash_mask,D.prev[A&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=A,A++,--R;);D.strstart=A,D.lookahead=S-1,yt(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=S-1,D.match_available=0,t.next_in=K,t.input=V,t.avail_in=Z,D.wrap=F,a},y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(N,k,y){k.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(N,k,y){k.exports=function(o,f){var g,r,l,i,h,c,a,w,s,d,_,n,e,u,v,b,x,p,S,j,U,P,W,E,X;g=o.state,r=o.next_in,E=o.input,l=r+(o.avail_in-5),i=o.next_out,X=o.output,h=i-(f-o.avail_out),c=i+(o.avail_out-257),a=g.dmax,w=g.wsize,s=g.whave,d=g.wnext,_=g.window,n=g.hold,e=g.bits,u=g.lencode,v=g.distcode,b=(1<<g.lenbits)-1,x=(1<<g.distbits)-1;t:do{e<15&&(n+=E[r++]<<e,e+=8,n+=E[r++]<<e,e+=8),p=u[n&b];e:for(;;){if(n>>>=S=p>>>24,e-=S,(S=p>>>16&255)===0)X[i++]=65535&p;else{if(!(16&S)){if(!(64&S)){p=u[(65535&p)+(n&(1<<S)-1)];continue e}if(32&S){g.mode=12;break t}o.msg="invalid literal/length code",g.mode=30;break t}j=65535&p,(S&=15)&&(e<S&&(n+=E[r++]<<e,e+=8),j+=n&(1<<S)-1,n>>>=S,e-=S),e<15&&(n+=E[r++]<<e,e+=8,n+=E[r++]<<e,e+=8),p=v[n&x];i:for(;;){if(n>>>=S=p>>>24,e-=S,!(16&(S=p>>>16&255))){if(!(64&S)){p=v[(65535&p)+(n&(1<<S)-1)];continue i}o.msg="invalid distance code",g.mode=30;break t}if(U=65535&p,e<(S&=15)&&(n+=E[r++]<<e,(e+=8)<S&&(n+=E[r++]<<e,e+=8)),a<(U+=n&(1<<S)-1)){o.msg="invalid distance too far back",g.mode=30;break t}if(n>>>=S,e-=S,(S=i-h)<U){if(s<(S=U-S)&&g.sane){o.msg="invalid distance too far back",g.mode=30;break t}if(W=_,(P=0)===d){if(P+=w-S,S<j){for(j-=S;X[i++]=_[P++],--S;);P=i-U,W=X}}else if(d<S){if(P+=w+d-S,(S-=d)<j){for(j-=S;X[i++]=_[P++],--S;);if(P=0,d<j){for(j-=S=d;X[i++]=_[P++],--S;);P=i-U,W=X}}}else if(P+=d-S,S<j){for(j-=S;X[i++]=_[P++],--S;);P=i-U,W=X}for(;2<j;)X[i++]=W[P++],X[i++]=W[P++],X[i++]=W[P++],j-=3;j&&(X[i++]=W[P++],1<j&&(X[i++]=W[P++]))}else{for(P=i-U;X[i++]=X[P++],X[i++]=X[P++],X[i++]=X[P++],2<(j-=3););j&&(X[i++]=X[P++],1<j&&(X[i++]=X[P++]))}break}}break}}while(r<l&&i<c);r-=j=e>>3,n&=(1<<(e-=j<<3))-1,o.next_in=r,o.next_out=i,o.avail_in=r<l?l-r+5:5-(r-l),o.avail_out=i<c?c-i+257:257-(i-c),g.hold=n,g.bits=e}},{}],49:[function(N,k,y){var o=N("../utils/common"),f=N("./adler32"),g=N("./crc32"),r=N("./inffast"),l=N("./inftrees"),i=1,h=2,c=0,a=-2,w=1,s=852,d=592;function _(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function e(P){var W;return P&&P.state?(W=P.state,P.total_in=P.total_out=W.total=0,P.msg="",W.wrap&&(P.adler=1&W.wrap),W.mode=w,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new o.Buf32(s),W.distcode=W.distdyn=new o.Buf32(d),W.sane=1,W.back=-1,c):a}function u(P){var W;return P&&P.state?((W=P.state).wsize=0,W.whave=0,W.wnext=0,e(P)):a}function v(P,W){var E,X;return P&&P.state?(X=P.state,W<0?(E=0,W=-W):(E=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?a:(X.window!==null&&X.wbits!==W&&(X.window=null),X.wrap=E,X.wbits=W,u(P))):a}function b(P,W){var E,X;return P?(X=new n,(P.state=X).window=null,(E=v(P,W))!==c&&(P.state=null),E):a}var x,p,S=!0;function j(P){if(S){var W;for(x=new o.Buf32(512),p=new o.Buf32(32),W=0;W<144;)P.lens[W++]=8;for(;W<256;)P.lens[W++]=9;for(;W<280;)P.lens[W++]=7;for(;W<288;)P.lens[W++]=8;for(l(i,P.lens,0,288,x,0,P.work,{bits:9}),W=0;W<32;)P.lens[W++]=5;l(h,P.lens,0,32,p,0,P.work,{bits:5}),S=!1}P.lencode=x,P.lenbits=9,P.distcode=p,P.distbits=5}function U(P,W,E,X){var Q,J=P.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new o.Buf8(J.wsize)),X>=J.wsize?(o.arraySet(J.window,W,E-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):(X<(Q=J.wsize-J.wnext)&&(Q=X),o.arraySet(J.window,W,E-X,Q,J.wnext),(X-=Q)?(o.arraySet(J.window,W,E-X,X,0),J.wnext=X,J.whave=J.wsize):(J.wnext+=Q,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=Q))),0}y.inflateReset=u,y.inflateReset2=v,y.inflateResetKeep=e,y.inflateInit=function(P){return b(P,15)},y.inflateInit2=b,y.inflate=function(P,W){var E,X,Q,J,ct,et,ht,G,$,at,st,ot,yt,mt,dt,pt,_t,bt,O,m,t,I,D,A,R=0,F=new o.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return a;(E=P.state).mode===12&&(E.mode=13),ct=P.next_out,Q=P.output,ht=P.avail_out,J=P.next_in,X=P.input,et=P.avail_in,G=E.hold,$=E.bits,at=et,st=ht,I=c;t:for(;;)switch(E.mode){case w:if(E.wrap===0){E.mode=13;break}for(;$<16;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}if(2&E.wrap&&G===35615){F[E.check=0]=255&G,F[1]=G>>>8&255,E.check=g(E.check,F,2,0),$=G=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&G)<<8)+(G>>8))%31){P.msg="incorrect header check",E.mode=30;break}if((15&G)!=8){P.msg="unknown compression method",E.mode=30;break}if($-=4,t=8+(15&(G>>>=4)),E.wbits===0)E.wbits=t;else if(t>E.wbits){P.msg="invalid window size",E.mode=30;break}E.dmax=1<<t,P.adler=E.check=1,E.mode=512&G?10:12,$=G=0;break;case 2:for(;$<16;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}if(E.flags=G,(255&E.flags)!=8){P.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){P.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=G>>8&1),512&E.flags&&(F[0]=255&G,F[1]=G>>>8&255,E.check=g(E.check,F,2,0)),$=G=0,E.mode=3;case 3:for(;$<32;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}E.head&&(E.head.time=G),512&E.flags&&(F[0]=255&G,F[1]=G>>>8&255,F[2]=G>>>16&255,F[3]=G>>>24&255,E.check=g(E.check,F,4,0)),$=G=0,E.mode=4;case 4:for(;$<16;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}E.head&&(E.head.xflags=255&G,E.head.os=G>>8),512&E.flags&&(F[0]=255&G,F[1]=G>>>8&255,E.check=g(E.check,F,2,0)),$=G=0,E.mode=5;case 5:if(1024&E.flags){for(;$<16;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}E.length=G,E.head&&(E.head.extra_len=G),512&E.flags&&(F[0]=255&G,F[1]=G>>>8&255,E.check=g(E.check,F,2,0)),$=G=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(et<(ot=E.length)&&(ot=et),ot&&(E.head&&(t=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),o.arraySet(E.head.extra,X,J,ot,t)),512&E.flags&&(E.check=g(E.check,X,ot,J)),et-=ot,J+=ot,E.length-=ot),E.length))break t;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(et===0)break t;for(ot=0;t=X[J+ot++],E.head&&t&&E.length<65536&&(E.head.name+=String.fromCharCode(t)),t&&ot<et;);if(512&E.flags&&(E.check=g(E.check,X,ot,J)),et-=ot,J+=ot,t)break t}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(et===0)break t;for(ot=0;t=X[J+ot++],E.head&&t&&E.length<65536&&(E.head.comment+=String.fromCharCode(t)),t&&ot<et;);if(512&E.flags&&(E.check=g(E.check,X,ot,J)),et-=ot,J+=ot,t)break t}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;$<16;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}if(G!==(65535&E.check)){P.msg="header crc mismatch",E.mode=30;break}$=G=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),P.adler=E.check=0,E.mode=12;break;case 10:for(;$<32;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}P.adler=E.check=_(G),$=G=0,E.mode=11;case 11:if(E.havedict===0)return P.next_out=ct,P.avail_out=ht,P.next_in=J,P.avail_in=et,E.hold=G,E.bits=$,2;P.adler=E.check=1,E.mode=12;case 12:if(W===5||W===6)break t;case 13:if(E.last){G>>>=7&$,$-=7&$,E.mode=27;break}for(;$<3;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}switch(E.last=1&G,$-=1,3&(G>>>=1)){case 0:E.mode=14;break;case 1:if(j(E),E.mode=20,W!==6)break;G>>>=2,$-=2;break t;case 2:E.mode=17;break;case 3:P.msg="invalid block type",E.mode=30}G>>>=2,$-=2;break;case 14:for(G>>>=7&$,$-=7&$;$<32;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}if((65535&G)!=(G>>>16^65535)){P.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&G,$=G=0,E.mode=15,W===6)break t;case 15:E.mode=16;case 16:if(ot=E.length){if(et<ot&&(ot=et),ht<ot&&(ot=ht),ot===0)break t;o.arraySet(Q,X,J,ot,ct),et-=ot,J+=ot,ht-=ot,ct+=ot,E.length-=ot;break}E.mode=12;break;case 17:for(;$<14;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}if(E.nlen=257+(31&G),G>>>=5,$-=5,E.ndist=1+(31&G),G>>>=5,$-=5,E.ncode=4+(15&G),G>>>=4,$-=4,286<E.nlen||30<E.ndist){P.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;$<3;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}E.lens[Z[E.have++]]=7&G,G>>>=3,$-=3}for(;E.have<19;)E.lens[Z[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,D={bits:E.lenbits},I=l(0,E.lens,0,19,E.lencode,0,E.work,D),E.lenbits=D.bits,I){P.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;pt=(R=E.lencode[G&(1<<E.lenbits)-1])>>>16&255,_t=65535&R,!((dt=R>>>24)<=$);){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}if(_t<16)G>>>=dt,$-=dt,E.lens[E.have++]=_t;else{if(_t===16){for(A=dt+2;$<A;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}if(G>>>=dt,$-=dt,E.have===0){P.msg="invalid bit length repeat",E.mode=30;break}t=E.lens[E.have-1],ot=3+(3&G),G>>>=2,$-=2}else if(_t===17){for(A=dt+3;$<A;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}$-=dt,t=0,ot=3+(7&(G>>>=dt)),G>>>=3,$-=3}else{for(A=dt+7;$<A;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}$-=dt,t=0,ot=11+(127&(G>>>=dt)),G>>>=7,$-=7}if(E.have+ot>E.nlen+E.ndist){P.msg="invalid bit length repeat",E.mode=30;break}for(;ot--;)E.lens[E.have++]=t}}if(E.mode===30)break;if(E.lens[256]===0){P.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,D={bits:E.lenbits},I=l(i,E.lens,0,E.nlen,E.lencode,0,E.work,D),E.lenbits=D.bits,I){P.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,D={bits:E.distbits},I=l(h,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,D),E.distbits=D.bits,I){P.msg="invalid distances set",E.mode=30;break}if(E.mode=20,W===6)break t;case 20:E.mode=21;case 21:if(6<=et&&258<=ht){P.next_out=ct,P.avail_out=ht,P.next_in=J,P.avail_in=et,E.hold=G,E.bits=$,r(P,st),ct=P.next_out,Q=P.output,ht=P.avail_out,J=P.next_in,X=P.input,et=P.avail_in,G=E.hold,$=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;pt=(R=E.lencode[G&(1<<E.lenbits)-1])>>>16&255,_t=65535&R,!((dt=R>>>24)<=$);){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}if(pt&&!(240&pt)){for(bt=dt,O=pt,m=_t;pt=(R=E.lencode[m+((G&(1<<bt+O)-1)>>bt)])>>>16&255,_t=65535&R,!(bt+(dt=R>>>24)<=$);){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}G>>>=bt,$-=bt,E.back+=bt}if(G>>>=dt,$-=dt,E.back+=dt,E.length=_t,pt===0){E.mode=26;break}if(32&pt){E.back=-1,E.mode=12;break}if(64&pt){P.msg="invalid literal/length code",E.mode=30;break}E.extra=15&pt,E.mode=22;case 22:if(E.extra){for(A=E.extra;$<A;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}E.length+=G&(1<<E.extra)-1,G>>>=E.extra,$-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;pt=(R=E.distcode[G&(1<<E.distbits)-1])>>>16&255,_t=65535&R,!((dt=R>>>24)<=$);){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}if(!(240&pt)){for(bt=dt,O=pt,m=_t;pt=(R=E.distcode[m+((G&(1<<bt+O)-1)>>bt)])>>>16&255,_t=65535&R,!(bt+(dt=R>>>24)<=$);){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}G>>>=bt,$-=bt,E.back+=bt}if(G>>>=dt,$-=dt,E.back+=dt,64&pt){P.msg="invalid distance code",E.mode=30;break}E.offset=_t,E.extra=15&pt,E.mode=24;case 24:if(E.extra){for(A=E.extra;$<A;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}E.offset+=G&(1<<E.extra)-1,G>>>=E.extra,$-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){P.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(ht===0)break t;if(ot=st-ht,E.offset>ot){if((ot=E.offset-ot)>E.whave&&E.sane){P.msg="invalid distance too far back",E.mode=30;break}yt=ot>E.wnext?(ot-=E.wnext,E.wsize-ot):E.wnext-ot,ot>E.length&&(ot=E.length),mt=E.window}else mt=Q,yt=ct-E.offset,ot=E.length;for(ht<ot&&(ot=ht),ht-=ot,E.length-=ot;Q[ct++]=mt[yt++],--ot;);E.length===0&&(E.mode=21);break;case 26:if(ht===0)break t;Q[ct++]=E.length,ht--,E.mode=21;break;case 27:if(E.wrap){for(;$<32;){if(et===0)break t;et--,G|=X[J++]<<$,$+=8}if(st-=ht,P.total_out+=st,E.total+=st,st&&(P.adler=E.check=E.flags?g(E.check,Q,st,ct-st):f(E.check,Q,st,ct-st)),st=ht,(E.flags?G:_(G))!==E.check){P.msg="incorrect data check",E.mode=30;break}$=G=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;$<32;){if(et===0)break t;et--,G+=X[J++]<<$,$+=8}if(G!==(4294967295&E.total)){P.msg="incorrect length check",E.mode=30;break}$=G=0}E.mode=29;case 29:I=1;break t;case 30:I=-3;break t;case 31:return-4;case 32:default:return a}return P.next_out=ct,P.avail_out=ht,P.next_in=J,P.avail_in=et,E.hold=G,E.bits=$,(E.wsize||st!==P.avail_out&&E.mode<30&&(E.mode<27||W!==4))&&U(P,P.output,P.next_out,st-P.avail_out)?(E.mode=31,-4):(at-=P.avail_in,st-=P.avail_out,P.total_in+=at,P.total_out+=st,E.total+=st,E.wrap&&st&&(P.adler=E.check=E.flags?g(E.check,Q,st,P.next_out-st):f(E.check,Q,st,P.next_out-st)),P.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(at==0&&st===0||W===4)&&I===c&&(I=-5),I)},y.inflateEnd=function(P){if(!P||!P.state)return a;var W=P.state;return W.window&&(W.window=null),P.state=null,c},y.inflateGetHeader=function(P,W){var E;return P&&P.state&&2&(E=P.state).wrap?((E.head=W).done=!1,c):a},y.inflateSetDictionary=function(P,W){var E,X=W.length;return P&&P.state?(E=P.state).wrap!==0&&E.mode!==11?a:E.mode===11&&f(1,W,X,0)!==E.check?-3:U(P,W,X,X)?(E.mode=31,-4):(E.havedict=1,c):a},y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(N,k,y){var o=N("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];k.exports=function(i,h,c,a,w,s,d,_){var n,e,u,v,b,x,p,S,j,U=_.bits,P=0,W=0,E=0,X=0,Q=0,J=0,ct=0,et=0,ht=0,G=0,$=null,at=0,st=new o.Buf16(16),ot=new o.Buf16(16),yt=null,mt=0;for(P=0;P<=15;P++)st[P]=0;for(W=0;W<a;W++)st[h[c+W]]++;for(Q=U,X=15;1<=X&&st[X]===0;X--);if(X<Q&&(Q=X),X===0)return w[s++]=20971520,w[s++]=20971520,_.bits=1,0;for(E=1;E<X&&st[E]===0;E++);for(Q<E&&(Q=E),P=et=1;P<=15;P++)if(et<<=1,(et-=st[P])<0)return-1;if(0<et&&(i===0||X!==1))return-1;for(ot[1]=0,P=1;P<15;P++)ot[P+1]=ot[P]+st[P];for(W=0;W<a;W++)h[c+W]!==0&&(d[ot[h[c+W]]++]=W);if(x=i===0?($=yt=d,19):i===1?($=f,at-=257,yt=g,mt-=257,256):($=r,yt=l,-1),P=E,b=s,ct=W=G=0,u=-1,v=(ht=1<<(J=Q))-1,i===1&&852<ht||i===2&&592<ht)return 1;for(;;){for(p=P-ct,j=d[W]<x?(S=0,d[W]):d[W]>x?(S=yt[mt+d[W]],$[at+d[W]]):(S=96,0),n=1<<P-ct,E=e=1<<J;w[b+(G>>ct)+(e-=n)]=p<<24|S<<16|j|0,e!==0;);for(n=1<<P-1;G&n;)n>>=1;if(n!==0?(G&=n-1,G+=n):G=0,W++,--st[P]==0){if(P===X)break;P=h[c+d[W]]}if(Q<P&&(G&v)!==u){for(ct===0&&(ct=Q),b+=E,et=1<<(J=P-ct);J+ct<X&&!((et-=st[J+ct])<=0);)J++,et<<=1;if(ht+=1<<J,i===1&&852<ht||i===2&&592<ht)return 1;w[u=G&v]=Q<<24|J<<16|b-s|0}}return G!==0&&(w[b+G]=P-ct<<24|64<<16|0),_.bits=Q,0}},{"../utils/common":41}],51:[function(N,k,y){k.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(N,k,y){var o=N("../utils/common"),f=0,g=1;function r(R){for(var F=R.length;0<=--F;)R[F]=0}var l=0,i=29,h=256,c=h+1+i,a=30,w=19,s=2*c+1,d=15,_=16,n=7,e=256,u=16,v=17,b=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],p=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(c+2));r(U);var P=new Array(2*a);r(P);var W=new Array(512);r(W);var E=new Array(256);r(E);var X=new Array(i);r(X);var Q,J,ct,et=new Array(a);function ht(R,F,Z,K,V){this.static_tree=R,this.extra_bits=F,this.extra_base=Z,this.elems=K,this.max_length=V,this.has_stree=R&&R.length}function G(R,F){this.dyn_tree=R,this.max_code=0,this.stat_desc=F}function $(R){return R<256?W[R]:W[256+(R>>>7)]}function at(R,F){R.pending_buf[R.pending++]=255&F,R.pending_buf[R.pending++]=F>>>8&255}function st(R,F,Z){R.bi_valid>_-Z?(R.bi_buf|=F<<R.bi_valid&65535,at(R,R.bi_buf),R.bi_buf=F>>_-R.bi_valid,R.bi_valid+=Z-_):(R.bi_buf|=F<<R.bi_valid&65535,R.bi_valid+=Z)}function ot(R,F,Z){st(R,Z[2*F],Z[2*F+1])}function yt(R,F){for(var Z=0;Z|=1&R,R>>>=1,Z<<=1,0<--F;);return Z>>>1}function mt(R,F,Z){var K,V,nt=new Array(d+1),lt=0;for(K=1;K<=d;K++)nt[K]=lt=lt+Z[K-1]<<1;for(V=0;V<=F;V++){var rt=R[2*V+1];rt!==0&&(R[2*V]=yt(nt[rt]++,rt))}}function dt(R){var F;for(F=0;F<c;F++)R.dyn_ltree[2*F]=0;for(F=0;F<a;F++)R.dyn_dtree[2*F]=0;for(F=0;F<w;F++)R.bl_tree[2*F]=0;R.dyn_ltree[2*e]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function pt(R){8<R.bi_valid?at(R,R.bi_buf):0<R.bi_valid&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function _t(R,F,Z,K){var V=2*F,nt=2*Z;return R[V]<R[nt]||R[V]===R[nt]&&K[F]<=K[Z]}function bt(R,F,Z){for(var K=R.heap[Z],V=Z<<1;V<=R.heap_len&&(V<R.heap_len&&_t(F,R.heap[V+1],R.heap[V],R.depth)&&V++,!_t(F,K,R.heap[V],R.depth));)R.heap[Z]=R.heap[V],Z=V,V<<=1;R.heap[Z]=K}function O(R,F,Z){var K,V,nt,lt,rt=0;if(R.last_lit!==0)for(;K=R.pending_buf[R.d_buf+2*rt]<<8|R.pending_buf[R.d_buf+2*rt+1],V=R.pending_buf[R.l_buf+rt],rt++,K===0?ot(R,V,F):(ot(R,(nt=E[V])+h+1,F),(lt=x[nt])!==0&&st(R,V-=X[nt],lt),ot(R,nt=$(--K),Z),(lt=p[nt])!==0&&st(R,K-=et[nt],lt)),rt<R.last_lit;);ot(R,e,F)}function m(R,F){var Z,K,V,nt=F.dyn_tree,lt=F.stat_desc.static_tree,rt=F.stat_desc.has_stree,L=F.stat_desc.elems,B=-1;for(R.heap_len=0,R.heap_max=s,Z=0;Z<L;Z++)nt[2*Z]!==0?(R.heap[++R.heap_len]=B=Z,R.depth[Z]=0):nt[2*Z+1]=0;for(;R.heap_len<2;)nt[2*(V=R.heap[++R.heap_len]=B<2?++B:0)]=1,R.depth[V]=0,R.opt_len--,rt&&(R.static_len-=lt[2*V+1]);for(F.max_code=B,Z=R.heap_len>>1;1<=Z;Z--)bt(R,nt,Z);for(V=L;Z=R.heap[1],R.heap[1]=R.heap[R.heap_len--],bt(R,nt,1),K=R.heap[1],R.heap[--R.heap_max]=Z,R.heap[--R.heap_max]=K,nt[2*V]=nt[2*Z]+nt[2*K],R.depth[V]=(R.depth[Z]>=R.depth[K]?R.depth[Z]:R.depth[K])+1,nt[2*Z+1]=nt[2*K+1]=V,R.heap[1]=V++,bt(R,nt,1),2<=R.heap_len;);R.heap[--R.heap_max]=R.heap[1],function(M,C){var T,z,q,H,Y,tt,it=C.dyn_tree,ut=C.max_code,ft=C.stat_desc.static_tree,vt=C.stat_desc.has_stree,gt=C.stat_desc.extra_bits,wt=C.stat_desc.extra_base,Et=C.stat_desc.max_length,St=0;for(H=0;H<=d;H++)M.bl_count[H]=0;for(it[2*M.heap[M.heap_max]+1]=0,T=M.heap_max+1;T<s;T++)Et<(H=it[2*it[2*(z=M.heap[T])+1]+1]+1)&&(H=Et,St++),it[2*z+1]=H,ut<z||(M.bl_count[H]++,Y=0,wt<=z&&(Y=gt[z-wt]),tt=it[2*z],M.opt_len+=tt*(H+Y),vt&&(M.static_len+=tt*(ft[2*z+1]+Y)));if(St!==0){do{for(H=Et-1;M.bl_count[H]===0;)H--;M.bl_count[H]--,M.bl_count[H+1]+=2,M.bl_count[Et]--,St-=2}while(0<St);for(H=Et;H!==0;H--)for(z=M.bl_count[H];z!==0;)ut<(q=M.heap[--T])||(it[2*q+1]!==H&&(M.opt_len+=(H-it[2*q+1])*it[2*q],it[2*q+1]=H),z--)}}(R,F),mt(nt,B,R.bl_count)}function t(R,F,Z){var K,V,nt=-1,lt=F[1],rt=0,L=7,B=4;for(lt===0&&(L=138,B=3),F[2*(Z+1)+1]=65535,K=0;K<=Z;K++)V=lt,lt=F[2*(K+1)+1],++rt<L&&V===lt||(rt<B?R.bl_tree[2*V]+=rt:V!==0?(V!==nt&&R.bl_tree[2*V]++,R.bl_tree[2*u]++):rt<=10?R.bl_tree[2*v]++:R.bl_tree[2*b]++,nt=V,B=(rt=0)===lt?(L=138,3):V===lt?(L=6,3):(L=7,4))}function I(R,F,Z){var K,V,nt=-1,lt=F[1],rt=0,L=7,B=4;for(lt===0&&(L=138,B=3),K=0;K<=Z;K++)if(V=lt,lt=F[2*(K+1)+1],!(++rt<L&&V===lt)){if(rt<B)for(;ot(R,V,R.bl_tree),--rt!=0;);else V!==0?(V!==nt&&(ot(R,V,R.bl_tree),rt--),ot(R,u,R.bl_tree),st(R,rt-3,2)):rt<=10?(ot(R,v,R.bl_tree),st(R,rt-3,3)):(ot(R,b,R.bl_tree),st(R,rt-11,7));nt=V,B=(rt=0)===lt?(L=138,3):V===lt?(L=6,3):(L=7,4)}}r(et);var D=!1;function A(R,F,Z,K){st(R,(l<<1)+(K?1:0),3),function(V,nt,lt,rt){pt(V),rt&&(at(V,lt),at(V,~lt)),o.arraySet(V.pending_buf,V.window,nt,lt,V.pending),V.pending+=lt}(R,F,Z,!0)}y._tr_init=function(R){D||(function(){var F,Z,K,V,nt,lt=new Array(d+1);for(V=K=0;V<i-1;V++)for(X[V]=K,F=0;F<1<<x[V];F++)E[K++]=V;for(E[K-1]=V,V=nt=0;V<16;V++)for(et[V]=nt,F=0;F<1<<p[V];F++)W[nt++]=V;for(nt>>=7;V<a;V++)for(et[V]=nt<<7,F=0;F<1<<p[V]-7;F++)W[256+nt++]=V;for(Z=0;Z<=d;Z++)lt[Z]=0;for(F=0;F<=143;)U[2*F+1]=8,F++,lt[8]++;for(;F<=255;)U[2*F+1]=9,F++,lt[9]++;for(;F<=279;)U[2*F+1]=7,F++,lt[7]++;for(;F<=287;)U[2*F+1]=8,F++,lt[8]++;for(mt(U,c+1,lt),F=0;F<a;F++)P[2*F+1]=5,P[2*F]=yt(F,5);Q=new ht(U,x,h+1,c,d),J=new ht(P,p,0,a,d),ct=new ht(new Array(0),S,0,w,n)}(),D=!0),R.l_desc=new G(R.dyn_ltree,Q),R.d_desc=new G(R.dyn_dtree,J),R.bl_desc=new G(R.bl_tree,ct),R.bi_buf=0,R.bi_valid=0,dt(R)},y._tr_stored_block=A,y._tr_flush_block=function(R,F,Z,K){var V,nt,lt=0;0<R.level?(R.strm.data_type===2&&(R.strm.data_type=function(rt){var L,B=4093624447;for(L=0;L<=31;L++,B>>>=1)if(1&B&&rt.dyn_ltree[2*L]!==0)return f;if(rt.dyn_ltree[18]!==0||rt.dyn_ltree[20]!==0||rt.dyn_ltree[26]!==0)return g;for(L=32;L<h;L++)if(rt.dyn_ltree[2*L]!==0)return g;return f}(R)),m(R,R.l_desc),m(R,R.d_desc),lt=function(rt){var L;for(t(rt,rt.dyn_ltree,rt.l_desc.max_code),t(rt,rt.dyn_dtree,rt.d_desc.max_code),m(rt,rt.bl_desc),L=w-1;3<=L&&rt.bl_tree[2*j[L]+1]===0;L--);return rt.opt_len+=3*(L+1)+5+5+4,L}(R),V=R.opt_len+3+7>>>3,(nt=R.static_len+3+7>>>3)<=V&&(V=nt)):V=nt=Z+5,Z+4<=V&&F!==-1?A(R,F,Z,K):R.strategy===4||nt===V?(st(R,2+(K?1:0),3),O(R,U,P)):(st(R,4+(K?1:0),3),function(rt,L,B,M){var C;for(st(rt,L-257,5),st(rt,B-1,5),st(rt,M-4,4),C=0;C<M;C++)st(rt,rt.bl_tree[2*j[C]+1],3);I(rt,rt.dyn_ltree,L-1),I(rt,rt.dyn_dtree,B-1)}(R,R.l_desc.max_code+1,R.d_desc.max_code+1,lt+1),O(R,R.dyn_ltree,R.dyn_dtree)),dt(R),K&&pt(R)},y._tr_tally=function(R,F,Z){return R.pending_buf[R.d_buf+2*R.last_lit]=F>>>8&255,R.pending_buf[R.d_buf+2*R.last_lit+1]=255&F,R.pending_buf[R.l_buf+R.last_lit]=255&Z,R.last_lit++,F===0?R.dyn_ltree[2*Z]++:(R.matches++,F--,R.dyn_ltree[2*(E[Z]+h+1)]++,R.dyn_dtree[2*$(F)]++),R.last_lit===R.lit_bufsize-1},y._tr_align=function(R){st(R,2,3),ot(R,e,U),function(F){F.bi_valid===16?(at(F,F.bi_buf),F.bi_buf=0,F.bi_valid=0):8<=F.bi_valid&&(F.pending_buf[F.pending++]=255&F.bi_buf,F.bi_buf>>=8,F.bi_valid-=8)}(R)}},{"../utils/common":41}],53:[function(N,k,y){k.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(N,k,y){(function(o){(function(f,g){if(!f.setImmediate){var r,l,i,h,c=1,a={},w=!1,s=f.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(f);d=d&&d.setTimeout?d:f,r={}.toString.call(f.process)==="[object process]"?function(u){process.nextTick(function(){n(u)})}:function(){if(f.postMessage&&!f.importScripts){var u=!0,v=f.onmessage;return f.onmessage=function(){u=!1},f.postMessage("","*"),f.onmessage=v,u}}()?(h="setImmediate$"+Math.random()+"$",f.addEventListener?f.addEventListener("message",e,!1):f.attachEvent("onmessage",e),function(u){f.postMessage(h+u,"*")}):f.MessageChannel?((i=new MessageChannel).port1.onmessage=function(u){n(u.data)},function(u){i.port2.postMessage(u)}):s&&"onreadystatechange"in s.createElement("script")?(l=s.documentElement,function(u){var v=s.createElement("script");v.onreadystatechange=function(){n(u),v.onreadystatechange=null,l.removeChild(v),v=null},l.appendChild(v)}):function(u){setTimeout(n,0,u)},d.setImmediate=function(u){typeof u!="function"&&(u=new Function(""+u));for(var v=new Array(arguments.length-1),b=0;b<v.length;b++)v[b]=arguments[b+1];var x={callback:u,args:v};return a[c]=x,r(c),c++},d.clearImmediate=_}function _(u){delete a[u]}function n(u){if(w)setTimeout(n,0,u);else{var v=a[u];if(v){w=!0;try{(function(b){var x=b.callback,p=b.args;switch(p.length){case 0:x();break;case 1:x(p[0]);break;case 2:x(p[0],p[1]);break;case 3:x(p[0],p[1],p[2]);break;default:x.apply(g,p)}})(v)}finally{_(u),w=!1}}}}function e(u){u.source===f&&typeof u.data=="string"&&u.data.indexOf(h)===0&&n(+u.data.slice(h.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)});(function(N,k){typeof $t=="object"&&typeof Kt=="object"?Kt.exports=k(require("JSZip")):typeof define=="function"&&define.amd?define(["JSZip"],k):typeof $t=="object"?$t.ePub=k(require("JSZip")):N.ePub=k(N.JSZip)})(window,function(N){return function(k){var y={};function o(f){if(y[f])return y[f].exports;var g=y[f]={i:f,l:!1,exports:{}};return k[f].call(g.exports,g,g.exports,o),g.l=!0,g.exports}return o.m=k,o.c=y,o.d=function(f,g,r){o.o(f,g)||Object.defineProperty(f,g,{enumerable:!0,get:r})},o.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},o.t=function(f,g){if(1&g&&(f=o(f)),8&g||4&g&&typeof f=="object"&&f&&f.__esModule)return f;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:f}),2&g&&typeof f!="string")for(var l in f)o.d(r,l,function(i){return f[i]}.bind(null,l));return r},o.n=function(f){var g=f&&f.__esModule?function(){return f.default}:function(){return f};return o.d(g,"a",g),g},o.o=function(f,g){return Object.prototype.hasOwnProperty.call(f,g)},o.p="/dist/",o(o.s=30)}([function(k,y,o){o.r(y),o.d(y,"requestAnimationFrame",function(){return g}),o.d(y,"uuid",function(){return l}),o.d(y,"documentHeight",function(){return i}),o.d(y,"isElement",function(){return h}),o.d(y,"isNumber",function(){return c}),o.d(y,"isFloat",function(){return a}),o.d(y,"prefixed",function(){return w}),o.d(y,"defaults",function(){return s}),o.d(y,"extend",function(){return d}),o.d(y,"insert",function(){return _}),o.d(y,"locationOf",function(){return n}),o.d(y,"indexOfSorted",function(){return e}),o.d(y,"bounds",function(){return u}),o.d(y,"borders",function(){return v}),o.d(y,"nodeBounds",function(){return b}),o.d(y,"windowBounds",function(){return x}),o.d(y,"indexOfNode",function(){return p}),o.d(y,"indexOfTextNode",function(){return S}),o.d(y,"indexOfElementNode",function(){return j}),o.d(y,"isXml",function(){return U}),o.d(y,"createBlob",function(){return P}),o.d(y,"createBlobUrl",function(){return W}),o.d(y,"revokeBlobUrl",function(){return E}),o.d(y,"createBase64Url",function(){return X}),o.d(y,"type",function(){return Q}),o.d(y,"parse",function(){return J}),o.d(y,"qs",function(){return ct}),o.d(y,"qsa",function(){return et}),o.d(y,"qsp",function(){return ht}),o.d(y,"sprint",function(){return G}),o.d(y,"treeWalker",function(){return $}),o.d(y,"walk",function(){return at}),o.d(y,"blob2base64",function(){return st}),o.d(y,"defer",function(){return ot}),o.d(y,"querySelectorByType",function(){return yt}),o.d(y,"findChildren",function(){return mt}),o.d(y,"parents",function(){return dt}),o.d(y,"filterChildren",function(){return pt}),o.d(y,"getParentByTagName",function(){return _t}),o.d(y,"RangeObject",function(){return bt});var f=o(15);const g=typeof window<"u"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),r=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function l(){var O=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(m){var t=(O+16*Math.random())%16|0;return O=Math.floor(O/16),(m=="x"?t:7&t|8).toString(16)})}function i(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function h(O){return!(!O||O.nodeType!=1)}function c(O){return!isNaN(parseFloat(O))&&isFinite(O)}function a(O){let m=parseFloat(O);return c(O)!==!1&&(typeof O=="string"&&O.indexOf(".")>-1||Math.floor(m)!==m)}function w(O){var m=["-webkit-","-webkit-","-moz-","-o-","-ms-"],t=O.toLowerCase(),I=["Webkit","webkit","Moz","O","ms"].length;if(typeof document>"u"||document.body.style[t]!==void 0)return O;for(var D=0;D<I;D++)if(document.body.style[m[D]+t]!==void 0)return m[D]+t;return O}function s(O){for(var m=1,t=arguments.length;m<t;m++){var I=arguments[m];for(var D in I)O[D]===void 0&&(O[D]=I[D])}return O}function d(O){var m=[].slice.call(arguments,1);return m.forEach(function(t){t&&Object.getOwnPropertyNames(t).forEach(function(I){Object.defineProperty(O,I,Object.getOwnPropertyDescriptor(t,I))})}),O}function _(O,m,t){var I=n(O,m,t);return m.splice(I,0,O),I}function n(O,m,t,I,D){var A,R=I||0,F=D||m.length,Z=parseInt(R+(F-R)/2);return t||(t=function(K,V){return K>V?1:K<V?-1:K==V?0:void 0}),F-R<=0?Z:(A=t(m[Z],O),F-R==1?A>=0?Z:Z+1:A===0?Z:A===-1?n(O,m,t,Z,F):n(O,m,t,R,Z))}function e(O,m,t,I,D){var A,R=I||0,F=D||m.length,Z=parseInt(R+(F-R)/2);return t||(t=function(K,V){return K>V?1:K<V?-1:K==V?0:void 0}),F-R<=0?-1:(A=t(m[Z],O),F-R==1?A===0?Z:-1:A===0?Z:A===-1?e(O,m,t,Z,F):e(O,m,t,R,Z))}function u(O){var m=window.getComputedStyle(O),t=0,I=0;return["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach(function(D){t+=parseFloat(m[D])||0}),["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach(function(D){I+=parseFloat(m[D])||0}),{height:I,width:t}}function v(O){var m=window.getComputedStyle(O),t=0,I=0;return["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach(function(D){t+=parseFloat(m[D])||0}),["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach(function(D){I+=parseFloat(m[D])||0}),{height:I,width:t}}function b(O){let m,t=O.ownerDocument;if(O.nodeType==Node.TEXT_NODE){let I=t.createRange();I.selectNodeContents(O),m=I.getBoundingClientRect()}else m=O.getBoundingClientRect();return m}function x(){var O=window.innerWidth,m=window.innerHeight;return{top:0,left:0,right:O,bottom:m,width:O,height:m}}function p(O,m){for(var t,I=O.parentNode.childNodes,D=-1,A=0;A<I.length&&((t=I[A]).nodeType===m&&D++,t!=O);A++);return D}function S(O){return p(O,3)}function j(O){return p(O,1)}function U(O){return["xml","opf","ncx"].indexOf(O)>-1}function P(O,m){return new Blob([O],{type:m})}function W(O,m){var t=P(O,m);return r.createObjectURL(t)}function E(O){return r.revokeObjectURL(O)}function X(O,m){if(typeof O=="string")return"data:"+m+";base64,"+btoa(O)}function Q(O){return Object.prototype.toString.call(O).slice(8,-1)}function J(O,m,t){var I;return I=typeof DOMParser>"u"||t?f.DOMParser:DOMParser,O.charCodeAt(0)===65279&&(O=O.slice(1)),new I().parseFromString(O,m)}function ct(O,m){var t;if(!O)throw new Error("No Element Provided");return O.querySelector!==void 0?O.querySelector(m):(t=O.getElementsByTagName(m)).length?t[0]:void 0}function et(O,m){return O.querySelector!==void 0?O.querySelectorAll(m):O.getElementsByTagName(m)}function ht(O,m,t){var I,D;if(O.querySelector!==void 0){for(var A in m+="[",t)m+=A+"~='"+t[A]+"'";return m+="]",O.querySelector(m)}if(I=O.getElementsByTagName(m),D=Array.prototype.slice.call(I,0).filter(function(R){for(var F in t)if(R.getAttribute(F)===t[F])return!0;return!1}))return D[0]}function G(O,m){(O.ownerDocument||O).createTreeWalker!==void 0?$(O,m,NodeFilter.SHOW_TEXT):at(O,function(t){t&&t.nodeType===3&&m(t)})}function $(O,m,t){var I=document.createTreeWalker(O,t,null,!1);let D;for(;D=I.nextNode();)m(D)}function at(O,m){if(m(O))return!0;if(O=O.firstChild)do{if(at(O,m))return!0;O=O.nextSibling}while(O)}function st(O){return new Promise(function(m,t){var I=new FileReader;I.readAsDataURL(O),I.onloadend=function(){m(I.result)}})}function ot(){this.resolve=null,this.reject=null,this.id=l(),this.promise=new Promise((O,m)=>{this.resolve=O,this.reject=m}),Object.freeze(this)}function yt(O,m,t){var I;if(O.querySelector!==void 0&&(I=O.querySelector(`${m}[*|type="${t}"]`)),I&&I.length!==0)return I;I=et(O,m);for(var D=0;D<I.length;D++)if(I[D].getAttributeNS("http://www.idpf.org/2007/ops","type")===t||I[D].getAttribute("epub:type")===t)return I[D]}function mt(O){for(var m=[],t=O.childNodes,I=0;I<t.length;I++){let D=t[I];D.nodeType===1&&m.push(D)}return m}function dt(O){for(var m=[O];O;O=O.parentNode)m.unshift(O);return m}function pt(O,m,t){for(var I=[],D=O.childNodes,A=0;A<D.length;A++){let R=D[A];if(R.nodeType===1&&R.nodeName.toLowerCase()===m){if(t)return R;I.push(R)}}if(!t)return I}function _t(O,m){let t;if(O!==null&&m!=="")for(t=O.parentNode;t.nodeType===1;){if(t.tagName.toLowerCase()===m)return t;t=t.parentNode}}class bt{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(m,t){this.startContainer=m,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(m,t){this.endContainer=m,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(m){this.collapsed=!0,m?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(m){let t=m.parentNode,I=Array.prototype.indexOf.call(t.childNodes,m);this.setStart(t,I),this.setEnd(t,I+1)}selectNodeContents(m){m.childNodes[m.childNodes-1];let t=m.nodeType===3?m.textContent.length:parent.childNodes.length;this.setStart(m,0),this.setEnd(m,t)}_commonAncestorContainer(m,t){var I=dt(m||this.startContainer),D=dt(t||this.endContainer);if(I[0]==D[0]){for(var A=0;A<I.length;A++)if(I[A]!=D[A])return I[A-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}},function(k,y,o){o.d(y,"b",function(){return f}),o.d(y,"a",function(){return g}),o.d(y,"c",function(){return r});const f="0.3",g=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],r={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}}},function(k,y,o){var f=o(0);class g{constructor(l,i,h){var c;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof g))return new g(l,i,h);if(typeof i=="string"?this.base=this.parseComponent(i):typeof i=="object"&&i.steps&&(this.base=i),(c=this.checkType(l))==="string")return this.str=l,Object(f.extend)(this,this.parse(l));if(c==="range")return Object(f.extend)(this,this.fromRange(l,this.base,h));if(c==="node")return Object(f.extend)(this,this.fromNode(l,this.base,h));if(c==="EpubCFI"&&l.path)return l;if(l)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(l){return this.isCfiString(l)?"string":!l||typeof l!="object"||Object(f.type)(l)!=="Range"&&l.startContainer===void 0?l&&typeof l=="object"&&l.nodeType!==void 0?"node":!!(l&&typeof l=="object"&&l instanceof g)&&"EpubCFI":"range"}parse(l){var i,h,c,a={spinePos:-1,range:!1,base:{},path:{},start:null,end:null};return typeof l!="string"?{spinePos:-1}:(l.indexOf("epubcfi(")===0&&l[l.length-1]===")"&&(l=l.slice(8,l.length-1)),(i=this.getChapterComponent(l))?(a.base=this.parseComponent(i),h=this.getPathComponent(l),a.path=this.parseComponent(h),(c=this.getRange(l))&&(a.range=!0,a.start=this.parseComponent(c[0]),a.end=this.parseComponent(c[1])),a.spinePos=a.base.steps[1].index,a):{spinePos:-1})}parseComponent(l){var i,h={steps:[],terminal:{offset:null,assertion:null}},c=l.split(":"),a=c[0].split("/");return c.length>1&&(i=c[1],h.terminal=this.parseTerminal(i)),a[0]===""&&a.shift(),h.steps=a.map(function(w){return this.parseStep(w)}.bind(this)),h}parseStep(l){var i,h,c,a,w;if((a=l.match(/\[(.*)\]/))&&a[1]&&(w=a[1]),h=parseInt(l),!isNaN(h))return h%2==0?(i="element",c=h/2-1):(i="text",c=(h-1)/2),{type:i,index:c,id:w||null}}parseTerminal(l){var i,h,c=l.match(/\[(.*)\]/);return c&&c[1]?(i=parseInt(l.split("[")[0]),h=c[1]):i=parseInt(l),Object(f.isNumber)(i)||(i=null),{offset:i,assertion:h}}getChapterComponent(l){return l.split("!")[0]}getPathComponent(l){var i=l.split("!");if(i[1])return i[1].split(",")[0]}getRange(l){var i=l.split(",");return i.length===3&&[i[1],i[2]]}getCharecterOffsetComponent(l){return l.split(":")[1]||""}joinSteps(l){return l?l.map(function(i){var h="";return i.type==="element"&&(h+=2*(i.index+1)),i.type==="text"&&(h+=1+2*i.index),i.id&&(h+="["+i.id+"]"),h}).join("/"):""}segmentString(l){var i="/";return i+=this.joinSteps(l.steps),l.terminal&&l.terminal.offset!=null&&(i+=":"+l.terminal.offset),l.terminal&&l.terminal.assertion!=null&&(i+="["+l.terminal.assertion+"]"),i}toString(){var l="epubcfi(";return l+=this.segmentString(this.base),l+="!",l+=this.segmentString(this.path),this.range&&this.start&&(l+=",",l+=this.segmentString(this.start)),this.range&&this.end&&(l+=",",l+=this.segmentString(this.end)),l+=")"}compare(l,i){var h,c,a,w;if(typeof l=="string"&&(l=new g(l)),typeof i=="string"&&(i=new g(i)),l.spinePos>i.spinePos)return 1;if(l.spinePos<i.spinePos)return-1;l.range?(h=l.path.steps.concat(l.start.steps),a=l.start.terminal):(h=l.path.steps,a=l.path.terminal),i.range?(c=i.path.steps.concat(i.start.steps),w=i.start.terminal):(c=i.path.steps,w=i.path.terminal);for(var s=0;s<h.length;s++){if(!h[s])return-1;if(!c[s]||h[s].index>c[s].index)return 1;if(h[s].index<c[s].index)return-1}return h.length<c.length?-1:a.offset>w.offset?1:a.offset<w.offset?-1:0}step(l){var i=l.nodeType===3?"text":"element";return{id:l.id,tagName:l.tagName,type:i,index:this.position(l)}}filteredStep(l,i){var h,c=this.filter(l,i);if(c)return h=c.nodeType===3?"text":"element",{id:c.id,tagName:c.tagName,type:h,index:this.filteredPosition(c,i)}}pathTo(l,i,h){for(var c,a={steps:[],terminal:{offset:null,assertion:null}},w=l;w&&w.parentNode&&w.parentNode.nodeType!=9;)(c=h?this.filteredStep(w,h):this.step(w))&&a.steps.unshift(c),w=w.parentNode;return i!=null&&i>=0&&(a.terminal.offset=i,a.steps[a.steps.length-1].type!="text"&&a.steps.push({type:"text",index:0})),a}equalStep(l,i){return!(!l||!i)&&l.index===i.index&&l.id===i.id&&l.type===i.type}fromRange(l,i,h){var c={range:!1,base:{},path:{},start:null,end:null},a=l.startContainer,w=l.endContainer,s=l.startOffset,d=l.endOffset,_=!1;if(h&&(_=a.ownerDocument.querySelector("."+h)!=null),typeof i=="string"?(c.base=this.parseComponent(i),c.spinePos=c.base.steps[1].index):typeof i=="object"&&(c.base=i),l.collapsed)_&&(s=this.patchOffset(a,s,h)),c.path=this.pathTo(a,s,h);else{c.range=!0,_&&(s=this.patchOffset(a,s,h)),c.start=this.pathTo(a,s,h),_&&(d=this.patchOffset(w,d,h)),c.end=this.pathTo(w,d,h),c.path={steps:[],terminal:null};var n,e=c.start.steps.length;for(n=0;n<e&&this.equalStep(c.start.steps[n],c.end.steps[n]);n++)n===e-1?c.start.terminal===c.end.terminal&&(c.path.steps.push(c.start.steps[n]),c.range=!1):c.path.steps.push(c.start.steps[n]);c.start.steps=c.start.steps.slice(c.path.steps.length),c.end.steps=c.end.steps.slice(c.path.steps.length)}return c}fromNode(l,i,h){var c={range:!1,base:{},path:{},start:null,end:null};return typeof i=="string"?(c.base=this.parseComponent(i),c.spinePos=c.base.steps[1].index):typeof i=="object"&&(c.base=i),c.path=this.pathTo(l,null,h),c}filter(l,i){var h,c,a,w,s,d=!1;return l.nodeType===3?(d=!0,a=l.parentNode,h=l.parentNode.classList.contains(i)):(d=!1,h=l.classList.contains(i)),h&&d?(w=a.previousSibling,s=a.nextSibling,w&&w.nodeType===3?c=w:s&&s.nodeType===3&&(c=s),c||l):!(h&&!d)&&l}patchOffset(l,i,h){if(l.nodeType!=3)throw new Error("Anchor must be a text node");var c=l,a=i;for(l.parentNode.classList.contains(h)&&(c=l.parentNode);c.previousSibling;){if(c.previousSibling.nodeType===1){if(!c.previousSibling.classList.contains(h))break;a+=c.previousSibling.textContent.length}else a+=c.previousSibling.textContent.length;c=c.previousSibling}return a}normalizedMap(l,i,h){var c,a,w,s={},d=-1,_=l.length;for(c=0;c<_;c++)(a=l[c].nodeType)===1&&l[c].classList.contains(h)&&(a=3),c>0&&a===3&&w===3?s[c]=d:i===a&&(d+=1,s[c]=d),w=a;return s}position(l){var i,h;return l.nodeType===1?((i=l.parentNode.children)||(i=Object(f.findChildren)(l.parentNode)),h=Array.prototype.indexOf.call(i,l)):h=(i=this.textNodes(l.parentNode)).indexOf(l),h}filteredPosition(l,i){var h,c;return l.nodeType===1?(h=l.parentNode.children,c=this.normalizedMap(h,1,i)):(h=l.parentNode.childNodes,l.parentNode.classList.contains(i)&&(h=(l=l.parentNode).parentNode.childNodes),c=this.normalizedMap(h,3,i)),c[Array.prototype.indexOf.call(h,l)]}stepsToXpath(l){var i=[".","*"];return l.forEach(function(h){var c=h.index+1;h.id?i.push("*[position()="+c+" and @id='"+h.id+"']"):h.type==="text"?i.push("text()["+c+"]"):i.push("*["+c+"]")}),i.join("/")}stepsToQuerySelector(l){var i=["html"];return l.forEach(function(h){var c=h.index+1;h.id?i.push("#"+h.id):h.type==="text"||i.push("*:nth-child("+c+")")}),i.join(">")}textNodes(l,i){return Array.prototype.slice.call(l.childNodes).filter(function(h){return h.nodeType===3||!(!i||!h.classList.contains(i))})}walkToNode(l,i,h){var c,a,w=i||document,s=w.documentElement,d=l.length;for(a=0;a<d&&((c=l[a]).type==="element"?s=c.id?w.getElementById(c.id):(s.children||Object(f.findChildren)(s))[c.index]:c.type==="text"&&(s=this.textNodes(s,h)[c.index]),s);a++);return s}findNode(l,i,h){var c,a,w=i||document;return h||w.evaluate===void 0?c=h?this.walkToNode(l,w,h):this.walkToNode(l,w):(a=this.stepsToXpath(l),c=w.evaluate(a,w,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),c}fixMiss(l,i,h,c){var a,w,s=this.findNode(l.slice(0,-1),h,c),d=s.childNodes,_=this.normalizedMap(d,3,c),n=l[l.length-1].index;for(let e in _){if(!_.hasOwnProperty(e))return;if(_[e]===n){if(!(i>(w=(a=d[e]).textContent.length))){s=a.nodeType===1?a.childNodes[0]:a;break}i-=w}}return{container:s,offset:i}}toRange(l,i){var h,c,a,w,s,d,_,n,e=l||document,u=!!i&&e.querySelector("."+i)!=null;if(h=e.createRange!==void 0?e.createRange():new f.RangeObject,this.range?(c=this.start,d=this.path.steps.concat(c.steps),w=this.findNode(d,e,u?i:null),a=this.end,_=this.path.steps.concat(a.steps),s=this.findNode(_,e,u?i:null)):(c=this.path,d=this.path.steps,w=this.findNode(this.path.steps,e,u?i:null)),!w)return console.log("No startContainer found for",this.toString()),null;try{c.terminal.offset!=null?h.setStart(w,c.terminal.offset):h.setStart(w,0)}catch{n=this.fixMiss(d,c.terminal.offset,e,u?i:null),h.setStart(n.container,n.offset)}if(s)try{a.terminal.offset!=null?h.setEnd(s,a.terminal.offset):h.setEnd(s,0)}catch{n=this.fixMiss(_,this.end.terminal.offset,e,u?i:null),h.setEnd(n.container,n.offset)}return h}isCfiString(l){return typeof l=="string"&&l.indexOf("epubcfi(")===0&&l[l.length-1]===")"}generateChapterComponent(l,i,h){var c="/"+2*(l+1)+"/";return c+=2*(parseInt(i)+1),h&&(c+="["+h+"]"),c}collapse(l){this.range&&(this.range=!1,l?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}y.a=g},function(k,y,o){var f,g,r,l,i,h,c,a=o(31),w=o(45),s=Function.prototype.apply,d=Function.prototype.call,_=Object.create,n=Object.defineProperty,e=Object.defineProperties,u=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};g=function(b,x){var p,S;return w(x),S=this,f.call(this,b,p=function(){r.call(S,b,p),s.call(x,this,arguments)}),p.__eeOnceListener__=x,this},i={on:f=function(b,x){var p;return w(x),u.call(this,"__ee__")?p=this.__ee__:(p=v.value=_(null),n(this,"__ee__",v),v.value=null),p[b]?typeof p[b]=="object"?p[b].push(x):p[b]=[p[b],x]:p[b]=x,this},once:g,off:r=function(b,x){var p,S,j,U;if(w(x),!u.call(this,"__ee__"))return this;if(!(p=this.__ee__)[b])return this;if(typeof(S=p[b])=="object")for(U=0;j=S[U];++U)j!==x&&j.__eeOnceListener__!==x||(S.length===2?p[b]=S[U?0:1]:S.splice(U,1));else S!==x&&S.__eeOnceListener__!==x||delete p[b];return this},emit:l=function(b){var x,p,S,j,U;if(u.call(this,"__ee__")&&(j=this.__ee__[b]))if(typeof j=="object"){for(p=arguments.length,U=new Array(p-1),x=1;x<p;++x)U[x-1]=arguments[x];for(j=j.slice(),x=0;S=j[x];++x)s.call(S,this,U)}else switch(arguments.length){case 1:d.call(j,this);break;case 2:d.call(j,this,arguments[1]);break;case 3:d.call(j,this,arguments[1],arguments[2]);break;default:for(p=arguments.length,U=new Array(p-1),x=1;x<p;++x)U[x-1]=arguments[x];s.call(j,this,U)}}},h={on:a(f),once:a(g),off:a(r),emit:a(l)},c=e({},h),k.exports=y=function(b){return b==null?_(c):e(Object(b),h)},y.methods=i},function(k,y,o){var f=o(7),g=o.n(f);y.a=class{constructor(r){var l;r.indexOf("://")>-1&&(r=new URL(r).pathname),l=this.parse(r),this.path=r,this.isDirectory(r)?this.directory=r:this.directory=l.dir+"/",this.filename=l.base,this.extension=l.ext.slice(1)}parse(r){return g.a.parse(r)}isAbsolute(r){return g.a.isAbsolute(r||this.path)}isDirectory(r){return r.charAt(r.length-1)==="/"}resolve(r){return g.a.resolve(this.directory,r)}relative(r){return r&&r.indexOf("://")>-1?r:g.a.relative(this.directory,r)}splitPath(r){return this.splitPathRe.exec(r).slice(1)}toString(){return this.path}}},function(k,y,o){var f=o(4),g=o(7),r=o.n(g);y.a=class{constructor(l,i){var h=l.indexOf("://")>-1,c=l;if(this.Url=void 0,this.href=l,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=i,!h&&i!==!1&&typeof i!="string"&&window&&window.location&&(this.base=window.location.href),h||this.base)try{this.base?this.Url=new URL(l,this.base):this.Url=new URL(l),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,c=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(c=new f.a(this.base).resolve(c))}this.Path=new f.a(c),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(l){var i;return l.indexOf("://")>-1?l:(i=r.a.resolve(this.directory,l),this.origin+i)}relative(l){return r.a.relative(l,this.directory)}toString(){return this.href}}},function(k,y,o){y.a=class{constructor(f){this.context=f||this,this.hooks=[]}register(){for(var f=0;f<arguments.length;++f)if(typeof arguments[f]=="function")this.hooks.push(arguments[f]);else for(var g=0;g<arguments[f].length;++g)this.hooks.push(arguments[f][g])}deregister(f){let g;for(let r=0;r<this.hooks.length;r++)if(g=this.hooks[r],g===f){this.hooks.splice(r,1);break}}trigger(){var f=arguments,g=this.context,r=[];return this.hooks.forEach(function(l){try{var i=l.apply(g,f)}catch(h){console.log(h)}i&&typeof i.then=="function"&&r.push(i)}),Promise.all(r)}list(){return this.hooks}clear(){return this.hooks=[]}}},function(k,y,o){if(!f)var f={cwd:function(){return"/"}};function g(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+i)}function r(i,h){for(var c,a="",w=-1,s=0,d=0;d<=i.length;++d){if(d<i.length)c=i.charCodeAt(d);else{if(c===47)break;c=47}if(c===47){if(!(w===d-1||s===1))if(w!==d-1&&s===2){if(a.length<2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){for(var _=a.length-1,n=_;n>=0&&a.charCodeAt(n)!==47;--n);if(n!==_){a=n===-1?"":a.slice(0,n),w=d,s=0;continue}}else if(a.length===2||a.length===1){a="",w=d,s=0;continue}}h&&(a.length>0?a+="/..":a="..")}else a.length>0?a+="/"+i.slice(w+1,d):a=i.slice(w+1,d);w=d,s=0}else c===46&&s!==-1?++s:s=-1}return a}var l={resolve:function(){for(var i,h="",c=!1,a=arguments.length-1;a>=-1&&!c;a--){var w;a>=0?w=arguments[a]:(i===void 0&&(i=f.cwd()),w=i),g(w),w.length!==0&&(h=w+"/"+h,c=w.charCodeAt(0)===47)}return h=r(h,!c),c?h.length>0?"/"+h:"/":h.length>0?h:"."},normalize:function(i){if(g(i),i.length===0)return".";var h=i.charCodeAt(0)===47,c=i.charCodeAt(i.length-1)===47;return(i=r(i,!h)).length!==0||h||(i="."),i.length>0&&c&&(i+="/"),h?"/"+i:i},isAbsolute:function(i){return g(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,h=0;h<arguments.length;++h){var c=arguments[h];g(c),c.length>0&&(i===void 0?i=c:i+="/"+c)}return i===void 0?".":l.normalize(i)},relative:function(i,h){if(g(i),g(h),i===h||(i=l.resolve(i))===(h=l.resolve(h)))return"";for(var c=1;c<i.length&&i.charCodeAt(c)===47;++c);for(var a=i.length,w=a-c,s=1;s<h.length&&h.charCodeAt(s)===47;++s);for(var d=h.length-s,_=w<d?w:d,n=-1,e=0;e<=_;++e){if(e===_){if(d>_){if(h.charCodeAt(s+e)===47)return h.slice(s+e+1);if(e===0)return h.slice(s+e)}else w>_&&(i.charCodeAt(c+e)===47?n=e:e===0&&(n=0));break}var u=i.charCodeAt(c+e);if(u!==h.charCodeAt(s+e))break;u===47&&(n=e)}var v="";for(e=c+n+1;e<=a;++e)e!==a&&i.charCodeAt(e)!==47||(v.length===0?v+="..":v+="/..");return v.length>0?v+h.slice(s+n):(s+=n,h.charCodeAt(s)===47&&++s,h.slice(s))},_makeLong:function(i){return i},dirname:function(i){if(g(i),i.length===0)return".";for(var h=i.charCodeAt(0),c=h===47,a=-1,w=!0,s=i.length-1;s>=1;--s)if((h=i.charCodeAt(s))===47){if(!w){a=s;break}}else w=!1;return a===-1?c?"/":".":c&&a===1?"//":i.slice(0,a)},basename:function(i,h){if(h!==void 0&&typeof h!="string")throw new TypeError('"ext" argument must be a string');g(i);var c,a=0,w=-1,s=!0;if(h!==void 0&&h.length>0&&h.length<=i.length){if(h.length===i.length&&h===i)return"";var d=h.length-1,_=-1;for(c=i.length-1;c>=0;--c){var n=i.charCodeAt(c);if(n===47){if(!s){a=c+1;break}}else _===-1&&(s=!1,_=c+1),d>=0&&(n===h.charCodeAt(d)?--d==-1&&(w=c):(d=-1,w=_))}return a===w?w=_:w===-1&&(w=i.length),i.slice(a,w)}for(c=i.length-1;c>=0;--c)if(i.charCodeAt(c)===47){if(!s){a=c+1;break}}else w===-1&&(s=!1,w=c+1);return w===-1?"":i.slice(a,w)},extname:function(i){g(i);for(var h=-1,c=0,a=-1,w=!0,s=0,d=i.length-1;d>=0;--d){var _=i.charCodeAt(d);if(_!==47)a===-1&&(w=!1,a=d+1),_===46?h===-1?h=d:s!==1&&(s=1):h!==-1&&(s=-1);else if(!w){c=d+1;break}}return h===-1||a===-1||s===0||s===1&&h===a-1&&h===c+1?"":i.slice(h,a)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof i);return function(h,c){var a=c.dir||c.root,w=c.base||(c.name||"")+(c.ext||"");return a?a===c.root?a+w:a+h+w:w}("/",i)},parse:function(i){g(i);var h={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return h;var c,a=i.charCodeAt(0),w=a===47;w?(h.root="/",c=1):c=0;for(var s=-1,d=0,_=-1,n=!0,e=i.length-1,u=0;e>=c;--e)if((a=i.charCodeAt(e))!==47)_===-1&&(n=!1,_=e+1),a===46?s===-1?s=e:u!==1&&(u=1):s!==-1&&(u=-1);else if(!n){d=e+1;break}return s===-1||_===-1||u===0||u===1&&s===_-1&&s===d+1?_!==-1&&(h.base=h.name=d===0&&w?i.slice(1,_):i.slice(d,_)):(d===0&&w?(h.name=i.slice(1,s),h.base=i.slice(1,_)):(h.name=i.slice(d,s),h.base=i.slice(d,_)),h.ext=i.slice(s,_)),d>0?h.dir=i.slice(0,d-1):w&&(h.dir="/"),h},sep:"/",delimiter:":",posix:null};k.exports=l},function(k,y,o){o.d(y,"a",function(){return r}),o.d(y,"b",function(){return l}),o.d(y,"d",function(){return i}),o.d(y,"c",function(){return h}),o.d(y,"e",function(){return c});var f=o(0),g=o(5);o(4);function r(a,w){var s,d,_=w.url,n=_.indexOf("://")>-1;a&&(d=Object(f.qs)(a,"head"),(s=Object(f.qs)(d,"base"))||(s=a.createElement("base"),d.insertBefore(s,d.firstChild)),!n&&window&&window.location&&(_=window.location.origin+_),s.setAttribute("href",_))}function l(a,w){var s,d,_=w.canonical;a&&(s=Object(f.qs)(a,"head"),(d=Object(f.qs)(s,"link[rel='canonical']"))?d.setAttribute("href",_):((d=a.createElement("link")).setAttribute("rel","canonical"),d.setAttribute("href",_),s.appendChild(d)))}function i(a,w){var s,d,_=w.idref;a&&(s=Object(f.qs)(a,"head"),(d=Object(f.qs)(s,"link[property='dc.identifier']"))?d.setAttribute("content",_):((d=a.createElement("meta")).setAttribute("name","dc.identifier"),d.setAttribute("content",_),s.appendChild(d)))}function h(a,w){var s=a.querySelectorAll("a[href]");if(s.length)for(var d=Object(f.qs)(a.ownerDocument,"base"),_=d?d.getAttribute("href"):void 0,n=function(u){var v=u.getAttribute("href");if(v.indexOf("mailto:")!==0)if(v.indexOf("://")>-1)u.setAttribute("target","_blank");else{var b;try{b=new g.a(v,_)}catch{}u.onclick=function(){return b&&b.hash?w(b.Path.path+b.hash):w(b?b.Path.path:v),!1}}}.bind(this),e=0;e<s.length;e++)n(s[e])}function c(a,w,s){return w.forEach(function(d,_){d&&s[_]&&(d=d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),a=a.replace(new RegExp(d,"g"),s[_]))}),a}},function(k,y,o){var f=o(0);y.a=class{constructor(g){this._q=[],this.context=g,this.tick=f.requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var g,r,l=[].shift.call(arguments),i=arguments;if(!l)throw new Error("No Task Provided");return r=typeof l=="function"?{task:l,args:i,deferred:g=new f.defer,promise:g.promise}:{promise:l},this._q.push(r),this.paused!=0||this.running||this.run(),r.promise}dequeue(){var g,r,l;return!this._q.length||this.paused?((g=new f.defer).deferred.resolve(),g.promise):(r=(g=this._q.shift()).task)?(l=r.apply(this.context,g.args))&&typeof l.then=="function"?l.then(function(){g.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){g.deferred.reject.apply(this.context,arguments)}.bind(this)):(g.deferred.resolve.apply(this.context,l),g.promise):g.promise?g.promise:void 0}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new f.defer),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==1&&(this.paused=!1),this.defered.promise}flush(){return this.running?this.running:this._q.length?(this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running):void 0}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}},function(k,y,o){var f=o(3),g=o.n(f),r=o(0);function l(){var n="reverse",e=function(){var u=document.createElement("div");u.dir="rtl",u.style.position="fixed",u.style.width="1px",u.style.height="1px",u.style.top="0px",u.style.left="0px",u.style.overflow="hidden";var v=document.createElement("div");v.style.width="2px";var b=document.createElement("span");b.style.width="1px",b.style.display="inline-block";var x=document.createElement("span");return x.style.width="1px",x.style.display="inline-block",v.appendChild(b),v.appendChild(x),u.appendChild(v),u}();return document.body.appendChild(e),e.scrollLeft>0?n="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(n="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(n="negative")),document.body.removeChild(e),n}var i=o(11),h=o(9),c=o(28),a=o.n(c),w=class{constructor(n){this.settings=n||{},this.id="epubjs-container-"+Object(r.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(n){let e=n.height,u=n.width,v=n.overflow||!1,b=n.axis||"vertical",x=n.direction;Object(r.extend)(this.settings,n),n.height&&Object(r.isNumber)(n.height)&&(e=n.height+"px"),n.width&&Object(r.isNumber)(n.width)&&(u=n.width+"px");let p=document.createElement("div");return p.id=this.id,p.classList.add("epub-container"),p.style.wordSpacing="0",p.style.lineHeight="0",p.style.verticalAlign="top",p.style.position="relative",b==="horizontal"&&(p.style.display="flex",p.style.flexDirection="row",p.style.flexWrap="nowrap"),u&&(p.style.width=u),e&&(p.style.height=e),v&&(v==="scroll"&&b==="vertical"?(p.style["overflow-y"]=v,p.style["overflow-x"]="hidden"):v==="scroll"&&b==="horizontal"?(p.style["overflow-y"]="hidden",p.style["overflow-x"]=v):p.style.overflow=v),x&&(p.dir=x,p.style.direction=x),x&&this.settings.fullsize&&(document.body.style.direction=x),p}wrap(n){var e=document.createElement("div");return e.style.visibility="hidden",e.style.overflow="hidden",e.style.width="0",e.style.height="0",e.appendChild(n),e}getElement(n){var e;if(Object(r.isElement)(n)?e=n:typeof n=="string"&&(e=document.getElementById(n)),!e)throw new Error("Not an Element");return e}attachTo(n){var e,u=this.getElement(n);if(u)return e=this.settings.hidden?this.wrapper:this.container,u.appendChild(e),this.element=u,u}getContainer(){return this.container}onResize(n){Object(r.isNumber)(this.settings.width)&&Object(r.isNumber)(this.settings.height)||(this.resizeFunc=a()(n,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(n){this.orientationChangeFunc=n,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(n,e){var u;let v=n||this.settings.width,b=e||this.settings.height;n===null?(u=this.element.getBoundingClientRect()).width&&(n=Math.floor(u.width),this.container.style.width=n+"px"):Object(r.isNumber)(n)?this.container.style.width=n+"px":this.container.style.width=n,e===null?(u=u||this.element.getBoundingClientRect()).height&&(e=u.height,this.container.style.height=e+"px"):Object(r.isNumber)(e)?this.container.style.height=e+"px":this.container.style.height=e,Object(r.isNumber)(n)||(n=this.container.clientWidth),Object(r.isNumber)(e)||(e=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let x=Object(r.windowBounds)(),p=window.getComputedStyle(document.body),S=parseFloat(p["padding-left"])||0,j=parseFloat(p["padding-right"])||0,U=parseFloat(p["padding-top"])||0,P=parseFloat(p["padding-bottom"])||0;return v||(n=x.width-S-j),(this.settings.fullsize&&!b||!b)&&(e=x.height-U-P),{width:n-this.containerPadding.left-this.containerPadding.right,height:e-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let n;return this.container.style.overflow!=="visible"&&(n=this.container&&this.container.getBoundingClientRect()),n&&n.width&&n.height?n:Object(r.windowBounds)()}getSheet(){var n=document.createElement("style");return n.appendChild(document.createTextNode("")),document.head.appendChild(n),n.sheet}addStyleRules(n,e){var u="#"+this.id+" ",v="";this.sheet||(this.sheet=this.getSheet()),e.forEach(function(b){for(var x in b)b.hasOwnProperty(x)&&(v+=x+":"+b[x]+";")}),this.sheet.insertRule(u+n+" {"+v+"}",0)}axis(n){n==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=n}direction(n){this.container&&(this.container.dir=n,this.container.style.direction=n),this.settings.fullsize&&(document.body.style.direction=n),this.settings.dir=n}overflow(n){this.container&&(n==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=n,this.container.style["overflow-x"]="hidden"):n==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=n):this.container.style.overflow=n),this.settings.overflow=n}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}},s=class{constructor(n){this.container=n,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(n){return this._views.indexOf(n)}slice(){return this._views.slice.apply(this._views,arguments)}get(n){return this._views[n]}append(n){return this._views.push(n),this.container&&this.container.appendChild(n.element),this.length++,n}prepend(n){return this._views.unshift(n),this.container&&this.container.insertBefore(n.element,this.container.firstChild),this.length++,n}insert(n,e){return this._views.splice(e,0,n),this.container&&(e<this.container.children.length?this.container.insertBefore(n.element,this.container.children[e]):this.container.appendChild(n.element)),this.length++,n}remove(n){var e=this._views.indexOf(n);e>-1&&this._views.splice(e,1),this.destroy(n),this.length--}destroy(n){n.displayed&&n.destroy(),this.container&&this.container.removeChild(n.element),n=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var n,e=this.length;if(this.length){for(var u=0;u<e;u++)n=this._views[u],this.destroy(n);this._views=[],this.length=0}}find(n){for(var e,u=this.length,v=0;v<u;v++)if((e=this._views[v]).displayed&&e.section.index==n.index)return e}displayed(){for(var n,e=[],u=this.length,v=0;v<u;v++)(n=this._views[v]).displayed&&e.push(n);return e}show(){for(var n,e=this.length,u=0;u<e;u++)(n=this._views[u]).displayed&&n.show();this.hidden=!1}hide(){for(var n,e=this.length,u=0;u<e;u++)(n=this._views[u]).displayed&&n.hide();this.hidden=!0}},d=o(1);class _{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new h.a(this),this.settings=Object(r.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),Object(r.extend)(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,u){let v=e.tagName;this.settings.fullsize!==void 0||!v||v.toLowerCase()!="body"&&v.toLowerCase()!="html"||(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=u,this.settings.rtlScrollType=l(),this.stage=new w({width:u.width,height:u.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new s(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",function(u){this.destroy()}.bind(this)),e=this.settings.fullsize?window:this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){(this.settings.fullsize?window:this.container).removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:u}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(d.c.MANAGERS.ORIENTATION_CHANGE,u)}.bind(this),500)}onResized(e){this.resize()}resize(e,u,v){let b=this.stage.size(e,u);this.winBounds=Object(r.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height?this._stageSize=void 0:this._stageSize&&this._stageSize.width===b.width&&this._stageSize.height===b.height||(this._stageSize=b,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(d.c.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},v))}createView(e,u){return new this.View(e,Object(r.extend)(this.viewSettings,{forceRight:u}))}handleNextPrePaginated(e,u,v){let b;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||u.index===0)return;if(b=u.next(),b&&!b.properties.includes("page-spread-left"))return v.call(this,b)}}display(e,u){var v=new r.defer,b=v.promise;(u===e.href||Object(r.isNumber)(u))&&(u=void 0);var x=this.views.find(e);if(x&&e&&this.layout.name!=="pre-paginated"){let S=x.offset();if(this.settings.direction==="ltr")this.scrollTo(S.left,S.top,!0);else{let j=x.width();this.scrollTo(S.left+j,S.top,!0)}if(u){let j=x.locationOf(u),U=x.width();this.moveTo(j,U)}return v.resolve(),b}this.clear();let p=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(p=!0),this.add(e,p).then(function(S){if(u){let j=S.locationOf(u),U=S.width();this.moveTo(j,U)}}.bind(this),S=>{v.reject(S)}).then(function(){return this.handleNextPrePaginated(p,e,this.add)}.bind(this)).then(function(){this.views.show(),v.resolve()}.bind(this)),b}afterDisplayed(e){this.emit(d.c.MANAGERS.ADDED,e)}afterResized(e){this.emit(d.c.MANAGERS.RESIZE,e.section)}moveTo(e,u){var v=0,b=0;this.isPaginated?((v=Math.floor(e.left/this.layout.delta)*this.layout.delta)+this.layout.delta>this.container.scrollWidth&&(v=this.container.scrollWidth-this.layout.delta),(b=Math.floor(e.top/this.layout.delta)*this.layout.delta)+this.layout.delta>this.container.scrollHeight&&(b=this.container.scrollHeight-this.layout.delta)):b=e.top,this.settings.direction==="rtl"&&(v+=this.layout.delta,v-=u),this.scrollTo(v,b,!0)}add(e,u){var v=this.createView(e,u);return this.views.append(v),v.onDisplayed=this.afterDisplayed.bind(this),v.onResize=this.afterResized.bind(this),v.on(d.c.VIEWS.AXIS,b=>{this.updateAxis(b)}),v.on(d.c.VIEWS.WRITING_MODE,b=>{this.updateWritingMode(b)}),v.display(this.request)}append(e,u){var v=this.createView(e,u);return this.views.append(v),v.onDisplayed=this.afterDisplayed.bind(this),v.onResize=this.afterResized.bind(this),v.on(d.c.VIEWS.AXIS,b=>{this.updateAxis(b)}),v.on(d.c.VIEWS.WRITING_MODE,b=>{this.updateWritingMode(b)}),v.display(this.request)}prepend(e,u){var v=this.createView(e,u);return v.on(d.c.VIEWS.RESIZED,b=>{this.counter(b)}),this.views.prepend(v),v.onDisplayed=this.afterDisplayed.bind(this),v.onResize=this.afterResized.bind(this),v.on(d.c.VIEWS.AXIS,b=>{this.updateAxis(b)}),v.on(d.c.VIEWS.WRITING_MODE,b=>{this.updateWritingMode(b)}),v.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e;let u=this.settings.direction;if(this.views.length&&(!this.isPaginated||this.settings.axis!=="horizontal"||u&&u!=="ltr"?this.isPaginated&&this.settings.axis==="horizontal"&&u==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?this.container.scrollLeft>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next():this.container.scrollLeft+-1*this.layout.delta>-1*this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next():(this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft+this.container.offsetWidth+this.layout.delta<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()),e)){this.clear(),this.updateLayout();let v=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(v=!0),this.append(e,v).then(function(){return this.handleNextPrePaginated(v,e,this.append)}.bind(this),b=>b).then(function(){this.isPaginated||this.settings.axis!=="horizontal"||this.settings.direction!=="rtl"||this.settings.rtlScrollType!=="default"||this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}.bind(this))}}prev(){var e;let u=this.settings.direction;if(this.views.length&&(!this.isPaginated||this.settings.axis!=="horizontal"||u&&u!=="ltr"?this.isPaginated&&this.settings.axis==="horizontal"&&u==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?this.container.scrollLeft+this.container.offsetWidth<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev():this.container.scrollLeft<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev():(this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()),e)){this.clear(),this.updateLayout();let v=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(v=!0),this.prepend(e,v).then(function(){var b;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(b=e.prev()))return this.prepend(b)}.bind(this),b=>b).then(function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(-1*this.container.scrollWidth+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),u=this.container.getBoundingClientRect(),v=u.height<window.innerHeight?u.height:window.innerHeight,b=u.width<window.innerWidth?u.width:window.innerWidth,x=this.settings.axis==="vertical",p=(this.settings.direction,0);return this.settings.fullsize&&(p=x?window.scrollY:window.scrollX),e.map(S=>{let j,U,P,W,{index:E,href:X}=S.section,Q=S.position(),J=S.width(),ct=S.height();x?(j=p+u.top-Q.top+0,U=j+v-0,W=this.layout.count(ct,v).pages,P=v):(j=p+u.left-Q.left+0,U=j+b-0,W=this.layout.count(J,b).pages,P=b);let et=Math.ceil(j/P),ht=[],G=Math.ceil(U/P);if(this.settings.direction==="rtl"&&!x){let at=et;et=W-G,G=W-at}ht=[];for(var $=et;$<=G;$++){let at=$+1;ht.push(at)}return{index:E,href:X,pages:ht,totalPages:W,mapping:this.mapping.page(S.contents,S.section.cfiBase,j,U)}})}paginatedLocation(){let e=this.visible(),u=this.container.getBoundingClientRect(),v=0,b=0;return this.settings.fullsize&&(v=window.scrollX),e.map(x=>{let p,S,j,U,{index:P,href:W}=x.section,E=x.position(),X=x.width();this.settings.direction==="rtl"?(p=u.right-v,U=Math.min(Math.abs(p-E.left),this.layout.width)-b,j=E.width-(E.right-p)-b,S=j-U):(p=u.left+v,U=Math.min(E.right-p,this.layout.width)-b,S=p-E.left+b,j=S+U),b+=U;let Q=this.mapping.page(x.contents,x.section.cfiBase,S,j),J=this.layout.count(X).pages,ct=Math.floor(S/this.layout.pageWidth),et=[],ht=Math.floor(j/this.layout.pageWidth);if(ct<0&&(ct=0,ht+=1),this.settings.direction==="rtl"){let $=ct;ct=J-ht,ht=J-$}for(var G=ct+1;G<=ht;G++){let $=G;et.push($)}return{index:P,href:W,pages:et,totalPages:J,mapping:Q}})}isVisible(e,u,v,b){var x=e.position(),p=b||this.bounds();return this.settings.axis==="horizontal"&&x.right>p.left-u&&x.left<p.right+v||this.settings.axis==="vertical"&&x.bottom>p.top-u&&x.top<p.bottom+v}visible(){for(var e,u=this.bounds(),v=this.views.displayed(),b=v.length,x=[],p=0;p<b;p++)e=v[p],this.isVisible(e,0,0,u)===!0&&x.push(e);return x}scrollBy(e,u,v){let b=this.settings.direction==="rtl"?-1:1;v&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*b,u*b):(e&&(this.container.scrollLeft+=e*b),u&&(this.container.scrollTop+=u)),this.scrolled=!0}scrollTo(e,u,v){v&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,u):(this.container.scrollLeft=e,this.container.scrollTop=u),this.scrolled=!0}onScroll(){let e,u;this.settings.fullsize?(e=window.scrollY,u=window.scrollX):(e=this.container.scrollTop,u=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=u,this.ignore?this.ignore=!1:(this.emit(d.c.MANAGERS.SCROLL,{top:e,left:u}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(d.c.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}bounds(){return this.stage.bounds()}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new i.a(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(u){u&&u.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,u){(u||e!==this.settings.axis)&&(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new i.a(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,u="auto"){let v=e==="paginated"||e==="auto";this.isPaginated=v,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=v?"hidden":u,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(u){const v=u&&u.contents;v&&e.push(v)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}g()(_.prototype),y.a=_},function(k,y,o){var f=o(2),g=o(0);y.a=class{constructor(r,l,i,h=!1){this.layout=r,this.horizontal=i==="horizontal",this.direction=l||"ltr",this._dev=h}section(r){var l=this.findRanges(r);return this.rangeListToCfiList(r.section.cfiBase,l)}page(r,l,i,h){var c,a=!(!r||!r.document)&&r.document.body;if(a){if(c=this.rangePairToCfiPair(l,{start:this.findStart(a,i,h),end:this.findEnd(a,i,h)}),this._dev===!0){let w=r.document,s=new f.a(c.start).toRange(w),d=new f.a(c.end).toRange(w),_=w.defaultView.getSelection(),n=w.createRange();_.removeAllRanges(),n.setStart(s.startContainer,s.startOffset),n.setEnd(d.endContainer,d.endOffset),_.addRange(n)}return c}}walk(r,l){if(!r||r.nodeType!==Node.TEXT_NODE){var i=function(s){return s.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},h=i;h.acceptNode=i;for(var c,a,w=document.createTreeWalker(r,NodeFilter.SHOW_TEXT,h,!1);(c=w.nextNode())&&!(a=l(c)););return a}}findRanges(r){for(var l,i,h=[],c=r.contents.scrollWidth(),a=Math.ceil(c/this.layout.spreadWidth)*this.layout.divisor,w=this.layout.columnWidth,s=this.layout.gap,d=0;d<a.pages;d++)l=(w+s)*d,i=w*(d+1)+s*d,h.push({start:this.findStart(r.document.body,l,i),end:this.findEnd(r.document.body,l,i)});return h}findStart(r,l,i){for(var h,c,a=[r],w=r;a.length;)if(h=a.shift(),c=this.walk(h,s=>{var d,_,n,e,u;if(u=Object(g.nodeBounds)(s),this.horizontal&&this.direction==="ltr"){if(d=this.horizontal?u.left:u.top,_=this.horizontal?u.right:u.bottom,d>=l&&d<=i||_>l)return s;w=s,a.push(s)}else if(this.horizontal&&this.direction==="rtl"){if(d=u.left,(_=u.right)<=i&&_>=l||d<i)return s;w=s,a.push(s)}else{if(n=u.top,e=u.bottom,n>=l&&n<=i||e>l)return s;w=s,a.push(s)}}))return this.findTextStartRange(c,l,i);return this.findTextStartRange(w,l,i)}findEnd(r,l,i){for(var h,c,a=[r],w=r;a.length;)if(h=a.shift(),c=this.walk(h,s=>{var d,_,n,e,u;if(u=Object(g.nodeBounds)(s),this.horizontal&&this.direction==="ltr"){if(d=Math.round(u.left),_=Math.round(u.right),d>i&&w)return w;if(_>i)return s;w=s,a.push(s)}else if(this.horizontal&&this.direction==="rtl"){if(d=Math.round(this.horizontal?u.left:u.top),(_=Math.round(this.horizontal?u.right:u.bottom))<l&&w)return w;if(d<l)return s;w=s,a.push(s)}else{if(n=Math.round(u.top),e=Math.round(u.bottom),n>i&&w)return w;if(e>i)return s;w=s,a.push(s)}}))return this.findTextEndRange(c,l,i);return this.findTextEndRange(w,l,i)}findTextStartRange(r,l,i){for(var h,c,a=this.splitTextNodeIntoRanges(r),w=0;w<a.length;w++)if(c=(h=a[w]).getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(c.left>=l)return h}else if(this.horizontal&&this.direction==="rtl"){if(c.right<=i)return h}else if(c.top>=l)return h;return a[0]}findTextEndRange(r,l,i){for(var h,c,a,w,s,d,_,n=this.splitTextNodeIntoRanges(r),e=0;e<n.length;e++){if(a=(c=n[e]).getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(w=a.left,s=a.right,w>i&&h)return h;if(s>i)return c}else if(this.horizontal&&this.direction==="rtl"){if(w=a.left,(s=a.right)<l&&h)return h;if(w<l)return c}else{if(d=a.top,_=a.bottom,d>i&&h)return h;if(_>i)return c}h=c}return n[n.length-1]}splitTextNodeIntoRanges(r,l){var i,h=[],c=(r.textContent||"").trim(),a=r.ownerDocument,w=l||" ",s=c.indexOf(w);if(s===-1||r.nodeType!=Node.TEXT_NODE)return(i=a.createRange()).selectNodeContents(r),[i];for((i=a.createRange()).setStart(r,0),i.setEnd(r,s),h.push(i),i=!1;s!=-1;)(s=c.indexOf(w,s+1))>0&&(i&&(i.setEnd(r,s),h.push(i)),(i=a.createRange()).setStart(r,s+1));return i&&(i.setEnd(r,c.length),h.push(i)),h}rangePairToCfiPair(r,l){var i=l.start,h=l.end;return i.collapse(!0),h.collapse(!1),{start:new f.a(i,r).toString(),end:new f.a(h,r).toString()}}rangeListToCfiList(r,l){for(var i,h=[],c=0;c<l.length;c++)i=this.rangePairToCfiPair(r,l[c]),h.push(i);return h}axis(r){return r&&(this.horizontal=r==="horizontal"),this.horizontal}}},function(k,y,o){var f=o(3),g=o.n(f),r=o(0),l=o(2),i=o(11),h=o(8),c=o(1);const a=typeof navigator<"u",w=a&&/Chrome/.test(navigator.userAgent),s=a&&!w&&/AppleWebKit/.test(navigator.userAgent);class d{constructor(n,e,u,v){this.epubcfi=new l.a,this.document=n,this.documentElement=this.document.documentElement,this.content=e||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=v||0,this.cfiBase=u||"",this.epubReadingSystem("epub.js",c.b),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return c.a}width(n){var e=this.content;return n&&Object(r.isNumber)(n)&&(n+="px"),n&&(e.style.width=n),parseInt(this.window.getComputedStyle(e).width)}height(n){var e=this.content;return n&&Object(r.isNumber)(n)&&(n+="px"),n&&(e.style.height=n),parseInt(this.window.getComputedStyle(e).height)}contentWidth(n){var e=this.content||this.document.body;return n&&Object(r.isNumber)(n)&&(n+="px"),n&&(e.style.width=n),parseInt(this.window.getComputedStyle(e).width)}contentHeight(n){var e=this.content||this.document.body;return n&&Object(r.isNumber)(n)&&(n+="px"),n&&(e.style.height=n),parseInt(this.window.getComputedStyle(e).height)}textWidth(){let n,e,u=this.document.createRange(),v=this.content||this.document.body,b=Object(r.borders)(v);return u.selectNodeContents(v),n=u.getBoundingClientRect(),e=n.width,b&&b.width&&(e+=b.width),Math.round(e)}textHeight(){let n,e,u=this.document.createRange(),v=this.content||this.document.body;return u.selectNodeContents(v),n=u.getBoundingClientRect(),e=n.bottom,Math.round(e)}scrollWidth(){return this.documentElement.scrollWidth}scrollHeight(){return this.documentElement.scrollHeight}overflow(n){return n&&(this.documentElement.style.overflow=n),this.window.getComputedStyle(this.documentElement).overflow}overflowX(n){return n&&(this.documentElement.style.overflowX=n),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(n){return n&&(this.documentElement.style.overflowY=n),this.window.getComputedStyle(this.documentElement).overflowY}css(n,e,u){var v=this.content||this.document.body;return e?v.style.setProperty(n,e,u?"important":""):v.style.removeProperty(n),this.window.getComputedStyle(v)[n]}viewport(n){var e,u=this.document.querySelector("meta[name='viewport']"),v={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},b=[];if(u&&u.hasAttribute("content")){let x=u.getAttribute("content"),p=x.match(/width\s*=\s*([^,]*)/),S=x.match(/height\s*=\s*([^,]*)/),j=x.match(/initial-scale\s*=\s*([^,]*)/),U=x.match(/minimum-scale\s*=\s*([^,]*)/),P=x.match(/maximum-scale\s*=\s*([^,]*)/),W=x.match(/user-scalable\s*=\s*([^,]*)/);p&&p.length&&p[1]!==void 0&&(v.width=p[1]),S&&S.length&&S[1]!==void 0&&(v.height=S[1]),j&&j.length&&j[1]!==void 0&&(v.scale=j[1]),U&&U.length&&U[1]!==void 0&&(v.minimum=U[1]),P&&P.length&&P[1]!==void 0&&(v.maximum=P[1]),W&&W.length&&W[1]!==void 0&&(v.scalable=W[1])}return e=Object(r.defaults)(n||{},v),n&&(e.width&&b.push("width="+e.width),e.height&&b.push("height="+e.height),e.scale&&b.push("initial-scale="+e.scale),e.scalable==="no"?(b.push("minimum-scale="+e.scale),b.push("maximum-scale="+e.scale),b.push("user-scalable="+e.scalable)):(e.scalable&&b.push("user-scalable="+e.scalable),e.minimum&&b.push("minimum-scale="+e.minimum),e.maximum&&b.push("minimum-scale="+e.maximum)),u||((u=this.document.createElement("meta")).setAttribute("name","viewport"),this.document.querySelector("head").appendChild(u)),u.setAttribute("content",b.join(", ")),this.window.scrollTo(0,0)),e}expand(){this.emit(c.c.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let n=this.textWidth(),e=this.textHeight();n==this._size.width&&e==this._size.height||(this._size={width:n,height:e},this.onResize&&this.onResize(this._size),this.emit(c.c.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let n=this.content;n.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",n.style.transitionDuration="0.001ms",n.style.transitionTimingFunction="linear",n.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var n=this.document.styleSheets,e=function(x){x.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),u=0;u<n.length;u+=1){var v;try{v=n[u].cssRules}catch{return}if(!v)return;for(var b=0;b<v.length;b+=1)v[b].media&&this.window.matchMedia(v[b].media.mediaText).addListener(e)}}resizeObservers(){this.observer=new ResizeObserver(n=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(n=>{this.resizeCheck()}),this.observer.observe(this.document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}imageLoadListeners(){for(var n,e=this.document.querySelectorAll("img"),u=0;u<e.length;u++)(n=e[u]).naturalWidth!==void 0&&n.naturalWidth===0&&(n.onload=this.expand.bind(this))}fontLoadListeners(){this.document&&this.document.fonts&&this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(n,e){var u,v={left:0,top:0};if(!this.document)return v;if(this.epubcfi.isCfiString(n)){let b=new l.a(n).toRange(this.document,e);if(b){try{if(!b.endContainer||b.startContainer==b.endContainer&&b.startOffset==b.endOffset){let x=b.startContainer.textContent.indexOf(" ",b.startOffset);x==-1&&(x=b.startContainer.textContent.length),b.setEnd(b.startContainer,x)}}catch(x){console.error("setting end offset to start container length failed",x)}if(b.startContainer.nodeType===Node.ELEMENT_NODE)u=b.startContainer.getBoundingClientRect(),v.left=u.left,v.top=u.top;else if(s){let x=b.startContainer,p=new Range;try{x.nodeType===1?u=x.getBoundingClientRect():b.startOffset+2<x.length?(p.setStart(x,b.startOffset),p.setEnd(x,b.startOffset+2),u=p.getBoundingClientRect()):b.startOffset-2>0?(p.setStart(x,b.startOffset-2),p.setEnd(x,b.startOffset),u=p.getBoundingClientRect()):u=x.parentNode.getBoundingClientRect()}catch(S){console.error(S,S.stack)}}else u=b.getBoundingClientRect()}}else if(typeof n=="string"&&n.indexOf("#")>-1){let b=n.substring(n.indexOf("#")+1),x=this.document.getElementById(b);if(x)if(s){let p=new Range;p.selectNode(x),u=p.getBoundingClientRect()}else u=x.getBoundingClientRect()}return u&&(v.left=u.left,v.top=u.top),v}addStylesheet(n){return new Promise(function(e,u){var v,b=!1;this.document?(v=this.document.querySelector("link[href='"+n+"']"))?e(!0):((v=this.document.createElement("link")).type="text/css",v.rel="stylesheet",v.href=n,v.onload=v.onreadystatechange=function(){b||this.readyState&&this.readyState!="complete"||(b=!0,setTimeout(()=>{e(!0)},1))},this.document.head.appendChild(v)):e(!1)}.bind(this))}_getStylesheetNode(n){var e;return n="epubjs-inserted-css-"+(n||""),!!this.document&&((e=this.document.getElementById(n))||((e=this.document.createElement("style")).id=n,this.document.head.appendChild(e)),e)}addStylesheetCss(n,e){return!(!this.document||!n)&&(this._getStylesheetNode(e).innerHTML=n,!0)}addStylesheetRules(n,e){var u;if(this.document&&n&&n.length!==0)if(u=this._getStylesheetNode(e).sheet,Object.prototype.toString.call(n)==="[object Array]")for(var v=0,b=n.length;v<b;v++){var x=1,p=n[v],S=n[v][0],j="";Object.prototype.toString.call(p[1][0])==="[object Array]"&&(p=p[1],x=0);for(var U=p.length;x<U;x++){var P=p[x];j+=P[0]+":"+P[1]+(P[2]?" !important":"")+`;
`}u.insertRule(S+"{"+j+"}",u.cssRules.length)}else Object.keys(n).forEach(W=>{const E=n[W];if(Array.isArray(E))E.forEach(X=>{const Q=Object.keys(X).map(J=>`${J}:${X[J]}`).join(";");u.insertRule(`${W}{${Q}}`,u.cssRules.length)});else{const X=Object.keys(E).map(Q=>`${Q}:${E[Q]}`).join(";");u.insertRule(`${W}{${X}}`,u.cssRules.length)}})}addScript(n){return new Promise(function(e,u){var v,b=!1;this.document?((v=this.document.createElement("script")).type="text/javascript",v.async=!0,v.src=n,v.onload=v.onreadystatechange=function(){b||this.readyState&&this.readyState!="complete"||(b=!0,setTimeout(function(){e(!0)},1))},this.document.head.appendChild(v)):e(!1)}.bind(this))}addClass(n){var e;this.document&&(e=this.content||this.document.body)&&e.classList.add(n)}removeClass(n){var e;this.document&&(e=this.content||this.document.body)&&e.classList.remove(n)}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),c.a.forEach(function(n){this.document.addEventListener(n,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(c.a.forEach(function(n){this.document.removeEventListener(n,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(n){this.emit(n.type,n)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(n){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var e=this.window.getSelection();this.triggerSelectedEvent(e)}.bind(this),250)}triggerSelectedEvent(n){var e,u;n&&n.rangeCount>0&&((e=n.getRangeAt(0)).collapsed||(u=new l.a(e,this.cfiBase).toString(),this.emit(c.c.CONTENTS.SELECTED,u),this.emit(c.c.CONTENTS.SELECTED_RANGE,e)))}range(n,e){return new l.a(n).toRange(this.document,e)}cfiFromRange(n,e){return new l.a(n,this.cfiBase,e).toString()}cfiFromNode(n,e){return new l.a(n,this.cfiBase,e).toString()}map(n){return new i.a(n).section()}size(n,e){var u={scale:1,scalable:"no"};this.layoutStyle("scrolling"),n>=0&&(this.width(n),u.width=n,this.css("padding","0 "+n/12+"px")),e>=0&&(this.height(e),u.height=e),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(u)}columns(n,e,u,v,b){let x=Object(r.prefixed)("column-axis"),p=Object(r.prefixed)("column-gap"),S=Object(r.prefixed)("column-width"),j=Object(r.prefixed)("column-fill"),U=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),b==="rtl"&&U==="horizontal"&&this.direction(b),this.width(n),this.height(e),this.viewport({width:n,height:e,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),U==="vertical"?(this.css("padding-top",v/2+"px",!0),this.css("padding-bottom",v/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(x,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",v/2+"px",!0),this.css("padding-right",v/2+"px",!0),this.css(x,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(j,"auto"),this.css(p,v+"px"),this.css(S,u+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(n,e,u){var v="scale("+n+")",b="";this.css("transform-origin","top left"),(e>=0||u>=0)&&(b=" translate("+(e||0)+"px, "+(u||0)+"px )"),this.css("transform",v+b)}fit(n,e,u){var v=this.viewport(),b=parseInt(v.width),x=parseInt(v.height),p=n/b,S=e/x,j=p<S?p:S;if(this.layoutStyle("paginated"),this.width(b),this.height(x),this.overflow("hidden"),this.scaler(j,0,0),this.css("background-size",b*j+"px "+x*j+"px"),this.css("background-color","transparent"),u&&u.properties.includes("page-spread-left")){var U=n-b*j;this.css("margin-left",U+"px")}}direction(n){this.documentElement&&(this.documentElement.style.direction=n)}mapPage(n,e,u,v,b){return new i.a(e,b).page(this,n,u,v)}linksHandler(){Object(h.c)(this.content,n=>{this.emit(c.c.CONTENTS.LINK_CLICKED,n)})}writingMode(n){let e=Object(r.prefixed)("writing-mode");return n&&this.documentElement&&(this.documentElement.style[e]=n),this.window.getComputedStyle(this.documentElement)[e]||""}layoutStyle(n){return n&&(this._layoutStyle=n,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(n,e){return navigator.epubReadingSystem={name:n,version:e,layoutStyle:this.layoutStyle(),hasFeature:function(u){switch(u){case"dom-manipulation":case"layout-changes":case"touch-events":case"mouse-events":case"keyboard-events":return!0;case"spine-scripting":default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}g()(d.prototype),y.a=d},function(k,y,o){Object.defineProperty(y,"__esModule",{value:!0}),y.Underline=y.Highlight=y.Mark=y.Pane=void 0;var f=function(){function s(d,_){for(var n=0;n<_.length;n++){var e=_[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(d,e.key,e)}}return function(d,_,n){return _&&s(d.prototype,_),n&&s(d,n),d}}(),g=l(o(49)),r=l(o(50));function l(s){return s&&s.__esModule?s:{default:s}}function i(s,d){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||typeof d!="object"&&typeof d!="function"?s:d}function h(s,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);s.prototype=Object.create(d&&d.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(s,d):s.__proto__=d)}function c(s,d){if(!(s instanceof d))throw new TypeError("Cannot call a class as a function")}y.Pane=function(){function s(d){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;c(this,s),this.target=d,this.element=g.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),r.default.proxyMouse(this.target,this.marks),this.container=_,this.container.appendChild(this.element),this.render()}return f(s,[{key:"addMark",value:function(d){var _=g.default.createElement("g");return this.element.appendChild(_),d.bind(_,this.container),this.marks.push(d),d.render(),d}},{key:"removeMark",value:function(d){var _=this.marks.indexOf(d);if(_!==-1){var n=d.unbind();this.element.removeChild(n),this.marks.splice(_,1)}}},{key:"render",value:function(){var d,_,n,e;(function(S,j){S.style.setProperty("top",j.top+"px","important"),S.style.setProperty("left",j.left+"px","important"),S.style.setProperty("height",j.height+"px","important"),S.style.setProperty("width",j.width+"px","important")})(this.element,(d=this.target,_=this.container,n=_.getBoundingClientRect(),e=d.getBoundingClientRect(),{top:e.top-n.top,left:e.left-n.left,height:d.scrollHeight,width:d.scrollWidth}));var u=!0,v=!1,b=void 0;try{for(var x,p=this.marks[Symbol.iterator]();!(u=(x=p.next()).done);u=!0)x.value.render()}catch(S){v=!0,b=S}finally{try{!u&&p.return&&p.return()}finally{if(v)throw b}}}}]),s}();var a=y.Mark=function(){function s(){c(this,s),this.element=null}return f(s,[{key:"bind",value:function(d,_){this.element=d,this.container=_}},{key:"unbind",value:function(){var d=this.element;return this.element=null,d}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(d){this.element&&this.element.dispatchEvent(d)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var d=[],_=this.element.firstChild;_;)d.push(_.getBoundingClientRect()),_=_.nextSibling;return d}},{key:"filteredRanges",value:function(){var d=Array.from(this.range.getClientRects());return d.filter(function(_){for(var n=0;n<d.length;n++){if(d[n]===_)return!0;if(e=d[n],(u=_).right<=e.right&&u.left>=e.left&&u.top>=e.top&&u.bottom<=e.bottom)return!1}var e,u;return!0})}}]),s}(),w=y.Highlight=function(s){function d(_,n,e,u){c(this,d);var v=i(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return v.range=_,v.className=n,v.data=e||{},v.attributes=u||{},v}return h(d,s),f(d,[{key:"bind",value:function(_,n){for(var e in function u(v,b,x){v===null&&(v=Function.prototype);var p=Object.getOwnPropertyDescriptor(v,b);if(p===void 0){var S=Object.getPrototypeOf(v);return S===null?void 0:u(S,b,x)}if("value"in p)return p.value;var j=p.get;return j!==void 0?j.call(x):void 0}(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"bind",this).call(this,_,n),this.data)this.data.hasOwnProperty(e)&&(this.element.dataset[e]=this.data[e]);for(var e in this.attributes)this.attributes.hasOwnProperty(e)&&this.element.setAttribute(e,this.attributes[e]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var _=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),e=this.element.getBoundingClientRect(),u=this.container.getBoundingClientRect(),v=0,b=n.length;v<b;v++){var x=n[v],p=g.default.createElement("rect");p.setAttribute("x",x.left-e.left+u.left),p.setAttribute("y",x.top-e.top+u.top),p.setAttribute("height",x.height),p.setAttribute("width",x.width),_.appendChild(p)}this.element.appendChild(_)}}]),d}(a);y.Underline=function(s){function d(_,n,e,u){return c(this,d),i(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,_,n,e,u))}return h(d,s),f(d,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var _=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),e=this.element.getBoundingClientRect(),u=this.container.getBoundingClientRect(),v=0,b=n.length;v<b;v++){var x=n[v],p=g.default.createElement("rect");p.setAttribute("x",x.left-e.left+u.left),p.setAttribute("y",x.top-e.top+u.top),p.setAttribute("height",x.height),p.setAttribute("width",x.width),p.setAttribute("fill","none");var S=g.default.createElement("line");S.setAttribute("x1",x.left-e.left+u.left),S.setAttribute("x2",x.left-e.left+u.left+x.width),S.setAttribute("y1",x.top-e.top+u.top+x.height-1),S.setAttribute("y2",x.top-e.top+u.top+x.height-1),S.setAttribute("stroke-width",1),S.setAttribute("stroke","black"),S.setAttribute("stroke-linecap","square"),_.appendChild(p),_.appendChild(S)}this.element.appendChild(_)}}]),d}(w)},function(k,y,o){function f(l,i){return i===void 0&&(i=Object),i&&typeof i.freeze=="function"?i.freeze(l):l}var g=f({HTML:"text/html",isHTML:function(l){return l===g.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=f({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(l){return l===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});y.freeze=f,y.MIME_TYPE=g,y.NAMESPACE=r},function(k,y,o){var f=o(25);y.DOMImplementation=f.DOMImplementation,y.XMLSerializer=f.XMLSerializer,y.DOMParser=o(46).DOMParser},function(k,y,o){var f=o(3),g=o.n(f),r=o(0),l=o(6),i=o(2),h=o(9),c=o(1);class a{constructor(p){this.settings=p,this.name=p.layout||"reflowable",this._spread=p.spread!=="none",this._minSpreadWidth=p.minSpreadWidth||800,this._evenSpreads=p.evenSpreads||!1,p.flow==="scrolled"||p.flow==="scrolled-continuous"||p.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(p){return p!==void 0&&(this._flow=p==="scrolled"||p==="scrolled-continuous"||p==="scrolled-doc"?"scrolled":"paginated",this.update({flow:this._flow})),this._flow}spread(p,S){return p&&(this._spread=p!=="none",this.update({spread:this._spread})),S>=0&&(this._minSpreadWidth=S),this._spread}calculate(p,S,j){var U,P,W,E,X=1,Q=j||0,J=p,ct=S,et=Math.floor(J/12);X=this._spread&&J>=this._minSpreadWidth?2:1,this.name!=="reflowable"||this._flow!=="paginated"||j>=0||(Q=et%2==0?et:et-1),this.name==="pre-paginated"&&(Q=0),X>1?W=(U=J/X-Q)+Q:(U=J,W=J),this.name==="pre-paginated"&&X>1&&(J=U),P=U*X+Q,E=J,this.width=J,this.height=ct,this.spreadWidth=P,this.pageWidth=W,this.delta=E,this.columnWidth=U,this.gap=Q,this.divisor=X,this.update({width:J,height:ct,spreadWidth:P,pageWidth:W,delta:E,columnWidth:U,gap:Q,divisor:X})}format(p,S,j){return this.name==="pre-paginated"?p.fit(this.columnWidth,this.height,S):this._flow==="paginated"?p.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):j&&j==="horizontal"?p.size(null,this.height):p.size(this.width,null)}count(p,S){let j,U;return this.name==="pre-paginated"?(j=1,U=1):this._flow==="paginated"?(S=S||this.delta,j=Math.ceil(p/S),U=j*this.divisor):(S=S||this.height,j=Math.ceil(p/S),U=j),{spreads:j,pages:U}}update(p){if(Object.keys(p).forEach(S=>{this.props[S]===p[S]&&delete p[S]}),Object.keys(p).length>0){let S=Object(r.extend)(this.props,p);this.emit(c.c.LAYOUT.UPDATED,S,p)}}}g()(a.prototype);var w=a,s=o(5),d=class{constructor(x){this.rendition=x,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0)return arguments.length===1&&typeof arguments[0]=="object"?this.registerThemes(arguments[0]):arguments.length===1&&typeof arguments[0]=="string"?this.default(arguments[0]):arguments.length===2&&typeof arguments[1]=="string"?this.registerUrl(arguments[0],arguments[1]):arguments.length===2&&typeof arguments[1]=="object"?this.registerRules(arguments[0],arguments[1]):void 0}default(x){if(x)return typeof x=="string"?this.registerUrl("default",x):typeof x=="object"?this.registerRules("default",x):void 0}registerThemes(x){for(var p in x)x.hasOwnProperty(p)&&(typeof x[p]=="string"?this.registerUrl(p,x[p]):this.registerRules(p,x[p]))}registerCss(x,p){this._themes[x]={serialized:p},(this._injected[x]||x=="default")&&this.update(x)}registerUrl(x,p){var S=new s.a(p);this._themes[x]={url:S.toString()},(this._injected[x]||x=="default")&&this.update(x)}registerRules(x,p){this._themes[x]={rules:p},(this._injected[x]||x=="default")&&this.update(x)}select(x){var p=this._current;this._current=x,this.update(x),this.rendition.getContents().forEach(S=>{S.removeClass(p),S.addClass(x)})}update(x){this.rendition.getContents().forEach(p=>{this.add(x,p)})}inject(x){var p,S=[],j=this._themes;for(var U in j)!j.hasOwnProperty(U)||U!==this._current&&U!=="default"||(((p=j[U]).rules&&Object.keys(p.rules).length>0||p.url&&S.indexOf(p.url)===-1)&&this.add(U,x),this._injected.push(U));this._current!="default"&&x.addClass(this._current)}add(x,p){var S=this._themes[x];S&&p&&(S.url?p.addStylesheet(S.url):S.serialized?(p.addStylesheetCss(S.serialized,x),S.injected=!0):S.rules&&(p.addStylesheetRules(S.rules,x),S.injected=!0))}override(x,p,S){var j=this.rendition.getContents();this._overrides[x]={value:p,priority:S===!0},j.forEach(U=>{U.css(x,this._overrides[x].value,this._overrides[x].priority)})}removeOverride(x){var p=this.rendition.getContents();delete this._overrides[x],p.forEach(S=>{S.css(x)})}overrides(x){var p=this._overrides;for(var S in p)p.hasOwnProperty(S)&&x.css(S,p[S].value,p[S].priority)}fontSize(x){this.override("font-size",x)}font(x){this.override("font-family",x,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}};o(12);class _{constructor({type:p,cfiRange:S,data:j,sectionIndex:U,cb:P,className:W,styles:E}){this.type=p,this.cfiRange=S,this.data=j,this.sectionIndex=U,this.mark=void 0,this.cb=P,this.className=W,this.styles=E}update(p){this.data=p}attach(p){let S,{cfiRange:j,data:U,type:P,mark:W,cb:E,className:X,styles:Q}=this;return P==="highlight"?S=p.highlight(j,U,E,X,Q):P==="underline"?S=p.underline(j,U,E,X,Q):P==="mark"&&(S=p.mark(j,U,E)),this.mark=S,this.emit(c.c.ANNOTATION.ATTACH,S),S}detach(p){let S,{cfiRange:j,type:U}=this;return p&&(U==="highlight"?S=p.unhighlight(j):U==="underline"?S=p.ununderline(j):U==="mark"&&(S=p.unmark(j))),this.mark=void 0,this.emit(c.c.ANNOTATION.DETACH,S),S}text(){}}g()(_.prototype);var n=class{constructor(x){this.rendition=x,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(x,p,S,j,U,P){let W=encodeURI(p+x),E=new i.a(p).spinePos,X=new _({type:x,cfiRange:p,data:S,sectionIndex:E,cb:j,className:U,styles:P});return this._annotations[W]=X,E in this._annotationsBySectionIndex?this._annotationsBySectionIndex[E].push(W):this._annotationsBySectionIndex[E]=[W],this.rendition.views().forEach(Q=>{X.sectionIndex===Q.index&&X.attach(Q)}),X}remove(x,p){let S=encodeURI(x+p);if(S in this._annotations){let j=this._annotations[S];if(p&&j.type!==p)return;this.rendition.views().forEach(U=>{this._removeFromAnnotationBySectionIndex(j.sectionIndex,S),j.sectionIndex===U.index&&j.detach(U)}),delete this._annotations[S]}}_removeFromAnnotationBySectionIndex(x,p){this._annotationsBySectionIndex[x]=this._annotationsAt(x).filter(S=>S!==p)}_annotationsAt(x){return this._annotationsBySectionIndex[x]}highlight(x,p,S,j,U){return this.add("highlight",x,p,S,j,U)}underline(x,p,S,j,U){return this.add("underline",x,p,S,j,U)}mark(x,p,S){return this.add("mark",x,p,S)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(x){let p=x.index;p in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[p].forEach(S=>{this._annotations[S].attach(x)})}clear(x){let p=x.index;p in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[p].forEach(S=>{this._annotations[S].detach(x)})}show(){}hide(){}},e=o(20),u=o(10),v=o(22);class b{constructor(p,S){this.settings=Object(r.extend)(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),Object(r.extend)(this.settings,S),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=p,this.hooks={},this.hooks.display=new l.a(this),this.hooks.serialize=new l.a(this),this.hooks.content=new l.a(this),this.hooks.unloaded=new l.a(this),this.hooks.layout=new l.a(this),this.hooks.render=new l.a(this),this.hooks.show=new l.a(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new d(this),this.annotations=new n(this),this.epubcfi=new i.a,this.q=new h.a(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new r.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(p){this.manager=p}requireManager(p){return typeof p=="string"&&p==="default"?u.a:typeof p=="string"&&p==="continuous"?v.a:p}requireView(p){return typeof p=="string"&&p==="iframe"?e.a:p}start(){switch(this.settings.layout||this.book.package.metadata.layout!=="pre-paginated"&&this.book.displayOptions.fixedLayout!=="true"||(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(c.c.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(c.c.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(c.c.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(c.c.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(c.c.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(c.c.RENDITION.STARTED),this.starting.resolve()}attachTo(p){return this.q.enqueue(function(){this.manager.render(p,{width:this.settings.width,height:this.settings.height}),this.emit(c.c.RENDITION.ATTACHED)}.bind(this))}display(p){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,p)}_display(p){if(this.book){this.epubcfi.isCfiString(p);var S,j=new r.defer,U=j.promise;return this.displaying=j,this.book.locations.length()&&Object(r.isFloat)(p)&&(p=this.book.locations.cfiFromPercentage(parseFloat(p))),(S=this.book.spine.get(p))?(this.manager.display(S,p).then(()=>{j.resolve(S),this.displaying=void 0,this.emit(c.c.RENDITION.DISPLAYED,S),this.reportLocation()},P=>{this.emit(c.c.RENDITION.DISPLAY_ERROR,P)}),U):(j.reject(new Error("No Section Found")),U)}}afterDisplayed(p){p.on(c.c.VIEWS.MARK_CLICKED,(S,j)=>this.triggerMarkEvent(S,j,p.contents)),this.hooks.render.trigger(p,this).then(()=>{p.contents?this.hooks.content.trigger(p.contents,this).then(()=>{this.emit(c.c.RENDITION.RENDERED,p.section,p)}):this.emit(c.c.RENDITION.RENDERED,p.section,p)})}afterRemoved(p){this.hooks.unloaded.trigger(p,this).then(()=>{this.emit(c.c.RENDITION.REMOVED,p.section,p)})}onResized(p,S){this.emit(c.c.RENDITION.RESIZED,{width:p.width,height:p.height},S),this.location&&this.location.start&&this.display(S||this.location.start.cfi)}onOrientationChange(p){this.emit(c.c.RENDITION.ORIENTATION_CHANGE,p)}moveTo(p){this.manager.moveTo(p)}resize(p,S,j){p&&(this.settings.width=p),S&&(this.settings.height=S),this.manager.resize(p,S,j)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(p){var S=this.settings.layout||p.layout||"reflowable",j=this.settings.spread||p.spread||"auto",U=this.settings.orientation||p.orientation||"auto",P=this.settings.flow||p.flow||"auto",W=p.viewport||"",E=this.settings.minSpreadWidth||p.minSpreadWidth||800,X=this.settings.direction||p.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height),{layout:S,spread:j,orientation:U,flow:P,viewport:W,minSpreadWidth:E,direction:X}}flow(p){var S=p;p!=="scrolled"&&p!=="scrolled-doc"&&p!=="scrolled-continuous"||(S="scrolled"),p!=="auto"&&p!=="paginated"||(S="paginated"),this.settings.flow=p,this._layout&&this._layout.flow(S),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(S),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(p){return p&&(this._layout=new w(p),this._layout.spread(p.spread,this.settings.minSpreadWidth),this._layout.on(c.c.LAYOUT.UPDATED,(S,j)=>{this.emit(c.c.RENDITION.LAYOUT,S,j)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(p,S){this.settings.spread=p,S&&(this.settings.minSpreadWidth=S),this._layout&&this._layout.spread(p,S),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(p){this.settings.direction=p||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue(function(){requestAnimationFrame(function(){var p=this.manager.currentLocation();if(p&&p.then&&typeof p.then=="function")p.then(function(S){let j=this.located(S);j&&j.start&&j.end&&(this.location=j,this.emit(c.c.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(c.c.RENDITION.RELOCATED,this.location))}.bind(this));else if(p){let S=this.located(p);if(!S||!S.start||!S.end)return;this.location=S,this.emit(c.c.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(c.c.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}currentLocation(){var p=this.manager.currentLocation();if(p&&p.then&&typeof p.then=="function")p.then(function(S){return this.located(S)}.bind(this));else if(p)return this.located(p)}located(p){if(!p.length)return{};let S=p[0],j=p[p.length-1],U={start:{index:S.index,href:S.href,cfi:S.mapping.start,displayed:{page:S.pages[0]||1,total:S.totalPages}},end:{index:j.index,href:j.href,cfi:j.mapping.end,displayed:{page:j.pages[j.pages.length-1]||1,total:j.totalPages}}},P=this.book.locations.locationFromCfi(S.mapping.start),W=this.book.locations.locationFromCfi(j.mapping.end);P!=null&&(U.start.location=P,U.start.percentage=this.book.locations.percentageFromLocation(P)),W!=null&&(U.end.location=W,U.end.percentage=this.book.locations.percentageFromLocation(W));let E=this.book.pageList.pageFromCfi(S.mapping.start),X=this.book.pageList.pageFromCfi(j.mapping.end);return E!=-1&&(U.start.page=E),X!=-1&&(U.end.page=X),j.index===this.book.spine.last().index&&U.end.displayed.page>=U.end.displayed.total&&(U.atEnd=!0),S.index===this.book.spine.first().index&&U.start.displayed.page===1&&(U.atStart=!0),U}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(p){c.a.forEach(S=>{p.on(S,j=>this.triggerViewEvent(j,p))}),p.on(c.c.CONTENTS.SELECTED,S=>this.triggerSelectedEvent(S,p))}triggerViewEvent(p,S){this.emit(p.type,p,S)}triggerSelectedEvent(p,S){this.emit(c.c.RENDITION.SELECTED,p,S)}triggerMarkEvent(p,S,j){this.emit(c.c.RENDITION.MARK_CLICKED,p,S,j)}getRange(p,S){var j=new i.a(p),U=this.manager.visible().filter(function(P){if(j.spinePos===P.index)return!0});if(U.length)return U[0].contents.range(j,S)}adjustImages(p){if(this._layout.name==="pre-paginated")return new Promise(function(P){P()});let S=p.window.getComputedStyle(p.content,null),j=.95*(p.content.offsetHeight-(parseFloat(S.paddingTop)+parseFloat(S.paddingBottom))),U=parseFloat(S.paddingLeft)+parseFloat(S.paddingRight);return p.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-U+"px":"100%")+"!important","max-height":j+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-U+"px":"100%")+"!important","max-height":j+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(P,W){setTimeout(function(){P()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(p){p&&p.on(c.c.CONTENTS.LINK_CLICKED,S=>{let j=this.book.path.relative(S);this.display(j)})}injectStylesheet(p,S){let j=p.createElement("link");j.setAttribute("type","text/css"),j.setAttribute("rel","stylesheet"),j.setAttribute("href",this.settings.stylesheet),p.getElementsByTagName("head")[0].appendChild(j)}injectScript(p,S){let j=p.createElement("script");j.setAttribute("type","text/javascript"),j.setAttribute("src",this.settings.script),j.textContent=" ",p.getElementsByTagName("head")[0].appendChild(j)}injectIdentifier(p,S){let j=this.book.packaging.metadata.identifier,U=p.createElement("meta");U.setAttribute("name","dc.relation.ispartof"),j&&U.setAttribute("content",j),p.getElementsByTagName("head")[0].appendChild(U)}}g()(b.prototype),y.a=b},function(k,y){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}k.exports=o},function(k,y,o){var f=o(38)();k.exports=function(g){return g!==f&&g!==null}},function(k,y){k.exports=function(o){var f=typeof o;return o!=null&&(f=="object"||f=="function")}},function(k,y,o){var f=o(3),g=o.n(f),r=o(0),l=o(2),i=o(12),h=o(1),c=o(13);class a{constructor(s,d){this.settings=Object(r.extend)({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},d||{}),this.id="epubjs-view-"+Object(r.uuid)(),this.section=s,this.index=s.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new l.a,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(s){var d=document.createElement("div");return d.classList.add("epub-view"),d.style.height="0px",d.style.width="0px",d.style.overflow="hidden",d.style.position="relative",d.style.display="block",d.style.flex=s&&s=="horizontal"?"none":"initial",d}create(){return this.iframe||(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Object(r.bounds)(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write")),this.iframe}render(s,d){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(s)),this.sectionRender.then(function(_){return this.load(_)}.bind(this)).then(function(){let _,n=this.contents.writingMode();return _=this.settings.flow==="scrolled"?n.indexOf("vertical")===0?"horizontal":"vertical":n.indexOf("vertical")===0?"vertical":"horizontal",n.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(_),this.emit(h.c.VIEWS.AXIS,_),this.setWritingMode(n),this.emit(h.c.VIEWS.WRITING_MODE,n),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((e,u)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),e()})}.bind(this),function(_){return this.emit(h.c.VIEWS.LOAD_ERROR,_),new Promise((n,e)=>{e(_)})}.bind(this)).then(function(){this.emit(h.c.VIEWS.RENDERED,this.section)}.bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(s,d){var _=s||this.settings.width,n=d||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",_,n):this.settings.axis==="horizontal"?this.lock("height",_,n):this.lock("width",_,n),this.settings.width=_,this.settings.height=n}lock(s,d,_){var n,e=Object(r.borders)(this.element);n=this.iframe?Object(r.borders)(this.iframe):{width:0,height:0},s=="width"&&Object(r.isNumber)(d)&&(this.lockedWidth=d-e.width-n.width),s=="height"&&Object(r.isNumber)(_)&&(this.lockedHeight=_-e.height-n.height),s==="both"&&Object(r.isNumber)(d)&&Object(r.isNumber)(_)&&(this.lockedWidth=d-e.width-n.width,this.lockedHeight=_-e.height-n.height),this.displayed&&this.iframe&&this.expand()}expand(s){var d,_=this.lockedWidth,n=this.lockedHeight;this.iframe&&!this._expanding&&(this._expanding=!0,this.layout.name==="pre-paginated"?(_=this.layout.columnWidth,n=this.layout.height):this.settings.axis==="horizontal"?((_=this.contents.textWidth())%this.layout.pageWidth>0&&(_=Math.ceil(_/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(d=_/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&d%2>0&&(_+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(n=this.contents.textHeight(),this.settings.flow==="paginated"&&n%this.layout.height>0&&(n=Math.ceil(n/this.layout.height)*this.layout.height)),(this._needsReframe||_!=this._width||n!=this._height)&&this.reframe(_,n),this._expanding=!1)}reframe(s,d){var _;Object(r.isNumber)(s)&&(this.element.style.width=s+"px",this.iframe.style.width=s+"px",this._width=s),Object(r.isNumber)(d)&&(this.element.style.height=d+"px",this.iframe.style.height=d+"px",this._height=d),_={width:s,height:d,widthDelta:this.prevBounds?s-this.prevBounds.width:s,heightDelta:this.prevBounds?d-this.prevBounds.height:d},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let n;for(let e in this.marks)this.marks.hasOwnProperty(e)&&(n=this.marks[e],this.placeMark(n.element,n.range))}),this.onResize(this,_),this.emit(h.c.VIEWS.RESIZED,_),this.prevBounds=_,this.elementBounds=Object(r.bounds)(this.element)}load(s){var d=new r.defer,_=d.promise;if(!this.iframe)return d.reject(new Error("No Iframe Available")),_;if(this.iframe.onload=function(e){this.onLoad(e,d)}.bind(this),this.settings.method==="blobUrl")this.blobUrl=Object(r.createBlobUrl)(s,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=s,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return d.reject(new Error("No Document Available")),_;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var n=this;MSApp.execUnsafeLocalFunction(function(){n.iframe.contentDocument.write(s)})}else this.iframe.contentDocument.write(s);this.iframe.contentDocument.close()}return _}onLoad(s,d){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new i.a(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var _=this.document.querySelector("link[rel='canonical']");_?_.setAttribute("href",this.section.canonical):((_=this.document.createElement("link")).setAttribute("rel","canonical"),_.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(_)),this.contents.on(h.c.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(h.c.CONTENTS.RESIZE,n=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),d.resolve(this.contents)}setLayout(s){this.layout=s,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(s){this.settings.axis=s,this.element.style.flex=s=="horizontal"?"none":"initial",this.size()}setWritingMode(s){this.writingMode=s}addListeners(){}removeListeners(s){}display(s){var d=new r.defer;return this.displayed?d.resolve(this):this.render(s).then(function(){this.emit(h.c.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,d.resolve(this)}.bind(this),function(_){d.reject(_,this)}),d.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(h.c.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(h.c.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(s){this.iframe.getBoundingClientRect();var d=this.contents.locationOf(s,this.settings.ignoreClass);return{left:d.left,top:d.top}}onDisplayed(s){}onResize(s,d){}bounds(s){return!s&&this.elementBounds||(this.elementBounds=Object(r.bounds)(this.element)),this.elementBounds}highlight(s,d={},_,n="epubjs-hl",e={}){if(!this.contents)return;const u=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},e);let v=this.contents.range(s),b=()=>{this.emit(h.c.VIEWS.MARK_CLICKED,s,d)};d.epubcfi=s,this.pane||(this.pane=new c.Pane(this.iframe,this.element));let x=new c.Highlight(v,n,d,u),p=this.pane.addMark(x);return this.highlights[s]={mark:p,element:p.element,listeners:[b,_]},p.element.setAttribute("ref",n),p.element.addEventListener("click",b),p.element.addEventListener("touchstart",b),_&&(p.element.addEventListener("click",_),p.element.addEventListener("touchstart",_)),p}underline(s,d={},_,n="epubjs-ul",e={}){if(!this.contents)return;const u=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},e);let v=this.contents.range(s),b=()=>{this.emit(h.c.VIEWS.MARK_CLICKED,s,d)};d.epubcfi=s,this.pane||(this.pane=new c.Pane(this.iframe,this.element));let x=new c.Underline(v,n,d,u),p=this.pane.addMark(x);return this.underlines[s]={mark:p,element:p.element,listeners:[b,_]},p.element.setAttribute("ref",n),p.element.addEventListener("click",b),p.element.addEventListener("touchstart",b),_&&(p.element.addEventListener("click",_),p.element.addEventListener("touchstart",_)),p}mark(s,d={},_){if(!this.contents)return;if(s in this.marks)return this.marks[s];let n=this.contents.range(s);if(!n)return;let e=n.commonAncestorContainer,u=e.nodeType===1?e:e.parentNode,v=x=>{this.emit(h.c.VIEWS.MARK_CLICKED,s,d)};n.collapsed&&e.nodeType===1?(n=new Range,n.selectNodeContents(e)):n.collapsed&&(n=new Range,n.selectNodeContents(u));let b=this.document.createElement("a");return b.setAttribute("ref","epubjs-mk"),b.style.position="absolute",b.dataset.epubcfi=s,d&&Object.keys(d).forEach(x=>{b.dataset[x]=d[x]}),_&&(b.addEventListener("click",_),b.addEventListener("touchstart",_)),b.addEventListener("click",v),b.addEventListener("touchstart",v),this.placeMark(b,n),this.element.appendChild(b),this.marks[s]={element:b,range:n,listeners:[v,_]},u}placeMark(s,d){let _,n,e;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let v=d.getBoundingClientRect();_=v.top,n=v.right}else{let v,b=d.getClientRects();for(var u=0;u!=b.length;u++)v=b[u],(!e||v.left<e)&&(e=v.left,n=Math.ceil(e/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,_=v.top)}s.style.top=_+"px",s.style.left=n+"px"}unhighlight(s){let d;s in this.highlights&&(d=this.highlights[s],this.pane.removeMark(d.mark),d.listeners.forEach(_=>{_&&(d.element.removeEventListener("click",_),d.element.removeEventListener("touchstart",_))}),delete this.highlights[s])}ununderline(s){let d;s in this.underlines&&(d=this.underlines[s],this.pane.removeMark(d.mark),d.listeners.forEach(_=>{_&&(d.element.removeEventListener("click",_),d.element.removeEventListener("touchstart",_))}),delete this.underlines[s])}unmark(s){let d;s in this.marks&&(d=this.marks[s],this.element.removeChild(d.element),d.listeners.forEach(_=>{_&&(d.element.removeEventListener("click",_),d.element.removeEventListener("touchstart",_))}),delete this.marks[s])}destroy(){for(let s in this.highlights)this.unhighlight(s);for(let s in this.underlines)this.ununderline(s);for(let s in this.marks)this.unmark(s);this.blobUrl&&Object(r.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}g()(a.prototype),y.a=a},function(k,y,o){var f=o(19),g=o(51),r=o(53),l=Math.max,i=Math.min;k.exports=function(h,c,a){var w,s,d,_,n,e,u=0,v=!1,b=!1,x=!0;if(typeof h!="function")throw new TypeError("Expected a function");function p(E){var X=w,Q=s;return w=s=void 0,u=E,_=h.apply(Q,X)}function S(E){return u=E,n=setTimeout(U,c),v?p(E):_}function j(E){var X=E-e;return e===void 0||X>=c||X<0||b&&E-u>=d}function U(){var E=g();if(j(E))return P(E);n=setTimeout(U,function(X){var Q=c-(X-e);return b?i(Q,d-(X-u)):Q}(E))}function P(E){return n=void 0,x&&w?p(E):(w=s=void 0,_)}function W(){var E=g(),X=j(E);if(w=arguments,s=this,e=E,X){if(n===void 0)return S(e);if(b)return clearTimeout(n),n=setTimeout(U,c),p(e)}return n===void 0&&(n=setTimeout(U,c)),_}return c=r(c)||0,f(a)&&(v=!!a.leading,d=(b="maxWait"in a)?l(r(a.maxWait)||0,c):d,x="trailing"in a?!!a.trailing:x),W.cancel=function(){n!==void 0&&clearTimeout(n),u=0,w=e=s=n=void 0},W.flush=function(){return n===void 0?_:P(g())},W}},function(k,y,o){var f=o(0),g=o(10),r=o(1),l=o(3),i=o.n(l);const h=Math.PI/2,c={easeOutSine:function(n){return Math.sin(n*h)},easeInOutSine:function(n){return-.5*(Math.cos(Math.PI*n)-1)},easeInOutQuint:function(n){return(n/=.5)<1?.5*Math.pow(n,5):.5*(Math.pow(n-2,5)+2)},easeInCubic:function(n){return Math.pow(n,3)}};class a{constructor(e,u){this.settings=Object(f.extend)({duration:80,minVelocity:.2,minDistance:10,easing:c.easeInCubic},u||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=2*this.settings.duration,this.isVertical=this.manager.settings.axis==="vertical",this.manager.isPaginated&&!this.isVertical&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(r.c.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(r.c.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let u=e.contents;["touchstart","touchmove","touchend"].forEach(v=>{u.on(v,b=>this.triggerViewEvent(b,u))})}triggerViewEvent(e,u){this.emit(e.type,e,u)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:u,screenY:v}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=u,this.startTouchY=v,this.startTime=this.now()),this.endTouchX=u,this.endTouchY=v,this.endTime=this.now()}onTouchMove(e){let{screenX:u,screenY:v}=e.touches[0],b=Math.abs(v-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&b<10&&(this.element.scrollLeft-=u-this.endTouchX),this.endTouchX=u,this.endTouchY=v,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let u=this.wasSwiped();u!==0?this.snap(u):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,u=this.endTouchX-this.startTouchX,v=Math.abs(u),b=u/(this.endTime-this.startTime),x=this.settings.minVelocity;return v<=this.settings.minDistance||v>=e?0:b>x?-1:b<-x?1:void 0}needsSnap(){return this.scrollLeft%(this.layout.pageWidth*this.layout.divisor)!=0}snap(e=0){let u=this.scrollLeft,v=this.layout.pageWidth*this.layout.divisor,b=Math.round(u/v)*v;return e&&(b+=e*v),this.smoothScrollTo(b)}smoothScrollTo(e){const u=new f.defer,v=this.scrollLeft,b=this.now(),x=this.settings.duration,p=this.settings.easing;return this.snapping=!0,function S(){const j=this.now(),U=Math.min(1,(j-b)/x);if(p(U),this.touchCanceler||this.resizeCanceler)return this.resizeCanceler=!1,this.snapping=!1,void u.resolve();U<1?(window.requestAnimationFrame(S.bind(this)),this.scrollTo(v+(e-v)*U,0)):(this.scrollTo(e,0),this.snapping=!1,u.resolve())}.call(this),u.promise}scrollTo(e=0,u=0){this.fullsize?window.scroll(e,u):(this.scroller.scrollLeft=e,this.scroller.scrollTop=u)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}i()(a.prototype);var w=a,s=o(21),d=o.n(s);class _ extends g.a{constructor(e){super(e),this.name="continuous",this.settings=Object(f.extend)(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),Object(f.extend)(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,u){return g.a.prototype.display.call(this,e,u).then(function(){return this.fill()}.bind(this))}fill(e){var u=e||new f.defer;return this.q.enqueue(()=>this.check()).then(v=>{v?this.fill(u):u.resolve()}),u.promise}moveTo(e){var u=0,v=0;this.isPaginated?(u=Math.floor(e.left/this.layout.delta)*this.layout.delta,this.settings.offsetDelta):(v=e.top,e.top,this.settings.offsetDelta),(u>0||v>0)&&this.scrollBy(u,v,!0)}afterResized(e){this.emit(r.c.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var u=this.createView(e);return this.views.append(u),u.on(r.c.VIEWS.RESIZED,v=>{u.expanded=!0}),u.on(r.c.VIEWS.AXIS,v=>{this.updateAxis(v)}),u.on(r.c.VIEWS.WRITING_MODE,v=>{this.updateWritingMode(v)}),u.onDisplayed=this.afterDisplayed.bind(this),u.onResize=this.afterResized.bind(this),u.display(this.request)}append(e){var u=this.createView(e);return u.on(r.c.VIEWS.RESIZED,v=>{u.expanded=!0}),u.on(r.c.VIEWS.AXIS,v=>{this.updateAxis(v)}),u.on(r.c.VIEWS.WRITING_MODE,v=>{this.updateWritingMode(v)}),this.views.append(u),u.onDisplayed=this.afterDisplayed.bind(this),u}prepend(e){var u=this.createView(e);return u.on(r.c.VIEWS.RESIZED,v=>{this.counter(v),u.expanded=!0}),u.on(r.c.VIEWS.AXIS,v=>{this.updateAxis(v)}),u.on(r.c.VIEWS.WRITING_MODE,v=>{this.updateWritingMode(v)}),this.views.prepend(u),u.onDisplayed=this.afterDisplayed.bind(this),u}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var u,v=this.bounds(),b=this.views.all(),x=b.length,p=[],S=e!==void 0?e:this.settings.offset||0,j=new f.defer,U=[],P=0;P<x;P++)if(u=b[P],this.isVisible(u,S,S,v)===!0){if(u.displayed)u.show();else{let W=u.display(this.request).then(function(E){E.show()},E=>{u.hide()});U.push(W)}p.push(u)}else this.q.enqueue(u.destroy.bind(u)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return U.length?Promise.all(U).catch(W=>{j.reject(W)}):(j.resolve(),j.promise)}check(e,u){var v=new f.defer,b=[],x=this.settings.axis==="horizontal",p=this.settings.offset||0;e&&x&&(p=e),u&&!x&&(p=u);var S=this._bounds;let j=x?this.scrollLeft:this.scrollTop,U=x?Math.floor(S.width):S.height,P=x?this.container.scrollWidth:this.container.scrollHeight,W=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",E=this.settings.rtlScrollType,X=this.settings.direction==="rtl";this.settings.fullsize?(x&&X&&E==="negative"||!x&&X&&E==="default")&&(j*=-1):(X&&E==="default"&&W==="horizontal"&&(j=P-U-j),X&&E==="negative"&&W==="horizontal"&&(j*=-1));let Q=()=>{let et=this.views.first(),ht=et&&et.section.prev();ht&&b.push(this.prepend(ht))},J=j-p;j+U+p>=P&&(()=>{let et=this.views.last(),ht=et&&et.section.next();ht&&b.push(this.append(ht))})(),J<0&&Q();let ct=b.map(et=>et.display(this.request));return b.length?Promise.all(ct).then(()=>this.check()).then(()=>this.update(p),et=>et):(this.q.enqueue(function(){this.update()}.bind(this)),v.resolve(!1),v.promise)}trim(){for(var e=new f.defer,u=this.views.displayed(),v=u[0],b=u[u.length-1],x=this.views.indexOf(v),p=this.views.indexOf(b),S=this.views.slice(0,x),j=this.views.slice(p+1),U=0;U<S.length-1;U++)this.erase(S[U],S);for(var P=1;P<j.length;P++)this.erase(j[P]);return e.resolve(),e.promise}erase(e,u){var v,b;this.settings.fullsize?(v=window.scrollY,b=window.scrollX):(v=this.container.scrollTop,b=this.container.scrollLeft);var x=e.bounds();this.views.remove(e),u&&(this.settings.axis==="vertical"?this.scrollTo(0,v-x.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(b+Math.floor(x.width),0,!0):this.scrollTo(b,0,!0):this.scrollTo(b-Math.floor(x.width),0,!0))}addEventListeners(e){window.addEventListener("unload",function(u){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new w(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=f.requestAnimationFrame;let u=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*u,this.scrollLeft=window.scrollX*u):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=d()(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){(this.settings.fullsize?window:this.container).removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,u,v=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*v,u=window.scrollX*v):(e=this.container.scrollTop,u=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=u,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(u-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=u,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue(function(){return this.check()}.bind(this)),this.emit(r.c.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(r.c.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new w(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}y.a=_},function(k,y,o){(function(f){k.exports=function g(r,l,i){function h(w,s){if(!l[w]){if(!r[w]){if(c)return c(w,!0);var d=new Error("Cannot find module '"+w+"'");throw d.code="MODULE_NOT_FOUND",d}var _=l[w]={exports:{}};r[w][0].call(_.exports,function(n){var e=r[w][1][n];return h(e||n)},_,_.exports,g,r,l,i)}return l[w].exports}for(var c=!1,a=0;a<i.length;a++)h(i[a]);return h}({1:[function(g,r,l){(function(i){var h,c,a=i.MutationObserver||i.WebKitMutationObserver;if(a){var w=0,s=new a(e),d=i.document.createTextNode("");s.observe(d,{characterData:!0}),h=function(){d.data=w=++w%2}}else if(i.setImmediate||i.MessageChannel===void 0)h="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var u=i.document.createElement("script");u.onreadystatechange=function(){e(),u.onreadystatechange=null,u.parentNode.removeChild(u),u=null},i.document.documentElement.appendChild(u)}:function(){setTimeout(e,0)};else{var _=new i.MessageChannel;_.port1.onmessage=e,h=function(){_.port2.postMessage(0)}}var n=[];function e(){var u,v;c=!0;for(var b=n.length;b;){for(v=n,n=[],u=-1;++u<b;)v[u]();b=n.length}c=!1}r.exports=function(u){n.push(u)!==1||c||h()}}).call(this,f!==void 0?f:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(g,r,l){var i=g(1);function h(){}var c={},a=["REJECTED"],w=["FULFILLED"],s=["PENDING"];function d(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,b!==h&&u(this,b)}function _(b,x,p){this.promise=b,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof p=="function"&&(this.onRejected=p,this.callRejected=this.otherCallRejected)}function n(b,x,p){i(function(){var S;try{S=x(p)}catch(j){return c.reject(b,j)}S===b?c.reject(b,new TypeError("Cannot resolve promise with itself")):c.resolve(b,S)})}function e(b){var x=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof x=="function")return function(){x.apply(b,arguments)}}function u(b,x){var p=!1;function S(P){p||(p=!0,c.reject(b,P))}function j(P){p||(p=!0,c.resolve(b,P))}var U=v(function(){x(j,S)});U.status==="error"&&S(U.value)}function v(b,x){var p={};try{p.value=b(x),p.status="success"}catch(S){p.status="error",p.value=S}return p}r.exports=d,d.prototype.catch=function(b){return this.then(null,b)},d.prototype.then=function(b,x){if(typeof b!="function"&&this.state===w||typeof x!="function"&&this.state===a)return this;var p=new this.constructor(h);return this.state!==s?n(p,this.state===w?b:x,this.outcome):this.queue.push(new _(p,b,x)),p},_.prototype.callFulfilled=function(b){c.resolve(this.promise,b)},_.prototype.otherCallFulfilled=function(b){n(this.promise,this.onFulfilled,b)},_.prototype.callRejected=function(b){c.reject(this.promise,b)},_.prototype.otherCallRejected=function(b){n(this.promise,this.onRejected,b)},c.resolve=function(b,x){var p=v(e,x);if(p.status==="error")return c.reject(b,p.value);var S=p.value;if(S)u(b,S);else{b.state=w,b.outcome=x;for(var j=-1,U=b.queue.length;++j<U;)b.queue[j].callFulfilled(x)}return b},c.reject=function(b,x){b.state=a,b.outcome=x;for(var p=-1,S=b.queue.length;++p<S;)b.queue[p].callRejected(x);return b},d.resolve=function(b){return b instanceof this?b:c.resolve(new this(h),b)},d.reject=function(b){var x=new this(h);return c.reject(x,b)},d.all=function(b){var x=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var p=b.length,S=!1;if(!p)return this.resolve([]);for(var j=new Array(p),U=0,P=-1,W=new this(h);++P<p;)E(b[P],P);return W;function E(X,Q){x.resolve(X).then(function(J){j[Q]=J,++U!==p||S||(S=!0,c.resolve(W,j))},function(J){S||(S=!0,c.reject(W,J))})}},d.race=function(b){var x=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var p=b.length,S=!1;if(!p)return this.resolve([]);for(var j,U=-1,P=new this(h);++U<p;)j=b[U],x.resolve(j).then(function(W){S||(S=!0,c.resolve(P,W))},function(W){S||(S=!0,c.reject(P,W))});return P}},{1:1}],3:[function(g,r,l){(function(i){typeof i.Promise!="function"&&(i.Promise=g(2))}).call(this,f!==void 0?f:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(g,r,l){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},h=function(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function c(L,B){L=L||[],B=B||{};try{return new Blob(L,B)}catch(T){if(T.name!=="TypeError")throw T;for(var M=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),C=0;C<L.length;C+=1)M.append(L[C]);return M.getBlob(B.type)}}typeof Promise>"u"&&g(3);var a=Promise;function w(L,B){B&&L.then(function(M){B(null,M)},function(M){B(M)})}function s(L,B,M){typeof B=="function"&&L.then(B),typeof M=="function"&&L.catch(M)}function d(L){return typeof L!="string"&&(console.warn(L+" used as a key, but it is not a string."),L=String(L)),L}function _(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var n=void 0,e={},u=Object.prototype.toString;function v(L){return typeof n=="boolean"?a.resolve(n):function(B){return new a(function(M){var C=B.transaction("local-forage-detect-blob-support","readwrite"),T=c([""]);C.objectStore("local-forage-detect-blob-support").put(T,"key"),C.onabort=function(z){z.preventDefault(),z.stopPropagation(),M(!1)},C.oncomplete=function(){var z=navigator.userAgent.match(/Chrome\/(\d+)/),q=navigator.userAgent.match(/Edge\//);M(q||!z||parseInt(z[1],10)>=43)}}).catch(function(){return!1})}(L).then(function(B){return n=B})}function b(L){var B=e[L.name],M={};M.promise=new a(function(C,T){M.resolve=C,M.reject=T}),B.deferredOperations.push(M),B.dbReady?B.dbReady=B.dbReady.then(function(){return M.promise}):B.dbReady=M.promise}function x(L){var B=e[L.name].deferredOperations.pop();if(B)return B.resolve(),B.promise}function p(L,B){var M=e[L.name].deferredOperations.pop();if(M)return M.reject(B),M.promise}function S(L,B){return new a(function(M,C){if(e[L.name]=e[L.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},L.db){if(!B)return M(L.db);b(L),L.db.close()}var T=[L.name];B&&T.push(L.version);var z=h.open.apply(h,T);B&&(z.onupgradeneeded=function(q){var H=z.result;try{H.createObjectStore(L.storeName),q.oldVersion<=1&&H.createObjectStore("local-forage-detect-blob-support")}catch(Y){if(Y.name!=="ConstraintError")throw Y;console.warn('The database "'+L.name+'" has been upgraded from version '+q.oldVersion+" to version "+q.newVersion+', but the storage "'+L.storeName+'" already exists.')}}),z.onerror=function(q){q.preventDefault(),C(z.error)},z.onsuccess=function(){var q=z.result;q.onversionchange=function(H){H.target.close()},M(q),x(L)}})}function j(L){return S(L,!1)}function U(L){return S(L,!0)}function P(L,B){if(!L.db)return!0;var M=!L.db.objectStoreNames.contains(L.storeName),C=L.version<L.db.version,T=L.version>L.db.version;if(C&&(L.version!==B&&console.warn('The database "'+L.name+`" can't be downgraded from version `+L.db.version+" to version "+L.version+"."),L.version=L.db.version),T||M){if(M){var z=L.db.version+1;z>L.version&&(L.version=z)}return!0}return!1}function W(L){return c([function(B){for(var M=B.length,C=new ArrayBuffer(M),T=new Uint8Array(C),z=0;z<M;z++)T[z]=B.charCodeAt(z);return C}(atob(L.data))],{type:L.type})}function E(L){return L&&L.__local_forage_encoded_blob}function X(L){var B=this,M=B._initReady().then(function(){var C=e[B._dbInfo.name];if(C&&C.dbReady)return C.dbReady});return s(M,L,L),M}function Q(L,B,M,C){C===void 0&&(C=1);try{var T=L.db.transaction(L.storeName,B);M(null,T)}catch(z){if(C>0&&(!L.db||z.name==="InvalidStateError"||z.name==="NotFoundError"))return a.resolve().then(function(){if(!L.db||z.name==="NotFoundError"&&!L.db.objectStoreNames.contains(L.storeName)&&L.version<=L.db.version)return L.db&&(L.version=L.db.version+1),U(L)}).then(function(){return function(q){b(q);for(var H=e[q.name],Y=H.forages,tt=0;tt<Y.length;tt++){var it=Y[tt];it._dbInfo.db&&(it._dbInfo.db.close(),it._dbInfo.db=null)}return q.db=null,j(q).then(function(ut){return q.db=ut,P(q)?U(q):ut}).then(function(ut){q.db=H.db=ut;for(var ft=0;ft<Y.length;ft++)Y[ft]._dbInfo.db=ut}).catch(function(ut){throw p(q,ut),ut})}(L).then(function(){Q(L,B,M,C-1)})}).catch(M);M(z)}}var J={_driver:"asyncStorage",_initStorage:function(L){var B=this,M={db:null};if(L)for(var C in L)M[C]=L[C];var T=e[M.name];T||(T={forages:[],db:null,dbReady:null,deferredOperations:[]},e[M.name]=T),T.forages.push(B),B._initReady||(B._initReady=B.ready,B.ready=X);var z=[];function q(){return a.resolve()}for(var H=0;H<T.forages.length;H++){var Y=T.forages[H];Y!==B&&z.push(Y._initReady().catch(q))}var tt=T.forages.slice(0);return a.all(z).then(function(){return M.db=T.db,j(M)}).then(function(it){return M.db=it,P(M,B._defaultConfig.version)?U(M):it}).then(function(it){M.db=T.db=it,B._dbInfo=M;for(var ut=0;ut<tt.length;ut++){var ft=tt[ut];ft!==B&&(ft._dbInfo.db=M.db,ft._dbInfo.version=M.version)}})},_support:function(){try{if(!h||!h.open)return!1;var L=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),B=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!L||B)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function(L,B){var M=this,C=new a(function(T,z){M.ready().then(function(){Q(M._dbInfo,"readonly",function(q,H){if(q)return z(q);try{var Y=H.objectStore(M._dbInfo.storeName).openCursor(),tt=1;Y.onsuccess=function(){var it=Y.result;if(it){var ut=it.value;E(ut)&&(ut=W(ut));var ft=L(ut,it.key,tt++);ft!==void 0?T(ft):it.continue()}else T()},Y.onerror=function(){z(Y.error)}}catch(it){z(it)}})}).catch(z)});return w(C,B),C},getItem:function(L,B){var M=this;L=d(L);var C=new a(function(T,z){M.ready().then(function(){Q(M._dbInfo,"readonly",function(q,H){if(q)return z(q);try{var Y=H.objectStore(M._dbInfo.storeName).get(L);Y.onsuccess=function(){var tt=Y.result;tt===void 0&&(tt=null),E(tt)&&(tt=W(tt)),T(tt)},Y.onerror=function(){z(Y.error)}}catch(tt){z(tt)}})}).catch(z)});return w(C,B),C},setItem:function(L,B,M){var C=this;L=d(L);var T=new a(function(z,q){var H;C.ready().then(function(){return H=C._dbInfo,u.call(B)==="[object Blob]"?v(H.db).then(function(Y){return Y?B:(tt=B,new a(function(it,ut){var ft=new FileReader;ft.onerror=ut,ft.onloadend=function(vt){var gt=btoa(vt.target.result||"");it({__local_forage_encoded_blob:!0,data:gt,type:tt.type})},ft.readAsBinaryString(tt)}));var tt}):B}).then(function(Y){Q(C._dbInfo,"readwrite",function(tt,it){if(tt)return q(tt);try{var ut=it.objectStore(C._dbInfo.storeName);Y===null&&(Y=void 0);var ft=ut.put(Y,L);it.oncomplete=function(){Y===void 0&&(Y=null),z(Y)},it.onabort=it.onerror=function(){var vt=ft.error?ft.error:ft.transaction.error;q(vt)}}catch(vt){q(vt)}})}).catch(q)});return w(T,M),T},removeItem:function(L,B){var M=this;L=d(L);var C=new a(function(T,z){M.ready().then(function(){Q(M._dbInfo,"readwrite",function(q,H){if(q)return z(q);try{var Y=H.objectStore(M._dbInfo.storeName).delete(L);H.oncomplete=function(){T()},H.onerror=function(){z(Y.error)},H.onabort=function(){var tt=Y.error?Y.error:Y.transaction.error;z(tt)}}catch(tt){z(tt)}})}).catch(z)});return w(C,B),C},clear:function(L){var B=this,M=new a(function(C,T){B.ready().then(function(){Q(B._dbInfo,"readwrite",function(z,q){if(z)return T(z);try{var H=q.objectStore(B._dbInfo.storeName).clear();q.oncomplete=function(){C()},q.onabort=q.onerror=function(){var Y=H.error?H.error:H.transaction.error;T(Y)}}catch(Y){T(Y)}})}).catch(T)});return w(M,L),M},length:function(L){var B=this,M=new a(function(C,T){B.ready().then(function(){Q(B._dbInfo,"readonly",function(z,q){if(z)return T(z);try{var H=q.objectStore(B._dbInfo.storeName).count();H.onsuccess=function(){C(H.result)},H.onerror=function(){T(H.error)}}catch(Y){T(Y)}})}).catch(T)});return w(M,L),M},key:function(L,B){var M=this,C=new a(function(T,z){L<0?T(null):M.ready().then(function(){Q(M._dbInfo,"readonly",function(q,H){if(q)return z(q);try{var Y=H.objectStore(M._dbInfo.storeName),tt=!1,it=Y.openKeyCursor();it.onsuccess=function(){var ut=it.result;ut?L===0||tt?T(ut.key):(tt=!0,ut.advance(L)):T(null)},it.onerror=function(){z(it.error)}}catch(ut){z(ut)}})}).catch(z)});return w(C,B),C},keys:function(L){var B=this,M=new a(function(C,T){B.ready().then(function(){Q(B._dbInfo,"readonly",function(z,q){if(z)return T(z);try{var H=q.objectStore(B._dbInfo.storeName).openKeyCursor(),Y=[];H.onsuccess=function(){var tt=H.result;tt?(Y.push(tt.key),tt.continue()):C(Y)},H.onerror=function(){T(H.error)}}catch(tt){T(tt)}})}).catch(T)});return w(M,L),M},dropInstance:function(L,B){B=_.apply(this,arguments);var M=this.config();(L=typeof L!="function"&&L||{}).name||(L.name=L.name||M.name,L.storeName=L.storeName||M.storeName);var C,T=this;if(L.name){var z=L.name===M.name&&T._dbInfo.db,q=z?a.resolve(T._dbInfo.db):j(L).then(function(H){var Y=e[L.name],tt=Y.forages;Y.db=H;for(var it=0;it<tt.length;it++)tt[it]._dbInfo.db=H;return H});C=L.storeName?q.then(function(H){if(H.objectStoreNames.contains(L.storeName)){var Y=H.version+1;b(L);var tt=e[L.name],it=tt.forages;H.close();for(var ut=0;ut<it.length;ut++){var ft=it[ut];ft._dbInfo.db=null,ft._dbInfo.version=Y}return new a(function(vt,gt){var wt=h.open(L.name,Y);wt.onerror=function(Et){wt.result.close(),gt(Et)},wt.onupgradeneeded=function(){wt.result.deleteObjectStore(L.storeName)},wt.onsuccess=function(){var Et=wt.result;Et.close(),vt(Et)}}).then(function(vt){tt.db=vt;for(var gt=0;gt<it.length;gt++){var wt=it[gt];wt._dbInfo.db=vt,x(wt._dbInfo)}}).catch(function(vt){throw(p(L,vt)||a.resolve()).catch(function(){}),vt})}}):q.then(function(H){b(L);var Y=e[L.name],tt=Y.forages;H.close();for(var it=0;it<tt.length;it++)tt[it]._dbInfo.db=null;return new a(function(ut,ft){var vt=h.deleteDatabase(L.name);vt.onerror=function(){var gt=vt.result;gt&&gt.close(),ft(vt.error)},vt.onblocked=function(){console.warn('dropInstance blocked for database "'+L.name+'" until all open connections are closed')},vt.onsuccess=function(){var gt=vt.result;gt&&gt.close(),ut(gt)}}).then(function(ut){Y.db=ut;for(var ft=0;ft<tt.length;ft++)x(tt[ft]._dbInfo)}).catch(function(ut){throw(p(L,ut)||a.resolve()).catch(function(){}),ut})})}else C=a.reject("Invalid arguments");return w(C,B),C}},ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",et=/^~~local_forage_type~([^~]+)~/,ht=9,G=ht+4,$=Object.prototype.toString;function at(L){var B,M,C,T,z,q=.75*L.length,H=L.length,Y=0;L[L.length-1]==="="&&(q--,L[L.length-2]==="="&&q--);var tt=new ArrayBuffer(q),it=new Uint8Array(tt);for(B=0;B<H;B+=4)M=ct.indexOf(L[B]),C=ct.indexOf(L[B+1]),T=ct.indexOf(L[B+2]),z=ct.indexOf(L[B+3]),it[Y++]=M<<2|C>>4,it[Y++]=(15&C)<<4|T>>2,it[Y++]=(3&T)<<6|63&z;return tt}function st(L){var B,M=new Uint8Array(L),C="";for(B=0;B<M.length;B+=3)C+=ct[M[B]>>2],C+=ct[(3&M[B])<<4|M[B+1]>>4],C+=ct[(15&M[B+1])<<2|M[B+2]>>6],C+=ct[63&M[B+2]];return M.length%3==2?C=C.substring(0,C.length-1)+"=":M.length%3==1&&(C=C.substring(0,C.length-2)+"=="),C}var ot={serialize:function(L,B){var M="";if(L&&(M=$.call(L)),L&&(M==="[object ArrayBuffer]"||L.buffer&&$.call(L.buffer)==="[object ArrayBuffer]")){var C,T="__lfsc__:";L instanceof ArrayBuffer?(C=L,T+="arbf"):(C=L.buffer,M==="[object Int8Array]"?T+="si08":M==="[object Uint8Array]"?T+="ui08":M==="[object Uint8ClampedArray]"?T+="uic8":M==="[object Int16Array]"?T+="si16":M==="[object Uint16Array]"?T+="ur16":M==="[object Int32Array]"?T+="si32":M==="[object Uint32Array]"?T+="ui32":M==="[object Float32Array]"?T+="fl32":M==="[object Float64Array]"?T+="fl64":B(new Error("Failed to get type for BinaryArray"))),B(T+st(C))}else if(M==="[object Blob]"){var z=new FileReader;z.onload=function(){var q="~~local_forage_type~"+L.type+"~"+st(this.result);B("__lfsc__:blob"+q)},z.readAsArrayBuffer(L)}else try{B(JSON.stringify(L))}catch(q){console.error("Couldn't convert value into a JSON string: ",L),B(null,q)}},deserialize:function(L){if(L.substring(0,ht)!=="__lfsc__:")return JSON.parse(L);var B,M=L.substring(G),C=L.substring(ht,G);if(C==="blob"&&et.test(M)){var T=M.match(et);B=T[1],M=M.substring(T[0].length)}var z=at(M);switch(C){case"arbf":return z;case"blob":return c([z],{type:B});case"si08":return new Int8Array(z);case"ui08":return new Uint8Array(z);case"uic8":return new Uint8ClampedArray(z);case"si16":return new Int16Array(z);case"ur16":return new Uint16Array(z);case"si32":return new Int32Array(z);case"ui32":return new Uint32Array(z);case"fl32":return new Float32Array(z);case"fl64":return new Float64Array(z);default:throw new Error("Unkown type: "+C)}},stringToBuffer:at,bufferToString:st};function yt(L,B,M,C){L.executeSql("CREATE TABLE IF NOT EXISTS "+B.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],M,C)}function mt(L,B,M,C,T,z){L.executeSql(M,C,T,function(q,H){H.code===H.SYNTAX_ERR?q.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[B.storeName],function(Y,tt){tt.rows.length?z(Y,H):yt(Y,B,function(){Y.executeSql(M,C,T,z)},z)},z):z(q,H)},z)}function dt(L,B,M,C){var T=this;L=d(L);var z=new a(function(q,H){T.ready().then(function(){B===void 0&&(B=null);var Y=B,tt=T._dbInfo;tt.serializer.serialize(B,function(it,ut){ut?H(ut):tt.db.transaction(function(ft){mt(ft,tt,"INSERT OR REPLACE INTO "+tt.storeName+" (key, value) VALUES (?, ?)",[L,it],function(){q(Y)},function(vt,gt){H(gt)})},function(ft){if(ft.code===ft.QUOTA_ERR){if(C>0)return void q(dt.apply(T,[L,Y,M,C-1]));H(ft)}})})}).catch(H)});return w(z,M),z}function pt(L){return new a(function(B,M){L.transaction(function(C){C.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(T,z){for(var q=[],H=0;H<z.rows.length;H++)q.push(z.rows.item(H).name);B({db:L,storeNames:q})},function(T,z){M(z)})},function(C){M(C)})})}var _t={_driver:"webSQLStorage",_initStorage:function(L){var B=this,M={db:null};if(L)for(var C in L)M[C]=typeof L[C]!="string"?L[C].toString():L[C];var T=new a(function(z,q){try{M.db=openDatabase(M.name,String(M.version),M.description,M.size)}catch(H){return q(H)}M.db.transaction(function(H){yt(H,M,function(){B._dbInfo=M,z()},function(Y,tt){q(tt)})},q)});return M.serializer=ot,T},_support:typeof openDatabase=="function",iterate:function(L,B){var M=this,C=new a(function(T,z){M.ready().then(function(){var q=M._dbInfo;q.db.transaction(function(H){mt(H,q,"SELECT * FROM "+q.storeName,[],function(Y,tt){for(var it=tt.rows,ut=it.length,ft=0;ft<ut;ft++){var vt=it.item(ft),gt=vt.value;if(gt&&(gt=q.serializer.deserialize(gt)),(gt=L(gt,vt.key,ft+1))!==void 0)return void T(gt)}T()},function(Y,tt){z(tt)})})}).catch(z)});return w(C,B),C},getItem:function(L,B){var M=this;L=d(L);var C=new a(function(T,z){M.ready().then(function(){var q=M._dbInfo;q.db.transaction(function(H){mt(H,q,"SELECT * FROM "+q.storeName+" WHERE key = ? LIMIT 1",[L],function(Y,tt){var it=tt.rows.length?tt.rows.item(0).value:null;it&&(it=q.serializer.deserialize(it)),T(it)},function(Y,tt){z(tt)})})}).catch(z)});return w(C,B),C},setItem:function(L,B,M){return dt.apply(this,[L,B,M,1])},removeItem:function(L,B){var M=this;L=d(L);var C=new a(function(T,z){M.ready().then(function(){var q=M._dbInfo;q.db.transaction(function(H){mt(H,q,"DELETE FROM "+q.storeName+" WHERE key = ?",[L],function(){T()},function(Y,tt){z(tt)})})}).catch(z)});return w(C,B),C},clear:function(L){var B=this,M=new a(function(C,T){B.ready().then(function(){var z=B._dbInfo;z.db.transaction(function(q){mt(q,z,"DELETE FROM "+z.storeName,[],function(){C()},function(H,Y){T(Y)})})}).catch(T)});return w(M,L),M},length:function(L){var B=this,M=new a(function(C,T){B.ready().then(function(){var z=B._dbInfo;z.db.transaction(function(q){mt(q,z,"SELECT COUNT(key) as c FROM "+z.storeName,[],function(H,Y){var tt=Y.rows.item(0).c;C(tt)},function(H,Y){T(Y)})})}).catch(T)});return w(M,L),M},key:function(L,B){var M=this,C=new a(function(T,z){M.ready().then(function(){var q=M._dbInfo;q.db.transaction(function(H){mt(H,q,"SELECT key FROM "+q.storeName+" WHERE id = ? LIMIT 1",[L+1],function(Y,tt){var it=tt.rows.length?tt.rows.item(0).key:null;T(it)},function(Y,tt){z(tt)})})}).catch(z)});return w(C,B),C},keys:function(L){var B=this,M=new a(function(C,T){B.ready().then(function(){var z=B._dbInfo;z.db.transaction(function(q){mt(q,z,"SELECT key FROM "+z.storeName,[],function(H,Y){for(var tt=[],it=0;it<Y.rows.length;it++)tt.push(Y.rows.item(it).key);C(tt)},function(H,Y){T(Y)})})}).catch(T)});return w(M,L),M},dropInstance:function(L,B){B=_.apply(this,arguments);var M=this.config();(L=typeof L!="function"&&L||{}).name||(L.name=L.name||M.name,L.storeName=L.storeName||M.storeName);var C,T=this;return w(C=L.name?new a(function(z){var q;q=L.name===M.name?T._dbInfo.db:openDatabase(L.name,"","",0),L.storeName?z({db:q,storeNames:[L.storeName]}):z(pt(q))}).then(function(z){return new a(function(q,H){z.db.transaction(function(Y){function tt(vt){return new a(function(gt,wt){Y.executeSql("DROP TABLE IF EXISTS "+vt,[],function(){gt()},function(Et,St){wt(St)})})}for(var it=[],ut=0,ft=z.storeNames.length;ut<ft;ut++)it.push(tt(z.storeNames[ut]));a.all(it).then(function(){q()}).catch(function(vt){H(vt)})},function(Y){H(Y)})})}):a.reject("Invalid arguments"),B),C}};function bt(L,B){var M=L.name+"/";return L.storeName!==B.storeName&&(M+=L.storeName+"/"),M}function O(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch{return!0}}()||localStorage.length>0}var m={_driver:"localStorageWrapper",_initStorage:function(L){var B={};if(L)for(var M in L)B[M]=L[M];return B.keyPrefix=bt(L,this._defaultConfig),O()?(this._dbInfo=B,B.serializer=ot,a.resolve()):a.reject()},_support:function(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(L,B){var M=this,C=M.ready().then(function(){for(var T=M._dbInfo,z=T.keyPrefix,q=z.length,H=localStorage.length,Y=1,tt=0;tt<H;tt++){var it=localStorage.key(tt);if(it.indexOf(z)===0){var ut=localStorage.getItem(it);if(ut&&(ut=T.serializer.deserialize(ut)),(ut=L(ut,it.substring(q),Y++))!==void 0)return ut}}});return w(C,B),C},getItem:function(L,B){var M=this;L=d(L);var C=M.ready().then(function(){var T=M._dbInfo,z=localStorage.getItem(T.keyPrefix+L);return z&&(z=T.serializer.deserialize(z)),z});return w(C,B),C},setItem:function(L,B,M){var C=this;L=d(L);var T=C.ready().then(function(){B===void 0&&(B=null);var z=B;return new a(function(q,H){var Y=C._dbInfo;Y.serializer.serialize(B,function(tt,it){if(it)H(it);else try{localStorage.setItem(Y.keyPrefix+L,tt),q(z)}catch(ut){ut.name!=="QuotaExceededError"&&ut.name!=="NS_ERROR_DOM_QUOTA_REACHED"||H(ut),H(ut)}})})});return w(T,M),T},removeItem:function(L,B){var M=this;L=d(L);var C=M.ready().then(function(){var T=M._dbInfo;localStorage.removeItem(T.keyPrefix+L)});return w(C,B),C},clear:function(L){var B=this,M=B.ready().then(function(){for(var C=B._dbInfo.keyPrefix,T=localStorage.length-1;T>=0;T--){var z=localStorage.key(T);z.indexOf(C)===0&&localStorage.removeItem(z)}});return w(M,L),M},length:function(L){var B=this.keys().then(function(M){return M.length});return w(B,L),B},key:function(L,B){var M=this,C=M.ready().then(function(){var T,z=M._dbInfo;try{T=localStorage.key(L)}catch{T=null}return T&&(T=T.substring(z.keyPrefix.length)),T});return w(C,B),C},keys:function(L){var B=this,M=B.ready().then(function(){for(var C=B._dbInfo,T=localStorage.length,z=[],q=0;q<T;q++){var H=localStorage.key(q);H.indexOf(C.keyPrefix)===0&&z.push(H.substring(C.keyPrefix.length))}return z});return w(M,L),M},dropInstance:function(L,B){if(B=_.apply(this,arguments),!(L=typeof L!="function"&&L||{}).name){var M=this.config();L.name=L.name||M.name,L.storeName=L.storeName||M.storeName}var C,T=this;return w(C=L.name?new a(function(z){L.storeName?z(bt(L,T._defaultConfig)):z(L.name+"/")}).then(function(z){for(var q=localStorage.length-1;q>=0;q--){var H=localStorage.key(q);H.indexOf(z)===0&&localStorage.removeItem(H)}}):a.reject("Invalid arguments"),B),C}},t=function(L,B){for(var M,C,T=L.length,z=0;z<T;){if((M=L[z])===(C=B)||typeof M=="number"&&typeof C=="number"&&isNaN(M)&&isNaN(C))return!0;z++}return!1},I=Array.isArray||function(L){return Object.prototype.toString.call(L)==="[object Array]"},D={},A={},R={INDEXEDDB:J,WEBSQL:_t,LOCALSTORAGE:m},F=[R.INDEXEDDB._driver,R.WEBSQL._driver,R.LOCALSTORAGE._driver],Z=["dropInstance"],K=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Z),V={description:"",driver:F.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function nt(L,B){L[B]=function(){var M=arguments;return L.ready().then(function(){return L[B].apply(L,M)})}}function lt(){for(var L=1;L<arguments.length;L++){var B=arguments[L];if(B)for(var M in B)B.hasOwnProperty(M)&&(I(B[M])?arguments[0][M]=B[M].slice():arguments[0][M]=B[M])}return arguments[0]}var rt=new(function(){function L(B){for(var M in function(z,q){if(!(z instanceof q))throw new TypeError("Cannot call a class as a function")}(this,L),R)if(R.hasOwnProperty(M)){var C=R[M],T=C._driver;this[M]=T,D[T]||this.defineDriver(C)}this._defaultConfig=lt({},V),this._config=lt({},this._defaultConfig,B),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return L.prototype.config=function(B){if((B===void 0?"undefined":i(B))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var M in B){if(M==="storeName"&&(B[M]=B[M].replace(/\W/g,"_")),M==="version"&&typeof B[M]!="number")return new Error("Database version must be a number.");this._config[M]=B[M]}return!("driver"in B)||!B.driver||this.setDriver(this._config.driver)}return typeof B=="string"?this._config[B]:this._config},L.prototype.defineDriver=function(B,M,C){var T=new a(function(z,q){try{var H=B._driver,Y=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!B._driver)return void q(Y);for(var tt=K.concat("_initStorage"),it=0,ut=tt.length;it<ut;it++){var ft=tt[it];if((!t(Z,ft)||B[ft])&&typeof B[ft]!="function")return void q(Y)}(function(){for(var gt=function(Nt){return function(){var Rt=new Error("Method "+Nt+" is not implemented by the current driver"),zt=a.reject(Rt);return w(zt,arguments[arguments.length-1]),zt}},wt=0,Et=Z.length;wt<Et;wt++){var St=Z[wt];B[St]||(B[St]=gt(St))}})();var vt=function(gt){D[H]&&console.info("Redefining LocalForage driver: "+H),D[H]=B,A[H]=gt,z()};"_support"in B?B._support&&typeof B._support=="function"?B._support().then(vt,q):vt(!!B._support):vt(!0)}catch(gt){q(gt)}});return s(T,M,C),T},L.prototype.driver=function(){return this._driver||null},L.prototype.getDriver=function(B,M,C){var T=D[B]?a.resolve(D[B]):a.reject(new Error("Driver not found."));return s(T,M,C),T},L.prototype.getSerializer=function(B){var M=a.resolve(ot);return s(M,B),M},L.prototype.ready=function(B){var M=this,C=M._driverSet.then(function(){return M._ready===null&&(M._ready=M._initDriver()),M._ready});return s(C,B,B),C},L.prototype.setDriver=function(B,M,C){var T=this;I(B)||(B=[B]);var z=this._getSupportedDrivers(B);function q(){T._config.driver=T.driver()}function H(tt){return T._extend(tt),q(),T._ready=T._initStorage(T._config),T._ready}var Y=this._driverSet!==null?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=Y.then(function(){var tt=z[0];return T._dbInfo=null,T._ready=null,T.getDriver(tt).then(function(it){T._driver=it._driver,q(),T._wrapLibraryMethodsWithReady(),T._initDriver=function(ut){return function(){var ft=0;return function vt(){for(;ft<ut.length;){var gt=ut[ft];return ft++,T._dbInfo=null,T._ready=null,T.getDriver(gt).then(H).catch(vt)}q();var wt=new Error("No available storage method found.");return T._driverSet=a.reject(wt),T._driverSet}()}}(z)})}).catch(function(){q();var tt=new Error("No available storage method found.");return T._driverSet=a.reject(tt),T._driverSet}),s(this._driverSet,M,C),this._driverSet},L.prototype.supports=function(B){return!!A[B]},L.prototype._extend=function(B){lt(this,B)},L.prototype._getSupportedDrivers=function(B){for(var M=[],C=0,T=B.length;C<T;C++){var z=B[C];this.supports(z)&&M.push(z)}return M},L.prototype._wrapLibraryMethodsWithReady=function(){for(var B=0,M=K.length;B<M;B++)nt(this,K[B])},L.prototype.createInstance=function(B){return new L(B)},L}());r.exports=rt},{3:3}]},{},[4])(4)}).call(this,o(17))},function(k,y,o){var f=o(3),g=o.n(f),r=o(0),l=o(5),i=o(4),h=o(2),c=o(6),a=o(8),w=function(O,m,t,I){var D,A=typeof window<"u"&&window.URL,R=A?"blob":"arraybuffer",F=new r.defer,Z=new XMLHttpRequest,K=XMLHttpRequest.prototype;for(D in"overrideMimeType"in K||Object.defineProperty(K,"overrideMimeType",{value:function(){}}),t&&(Z.withCredentials=!0),Z.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){var V=!1;if(this.responseType!==""&&this.responseType!=="document"||(V=this.responseXML),this.status===200||this.status===0||V){var nt;if(!this.response&&!V)return F.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),F.promise;if(this.status===403)return F.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),F.promise;nt=V?this.responseXML:Object(r.isXml)(m)?Object(r.parse)(this.response,"text/xml"):m=="xhtml"?Object(r.parse)(this.response,"application/xhtml+xml"):m=="html"||m=="htm"?Object(r.parse)(this.response,"text/html"):m=="json"?JSON.parse(this.response):m=="blob"?A?this.response:new Blob([this.response]):this.response,F.resolve(nt)}else F.reject({status:this.status,message:this.response,stack:new Error().stack})}},Z.onerror=function(V){F.reject(V)},Z.open("GET",O,!0),I)Z.setRequestHeader(D,I[D]);return m=="json"&&Z.setRequestHeader("Accept","application/json"),m||(m=new i.a(O).extension),m=="blob"&&(Z.responseType=R),Object(r.isXml)(m)&&Z.overrideMimeType("text/xml"),m=="binary"&&(Z.responseType="arraybuffer"),Z.send(),F.promise},s=o(15),d=class{constructor(O,m){this.idref=O.idref,this.linear=O.linear==="yes",this.properties=O.properties,this.index=O.index,this.href=O.href,this.url=O.url,this.canonical=O.canonical,this.next=O.next,this.prev=O.prev,this.cfiBase=O.cfiBase,m?this.hooks=m:(this.hooks={},this.hooks.serialize=new c.a(this),this.hooks.content=new c.a(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(O){var m=O||this.request||w,t=new r.defer,I=t.promise;return this.contents?t.resolve(this.contents):m(this.url).then(function(D){return this.document=D,this.contents=D.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){t.resolve(this.contents)}.bind(this)).catch(function(D){t.reject(D)}),I}base(){return Object(a.a)(this.document,this)}render(O){var m=new r.defer,t=m.promise;return this.output,this.load(O).then(function(I){var D=(typeof navigator<"u"&&navigator.userAgent||"").indexOf("Trident")>=0,A=new(typeof XMLSerializer>"u"||D?s.DOMParser:XMLSerializer);return this.output=A.serializeToString(I),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){m.resolve(this.output)}.bind(this)).catch(function(I){m.reject(I)}),t}find(O){var m=this,t=[],I=O.toLowerCase();return Object(r.sprint)(m.document,function(D){(function(A){for(var R,F,Z,K=A.textContent.toLowerCase(),V=m.document.createRange(),nt=-1;F!=-1;)(F=K.indexOf(I,nt+1))!=-1&&((V=m.document.createRange()).setStart(A,F),V.setEnd(A,F+I.length),R=m.cfiFromRange(V),Z=A.textContent.length<150?A.textContent:"..."+(Z=A.textContent.substring(F-75,F+75))+"...",t.push({cfi:R,excerpt:Z})),nt=F})(D)}),t}search(O,m=5){if(document.createTreeWalker===void 0)return this.find(O);let t=[];const I=this,D=O.toLowerCase(),A=function(K){const V=K.reduce((nt,lt)=>nt+lt.textContent,"").toLowerCase().indexOf(D);if(V!=-1){const lt=V+D.length;let rt=0,L=0;if(V<K[0].length){let B;for(;rt<K.length-1&&(L+=K[rt].length,!(lt<=L));)rt+=1;let M=K[0],C=K[rt],T=I.document.createRange();T.setStart(M,V);let z=K.slice(0,rt).reduce((H,Y)=>H+Y.textContent.length,0);T.setEnd(C,z>lt?lt:lt-z),B=I.cfiFromRange(T);let q=K.slice(0,rt+1).reduce((H,Y)=>H+Y.textContent,"");q.length>150&&(q=q.substring(V-75,V+75),q="..."+q+"..."),t.push({cfi:B,excerpt:q})}}},R=document.createTreeWalker(I.document,NodeFilter.SHOW_TEXT,null,!1);let F,Z=[];for(;F=R.nextNode();)Z.push(F),Z.length==m&&(A(Z.slice(0,m)),Z=Z.slice(1,m));return Z.length>0&&A(Z),t}reconcileLayoutSettings(O){var m={layout:O.layout,spread:O.spread,orientation:O.orientation};return this.properties.forEach(function(t){var I,D,A=t.replace("rendition:",""),R=A.indexOf("-");R!=-1&&(I=A.slice(0,R),D=A.slice(R+1),m[I]=D)}),m}cfiFromRange(O){return new h.a(O,this.cfiBase).toString()}cfiFromElement(O){return new h.a(O,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}},_=class{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new c.a,this.hooks.content=new c.a,this.hooks.content.register(a.a),this.hooks.content.register(a.b),this.hooks.content.register(a.d),this.epubcfi=new h.a,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(O,m,t){this.items=O.spine,this.manifest=O.manifest,this.spineNodeIndex=O.spineNodeIndex,this.baseUrl=O.baseUrl||O.basePath||"",this.length=this.items.length,this.items.forEach((I,D)=>{var A,R=this.manifest[I.idref];I.index=D,I.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,I.index,I.id),I.href&&(I.url=m(I.href,!0),I.canonical=t(I.href)),R&&(I.href=R.href,I.url=m(I.href,!0),I.canonical=t(I.href),R.properties.length&&I.properties.push.apply(I.properties,R.properties)),I.linear==="yes"?(I.prev=function(){let F=I.index;for(;F>0;){let Z=this.get(F-1);if(Z&&Z.linear)return Z;F-=1}}.bind(this),I.next=function(){let F=I.index;for(;F<this.spineItems.length-1;){let Z=this.get(F+1);if(Z&&Z.linear)return Z;F+=1}}.bind(this)):(I.prev=function(){},I.next=function(){}),A=new d(I,this.hooks),this.append(A)}),this.loaded=!0}get(O){var m=0;if(O===void 0)for(;m<this.spineItems.length;){let t=this.spineItems[m];if(t&&t.linear)break;m+=1}else this.epubcfi.isCfiString(O)?m=new h.a(O).spinePos:typeof O=="number"||isNaN(O)===!1?m=O:typeof O=="string"&&O.indexOf("#")===0?m=this.spineById[O.substring(1)]:typeof O=="string"&&(O=O.split("#")[0],m=this.spineByHref[O]||this.spineByHref[encodeURI(O)]);return this.spineItems[m]||null}append(O){var m=this.spineItems.length;return O.index=m,this.spineItems.push(O),this.spineByHref[decodeURI(O.href)]=m,this.spineByHref[encodeURI(O.href)]=m,this.spineByHref[O.href]=m,this.spineById[O.idref]=m,m}prepend(O){return this.spineByHref[O.href]=0,this.spineById[O.idref]=0,this.spineItems.forEach(function(m,t){m.index=t}),0}remove(O){var m=this.spineItems.indexOf(O);if(m>-1)return delete this.spineByHref[O.href],delete this.spineById[O.idref],this.spineItems.splice(m,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let O=0;do{let m=this.get(O);if(m&&m.linear)return m;O+=1}while(O<this.spineItems.length)}last(){let O=this.spineItems.length-1;do{let m=this.get(O);if(m&&m.linear)return m;O-=1}while(O>=0)}destroy(){this.each(O=>O.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}},n=o(9),e=o(1);class u{constructor(m,t,I){this.spine=m,this.request=t,this.pause=I||100,this.q=new n.a(this),this.epubcfi=new h.a,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(m){return m&&(this.break=m),this.q.pause(),this.spine.each(function(t){t.linear&&this.q.enqueue(this.process.bind(this),t)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(m){return m.load(this.request).then(function(t){var I=new r.defer,D=this.parse(t,m.cfiBase);return this._locations=this._locations.concat(D),m.unload(),this.processingTimeout=setTimeout(()=>I.resolve(D),this.pause),I.promise}.bind(this))}parse(m,t,I){var D,A,R=[],F=m.ownerDocument,Z=Object(r.qs)(F,"body"),K=0,V=I||this.break;if(Object(r.sprint)(Z,function(nt){var lt,rt=nt.length,L=0;if(nt.textContent.trim().length===0)return!1;for(K==0&&((D=this.createRange()).startContainer=nt,D.startOffset=0),(lt=V-K)>rt&&(K+=rt,L=rt);L<rt;)if(lt=V-K,K===0&&(L+=1,(D=this.createRange()).startContainer=nt,D.startOffset=L),L+lt>=rt)K+=rt-L,L=rt;else{L+=lt,D.endContainer=nt,D.endOffset=L;let B=new h.a(D,t).toString();R.push(B),K=0}A=nt}.bind(this)),D&&D.startContainer&&A){D.endContainer=A,D.endOffset=A.length;let nt=new h.a(D,t).toString();R.push(nt),K=0}return R}generateFromWords(m,t,I){var D=m?new h.a(m):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each(function(A){A.linear&&(D?A.index>=D.spinePos&&this.q.enqueue(this.processWords.bind(this),A,t,D,I):this.q.enqueue(this.processWords.bind(this),A,t,D,I))}.bind(this)),this.q.run().then(function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}.bind(this))}processWords(m,t,I,D){return D&&this._locationsWords.length>=D?Promise.resolve():m.load(this.request).then(function(A){var R=new r.defer,F=this.parseWords(A,m,t,I),Z=D-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(F.length>=D?F.slice(0,Z):F),m.unload(),this.processingTimeout=setTimeout(()=>R.resolve(F),this.pause),R.promise}.bind(this))}countWords(m){return(m=(m=(m=m.replace(/(^\s*)|(\s*$)/gi,"")).replace(/[ ]{2,}/gi," ")).replace(/\n /,`
`)).split(" ").length}parseWords(m,t,I,D){var A,R=t.cfiBase,F=[],Z=m.ownerDocument,K=Object(r.qs)(Z,"body"),V=I,nt=!D||D.spinePos!==t.index;return D&&t.index===D.spinePos&&(A=D.findNode(D.range?D.path.steps.concat(D.start.steps):D.path.steps,m.ownerDocument)),Object(r.sprint)(K,function(lt){if(!nt){if(lt!==A)return!1;nt=!0}if(lt.textContent.length<10&&lt.textContent.trim().length===0)return!1;var rt,L=this.countWords(lt.textContent),B=0;if(L===0)return!1;for((rt=V-this._wordCounter)>L&&(this._wordCounter+=L,B=L);B<L;)if(B+(rt=V-this._wordCounter)>=L)this._wordCounter+=L-B,B=L;else{B+=rt;let M=new h.a(lt,R);F.push({cfi:M.toString(),wordCount:this._wordCounter}),this._wordCounter=0}}.bind(this)),F}locationFromCfi(m){let t;return h.a.prototype.isCfiString(m)&&(m=new h.a(m)),this._locations.length===0?-1:(t=Object(r.locationOf)(m,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}percentageFromCfi(m){if(this._locations.length===0)return null;var t=this.locationFromCfi(m);return this.percentageFromLocation(t)}percentageFromLocation(m){return m&&this.total?m/this.total:0}cfiFromLocation(m){var t=-1;return typeof m!="number"&&(m=parseInt(m)),m>=0&&m<this._locations.length&&(t=this._locations[m]),t}cfiFromPercentage(m){let t;if(m>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),m>=1){let I=new h.a(this._locations[this.total]);return I.collapse(),I.toString()}return t=Math.ceil(this.total*m),this.cfiFromLocation(t)}load(m){return this._locations=typeof m=="string"?JSON.parse(m):m,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(m){var t;if(typeof m=="string")this._currentCfi=m;else{if(typeof m!="number")return;this._current=m}this._locations.length!==0&&(typeof m=="string"?(t=this.locationFromCfi(m),this._current=t):t=m,this.emit(e.c.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}get currentLocation(){return this._current}set currentLocation(m){this.setCurrent(m)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}g()(u.prototype);var v=u,b=o(7),x=o.n(b),p=class{constructor(O){this.packagePath="",this.directory="",this.encoding="",O&&this.parse(O)}parse(O){var m;if(!O)throw new Error("Container File Not Found");if(!(m=Object(r.qs)(O,"rootfile")))throw new Error("No RootFile Found");this.packagePath=m.getAttribute("full-path"),this.directory=x.a.dirname(this.packagePath),this.encoding=O.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}},S=class{constructor(O){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},O&&this.parse(O)}parse(O){var m,t,I;if(!O)throw new Error("Package File Not Found");if(!(m=Object(r.qs)(O,"metadata")))throw new Error("No Metadata Found");if(!(t=Object(r.qs)(O,"manifest")))throw new Error("No Manifest Found");if(!(I=Object(r.qs)(O,"spine")))throw new Error("No Spine Found");return this.manifest=this.parseManifest(t),this.navPath=this.findNavPath(t),this.ncxPath=this.findNcxPath(t,I),this.coverPath=this.findCoverPath(O),this.spineNodeIndex=Object(r.indexOfElementNode)(I),this.spine=this.parseSpine(I,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(O),this.metadata=this.parseMetadata(m),this.metadata.direction=I.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(O){var m={};return m.title=this.getElementText(O,"title"),m.creator=this.getElementText(O,"creator"),m.description=this.getElementText(O,"description"),m.pubdate=this.getElementText(O,"date"),m.publisher=this.getElementText(O,"publisher"),m.identifier=this.getElementText(O,"identifier"),m.language=this.getElementText(O,"language"),m.rights=this.getElementText(O,"rights"),m.modified_date=this.getPropertyText(O,"dcterms:modified"),m.layout=this.getPropertyText(O,"rendition:layout"),m.orientation=this.getPropertyText(O,"rendition:orientation"),m.flow=this.getPropertyText(O,"rendition:flow"),m.viewport=this.getPropertyText(O,"rendition:viewport"),m.media_active_class=this.getPropertyText(O,"media:active-class"),m.spread=this.getPropertyText(O,"rendition:spread"),m}parseManifest(O){var m={},t=Object(r.qsa)(O,"item");return Array.prototype.slice.call(t).forEach(function(I){var D=I.getAttribute("id"),A=I.getAttribute("href")||"",R=I.getAttribute("media-type")||"",F=I.getAttribute("media-overlay")||"",Z=I.getAttribute("properties")||"";m[D]={href:A,type:R,overlay:F,properties:Z.length?Z.split(" "):[]}}),m}parseSpine(O,m){var t=[],I=Object(r.qsa)(O,"itemref");return Array.prototype.slice.call(I).forEach(function(D,A){var R=D.getAttribute("idref"),F=D.getAttribute("properties")||"",Z=F.length?F.split(" "):[],K={id:D.getAttribute("id"),idref:R,linear:D.getAttribute("linear")||"yes",properties:Z,index:A};t.push(K)}),t}findUniqueIdentifier(O){var m=O.documentElement.getAttribute("unique-identifier");if(!m)return"";var t=O.getElementById(m);return t&&t.localName==="identifier"&&t.namespaceURI==="http://purl.org/dc/elements/1.1/"&&t.childNodes.length>0?t.childNodes[0].nodeValue.trim():""}findNavPath(O){var m=Object(r.qsp)(O,"item",{properties:"nav"});return!!m&&m.getAttribute("href")}findNcxPath(O,m){var t,I=Object(r.qsp)(O,"item",{"media-type":"application/x-dtbncx+xml"});return I||(t=m.getAttribute("toc"))&&(I=O.querySelector("#"+t)),!!I&&I.getAttribute("href")}findCoverPath(O){Object(r.qs)(O,"package").getAttribute("version");var m=Object(r.qsp)(O,"item",{properties:"cover-image"});if(m)return m.getAttribute("href");var t=Object(r.qsp)(O,"meta",{name:"cover"});if(t){var I=t.getAttribute("content"),D=O.getElementById(I);return D?D.getAttribute("href"):""}return!1}getElementText(O,m){var t,I=O.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",m);return I&&I.length!==0&&(t=I[0]).childNodes.length?t.childNodes[0].nodeValue:""}getPropertyText(O,m){var t=Object(r.qsp)(O,"meta",{property:m});return t&&t.childNodes.length?t.childNodes[0].nodeValue:""}load(O){this.metadata=O.metadata;let m=O.readingOrder||O.spine;return this.spine=m.map((t,I)=>(t.index=I,t.linear=t.linear||"yes",t)),O.resources.forEach((t,I)=>{this.manifest[I]=t,t.rel&&t.rel[0]==="cover"&&(this.coverPath=t.href)}),this.spineNodeIndex=0,this.toc=O.toc.map((t,I)=>(t.label=t.title,t)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}},j=class{constructor(O){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,O&&this.parse(O)}parse(O){let m,t,I=O.nodeType;I&&(m=Object(r.qs)(O,"html"),t=Object(r.qs)(O,"ncx")),I?m?(this.toc=this.parseNav(O),this.landmarks=this.parseLandmarks(O)):t&&(this.toc=this.parseNcx(O)):this.toc=this.load(O),this.length=0,this.unpack(this.toc)}unpack(O){for(var m,t=0;t<O.length;t++)(m=O[t]).href&&(this.tocByHref[m.href]=t),m.id&&(this.tocById[m.id]=t),this.length++,m.subitems.length&&this.unpack(m.subitems)}get(O){var m;return O?(O.indexOf("#")===0?m=this.tocById[O.substring(1)]:O in this.tocByHref&&(m=this.tocByHref[O]),this.getByIndex(O,m,this.toc)):this.toc}getByIndex(O,m,t){if(t.length===0)return;const I=t[m];if(!I||O!==I.id&&O!==I.href){let D;for(let A=0;A<t.length&&(D=this.getByIndex(O,m,t[A].subitems),!D);++A);return D}return I}landmark(O){var m;return O?(m=this.landmarksByType[O],this.landmarks[m]):this.landmarks}parseNav(O){var m=Object(r.querySelectorByType)(O,"nav","toc"),t=[];if(!m)return t;let I=Object(r.filterChildren)(m,"ol",!0);return I?t=this.parseNavList(I):t}parseNavList(O,m){const t=[];if(!O||!O.children)return t;for(let I=0;I<O.children.length;I++){const D=this.navItem(O.children[I],m);D&&t.push(D)}return t}navItem(O,m){let t=O.getAttribute("id")||void 0,I=Object(r.filterChildren)(O,"a",!0)||Object(r.filterChildren)(O,"span",!0);if(!I)return;let D=I.getAttribute("href")||"";t||(t=D);let A=I.textContent||"",R=[],F=Object(r.filterChildren)(O,"ol",!0);return F&&(R=this.parseNavList(F,t)),{id:t,href:D,label:A,subitems:R,parent:m}}parseLandmarks(O){var m,t,I=Object(r.querySelectorByType)(O,"nav","landmarks"),D=I?Object(r.qsa)(I,"li"):[],A=D.length,R=[];if(!D||A===0)return R;for(m=0;m<A;++m)(t=this.landmarkItem(D[m]))&&(R.push(t),this.landmarksByType[t.type]=m);return R}landmarkItem(O){let m=Object(r.filterChildren)(O,"a",!0);if(!m)return;let t=m.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0;return{href:m.getAttribute("href")||"",label:m.textContent||"",type:t}}parseNcx(O){var m,t,I=Object(r.qsa)(O,"navPoint"),D=I.length,A={},R=[];if(!I||D===0)return R;for(m=0;m<D;++m)A[(t=this.ncxItem(I[m])).id]=t,t.parent?A[t.parent].subitems.push(t):R.push(t);return R}ncxItem(O){var m,t=O.getAttribute("id")||!1,I=Object(r.qs)(O,"content").getAttribute("src"),D=Object(r.qs)(O,"navLabel"),A=D.textContent?D.textContent:"",R=O.parentNode;return!R||R.nodeName!=="navPoint"&&R.nodeName.split(":").slice(-1)[0]!=="navPoint"||(m=R.getAttribute("id")),{id:t,href:I,label:A,subitems:[],parent:m}}load(O){return O.map(m=>(m.label=m.title,m.subitems=m.children?this.load(m.children):[],m))}forEach(O){return this.toc.forEach(O)}},U={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},P=function(){var O,m,t,I,D={};for(O in U)if(U.hasOwnProperty(O)){for(m in U[O])if(U[O].hasOwnProperty(m))if(typeof(t=U[O][m])=="string")D[t]=O+"/"+m;else for(I=0;I<t.length;I++)D[t[I]]=O+"/"+m}return D}(),W={lookup:function(O){return O&&P[O.split(".").pop().toLowerCase()]||"text/plain"}},E=class{constructor(O,m){this.settings={replacements:m&&m.replacements||"base64",archive:m&&m.archive,resolver:m&&m.resolver,request:m&&m.request},this.process(O)}process(O){this.manifest=O,this.resources=Object.keys(O).map(function(m){return O[m]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(O){if(O.type==="application/xhtml+xml"||O.type==="text/html")return!0}),this.assets=this.resources.filter(function(O){if(O.type!=="application/xhtml+xml"&&O.type!=="text/html")return!0}),this.css=this.resources.filter(function(O){if(O.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map(function(O){return O.href}.bind(this)),this.cssUrls=this.css.map(function(O){return O.href})}createUrl(O){var m=new l.a(O),t=W.lookup(m.filename);return this.settings.archive?this.settings.archive.createUrl(O,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(O,"blob").then(I=>Object(r.blob2base64)(I)).then(I=>Object(r.createBase64Url)(I,t)):this.settings.request(O,"blob").then(I=>Object(r.createBlobUrl)(I,t))}replacements(){if(this.settings.replacements==="none")return new Promise(function(m){m(this.urls)}.bind(this));var O=this.urls.map(m=>{var t=this.settings.resolver(m);return this.createUrl(t).catch(I=>(console.error(I),null))});return Promise.all(O).then(m=>(this.replacementUrls=m.filter(t=>typeof t=="string"),m))}replaceCss(O,m){var t=[];return O=O||this.settings.archive,m=m||this.settings.resolver,this.cssUrls.forEach(function(I){var D=this.createCssFile(I,O,m).then(function(A){var R=this.urls.indexOf(I);R>-1&&(this.replacementUrls[R]=A)}.bind(this));t.push(D)}.bind(this)),Promise.all(t)}createCssFile(O){if(x.a.isAbsolute(O))return new Promise(function(D){D()});var m,t=this.settings.resolver(O);m=this.settings.archive?this.settings.archive.getText(t):this.settings.request(t,"text");var I=this.urls.map(D=>{var A=this.settings.resolver(D);return new i.a(t).relative(A)});return m?m.then(D=>(D=Object(a.e)(D,I,this.replacementUrls),this.settings.replacements==="base64"?Object(r.createBase64Url)(D,"text/css"):Object(r.createBlobUrl)(D,"text/css")),D=>new Promise(function(A){A()})):new Promise(function(D){D()})}relativeTo(O,m){return m=m||this.settings.resolver,this.urls.map(function(t){var I=m(t);return new i.a(O).relative(I)}.bind(this))}get(O){var m=this.urls.indexOf(O);if(m!==-1)return this.replacementUrls.length?new Promise(function(t,I){t(this.replacementUrls[m])}.bind(this)):this.createUrl(O)}substitute(O,m){var t;return t=m?this.relativeTo(m):this.urls,Object(a.e)(O,t,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}},X=class{constructor(O){this.pages=[],this.locations=[],this.epubcfi=new h.a,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,O&&(this.pageList=this.parse(O)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(O){var m=Object(r.qs)(O,"html"),t=Object(r.qs)(O,"ncx");return m?this.parseNav(O):t?this.parseNcx(O):void 0}parseNav(O){var m,t,I=Object(r.querySelectorByType)(O,"nav","page-list"),D=I?Object(r.qsa)(I,"li"):[],A=D.length,R=[];if(!D||A===0)return R;for(m=0;m<A;++m)t=this.item(D[m]),R.push(t);return R}parseNcx(O){var m,t,I,D,A=[],R=0;if(!(t=Object(r.qs)(O,"pageList"))||(D=(I=Object(r.qsa)(t,"pageTarget")).length,!I||I.length===0))return A;for(R=0;R<D;++R)m=this.ncxItem(I[R]),A.push(m);return A}ncxItem(O){var m=Object(r.qs)(O,"navLabel"),t=Object(r.qs)(m,"text").textContent;return{href:Object(r.qs)(O,"content").getAttribute("src"),page:parseInt(t,10)}}item(O){var m,t,I=Object(r.qs)(O,"a"),D=I.getAttribute("href")||"",A=I.textContent||"",R=parseInt(A);return D.indexOf("epubcfi")!=-1?(t=(m=D.split("#"))[0],{cfi:m.length>1&&m[1],href:D,packageUrl:t,page:R}):{href:D,page:R}}process(O){O.forEach(function(m){this.pages.push(m.page),m.cfi&&this.locations.push(m.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(O){var m=-1;if(this.locations.length===0)return-1;var t=Object(r.indexOfSorted)(O,this.locations,this.epubcfi.compare);return t!=-1?m=this.pages[t]:(m=(t=Object(r.locationOf)(O,this.locations,this.epubcfi.compare))-1>=0?this.pages[t-1]:this.pages[0])!==void 0||(m=-1),m}cfiFromPage(O){var m=-1;typeof O!="number"&&(O=parseInt(O));var t=this.pages.indexOf(O);return t!=-1&&(m=this.locations[t]),m}pageFromPercentage(O){return Math.round(this.totalPages*O)}percentageFromPage(O){var m=(O-this.firstPage)/this.totalPages;return Math.round(1e3*m)/1e3}percentageFromCfi(O){var m=this.pageFromCfi(O);return this.percentageFromPage(m)}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}},Q=o(16),J=o(29),ct=o.n(J),et=class{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new ct.a}catch{throw new Error("JSZip lib not loaded")}}open(O,m){return this.zip.loadAsync(O,{base64:m})}openUrl(O,m){return w(O,"binary").then(function(t){return this.zip.loadAsync(t,{base64:m})}.bind(this))}request(O,m){var t,I=new r.defer,D=new i.a(O);return m||(m=D.extension),(t=m=="blob"?this.getBlob(O):this.getText(O))?t.then(function(A){let R=this.handleResponse(A,m);I.resolve(R)}.bind(this)):I.reject({message:"File not found in the epub: "+O,stack:new Error().stack}),I.promise}handleResponse(O,m){return m=="json"?JSON.parse(O):Object(r.isXml)(m)?Object(r.parse)(O,"text/xml"):m=="xhtml"?Object(r.parse)(O,"application/xhtml+xml"):m=="html"||m=="htm"?Object(r.parse)(O,"text/html"):O}getBlob(O,m){var t=window.decodeURIComponent(O.substr(1)),I=this.zip.file(t);if(I)return m=m||W.lookup(I.name),I.async("uint8array").then(function(D){return new Blob([D],{type:m})})}getText(O,m){var t=window.decodeURIComponent(O.substr(1)),I=this.zip.file(t);if(I)return I.async("string").then(function(D){return D})}getBase64(O,m){var t=window.decodeURIComponent(O.substr(1)),I=this.zip.file(t);if(I)return m=m||W.lookup(I.name),I.async("base64").then(function(D){return"data:"+m+";base64,"+D})}createUrl(O,m){var t,I,D=new r.defer,A=window.URL||window.webkitURL||window.mozURL,R=m&&m.base64;return O in this.urlCache?(D.resolve(this.urlCache[O]),D.promise):(R?(I=this.getBase64(O))&&I.then(function(F){this.urlCache[O]=F,D.resolve(F)}.bind(this)):(I=this.getBlob(O))&&I.then(function(F){t=A.createObjectURL(F),this.urlCache[O]=t,D.resolve(t)}.bind(this)),I||D.reject({message:"File not found in the epub: "+O,stack:new Error().stack}),D.promise)}revokeUrl(O){var m=window.URL||window.webkitURL||window.mozURL,t=this.urlCache[O];t&&m.revokeObjectURL(t)}destroy(){var O=window.URL||window.webkitURL||window.mozURL;for(let m in this.urlCache)O.revokeObjectURL(m);this.zip=void 0,this.urlCache={}}},ht=o(23),G=o.n(ht);class ${constructor(m,t,I){this.urlCache={},this.storage=void 0,this.name=m,this.requester=t||w,this.resolver=I,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let m;G.a===void 0&&(m=G.a),this.storage=m.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(m){let t=navigator.onLine;this.online=t,t?this.emit("online",this):this.emit("offline",this)}add(m,t){let I=m.resources.map(D=>{let{href:A}=D,R=this.resolver(A),F=window.encodeURIComponent(R);return this.storage.getItem(F).then(Z=>!Z||t?this.requester(R,"binary").then(K=>this.storage.setItem(F,K)):Z)});return Promise.all(I)}put(m,t,I){let D=window.encodeURIComponent(m);return this.storage.getItem(D).then(A=>A||this.requester(m,"binary",t,I).then(R=>this.storage.setItem(D,R)))}request(m,t,I,D){return this.online?this.requester(m,t,I,D).then(A=>(this.put(m),A)):this.retrieve(m,t)}retrieve(m,t){new r.defer;var I=new i.a(m);return t||(t=I.extension),(t=="blob"?this.getBlob(m):this.getText(m)).then(D=>{var A,R=new r.defer;return D?(A=this.handleResponse(D,t),R.resolve(A)):R.reject({message:"File not found in storage: "+m,stack:new Error().stack}),R.promise})}handleResponse(m,t){return t=="json"?JSON.parse(m):Object(r.isXml)(t)?Object(r.parse)(m,"text/xml"):t=="xhtml"?Object(r.parse)(m,"application/xhtml+xml"):t=="html"||t=="htm"?Object(r.parse)(m,"text/html"):m}getBlob(m,t){let I=window.encodeURIComponent(m);return this.storage.getItem(I).then(function(D){if(D)return t=t||W.lookup(m),new Blob([D],{type:t})})}getText(m,t){let I=window.encodeURIComponent(m);return t=t||W.lookup(m),this.storage.getItem(I).then(function(D){var A,R=new r.defer,F=new FileReader;if(D)return A=new Blob([D],{type:t}),F.addEventListener("loadend",()=>{R.resolve(F.result)}),F.readAsText(A,t),R.promise})}getBase64(m,t){let I=window.encodeURIComponent(m);return t=t||W.lookup(m),this.storage.getItem(I).then(D=>{var A,R=new r.defer,F=new FileReader;if(D)return A=new Blob([D],{type:t}),F.addEventListener("loadend",()=>{R.resolve(F.result)}),F.readAsDataURL(A,t),R.promise})}createUrl(m,t){var I,D,A=new r.defer,R=window.URL||window.webkitURL||window.mozURL,F=t&&t.base64;return m in this.urlCache?(A.resolve(this.urlCache[m]),A.promise):(F?(D=this.getBase64(m))&&D.then(function(Z){this.urlCache[m]=Z,A.resolve(Z)}.bind(this)):(D=this.getBlob(m))&&D.then(function(Z){I=R.createObjectURL(Z),this.urlCache[m]=I,A.resolve(I)}.bind(this)),D||A.reject({message:"File not found in storage: "+m,stack:new Error().stack}),A.promise)}revokeUrl(m){var t=window.URL||window.webkitURL||window.mozURL,I=this.urlCache[m];I&&t.revokeObjectURL(I)}destroy(){var m=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)m.revokeObjectURL(t);this.urlCache={},this.removeListeners()}}g()($.prototype);var at=$,st=class{constructor(O){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",O&&this.parse(O)}parse(O){if(!O)return this;const m=Object(r.qs)(O,"display_options");return m?(Object(r.qsa)(m,"option").forEach(t=>{let I="";switch(t.childNodes.length&&(I=t.childNodes[0].nodeValue),t.attributes.name.value){case"interactive":this.interactive=I;break;case"fixed-layout":this.fixedLayout=I;break;case"open-to-spread":this.openToSpread=I;break;case"orientation-lock":this.orientationLock=I}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}};const ot="binary",yt="base64",mt="epub",dt="opf",pt="json",_t="directory";class bt{constructor(m,t){t===void 0&&typeof m!="string"&&!(m instanceof Blob)&&!(m instanceof ArrayBuffer)&&(t=m,m=void 0),this.settings=Object(r.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),Object(r.extend)(this.settings,t),this.opening=new r.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new r.defer,spine:new r.defer,metadata:new r.defer,cover:new r.defer,navigation:new r.defer,pageList:new r.defer,resources:new r.defer,displayOptions:new r.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||w,this.spine=new _,this.locations=new v(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),m&&this.open(m,this.settings.openAs).catch(I=>{var D=new Error("Cannot load book at "+m);this.emit(e.c.BOOK.OPEN_FAILED,D)})}open(m,t){var I,D=t||this.determineType(m);return D===ot?(this.archived=!0,this.url=new l.a("/",""),I=this.openEpub(m)):D===yt?(this.archived=!0,this.url=new l.a("/",""),I=this.openEpub(m,D)):D===mt?(this.archived=!0,this.url=new l.a("/",""),I=this.request(m,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):D==dt?(this.url=new l.a(m),I=this.openPackaging(this.url.Path.toString())):D==pt?(this.url=new l.a(m),I=this.openManifest(this.url.Path.toString())):(this.url=new l.a(m),I=this.openContainer("META-INF/container.xml").then(this.openPackaging.bind(this))),I}openEpub(m,t){return this.unarchive(m,t||this.settings.encoding).then(()=>this.openContainer("META-INF/container.xml")).then(I=>this.openPackaging(I))}openContainer(m){return this.load(m).then(t=>(this.container=new p(t),this.resolve(this.container.packagePath)))}openPackaging(m){return this.path=new i.a(m),this.load(m).then(t=>(this.packaging=new S(t),this.unpack(this.packaging)))}openManifest(m){return this.path=new i.a(m),this.load(m).then(t=>(this.packaging=new S,this.packaging.load(t),this.unpack(this.packaging)))}load(m){var t=this.resolve(m);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(m,t){if(m){var I=m;return m.indexOf("://")>-1?m:(this.path&&(I=this.path.resolve(m)),t!=0&&this.url&&(I=this.url.resolve(I)),I)}}canonical(m){return m?this.settings.canonical?this.settings.canonical(m):this.resolve(m,!0):""}determineType(m){var t;return this.settings.encoding==="base64"?yt:typeof m!="string"?ot:((t=new l.a(m).path().extension)&&(t=t.replace(/\?.*$/,"")),t?t==="epub"?mt:t==="opf"?dt:t==="json"?pt:void 0:_t)}unpack(m){this.package=m,this.packaging.metadata.layout===""?this.load(this.url.resolve("META-INF/com.apple.ibooks.display-options.xml")).then(t=>{this.displayOptions=new st(t),this.loading.displayOptions.resolve(this.displayOptions)}).catch(t=>{this.displayOptions=new st,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new st,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new E(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(t=>{console.error(t)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(m){let t=m.navPath||m.ncxPath,I=m.toc;return I?new Promise((D,A)=>{this.navigation=new j(I),m.pageList&&(this.pageList=new X(m.pageList)),D(this.navigation)}):t?this.load(t,"xml").then(D=>(this.navigation=new j(D),this.pageList=new X(D),this.navigation)):new Promise((D,A)=>{this.navigation=new j,this.pageList=new X,D(this.navigation)})}section(m){return this.spine.get(m)}renderTo(m,t){return this.rendition=new Q.a(this,t),this.rendition.attachTo(m),this.rendition}setRequestCredentials(m){this.settings.requestCredentials=m}setRequestHeaders(m){this.settings.requestHeaders=m}unarchive(m,t){return this.archive=new et,this.archive.open(m,t)}store(m){let t=this.settings.replacements&&this.settings.replacements!=="none",I=this.url,D=this.settings.requestMethod||w.bind(this);return this.storage=new at(m,D,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let A=(R,F)=>{F.output=this.resources.substitute(R,F.url)};this.resources.settings.replacements=t||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new l.a("/",""),this.spine.hooks.serialize.register(A)}),this.storage.on("online",()=>{this.url=I,this.spine.hooks.serialize.deregister(A)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((m,t)=>{t.output=this.resources.substitute(m,t.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(m){var t=new h.a(m),I=this.spine.get(t.spinePos),D=this.load.bind(this);return I?I.load(D).then(function(A){return t.toRange(I.document)}):new Promise((A,R)=>{R("CFI could not be found")})}key(m){var t=m||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${e.b}:${t}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}g()(bt.prototype),y.a=bt},function(k,y,o){var f=o(14).NAMESPACE;function g(C){return C!==""}function r(C,T){return C.hasOwnProperty(T)||(C[T]=!0),C}function l(C){if(!C)return[];var T=function(z){return z?z.split(/[\t\n\f\r ]+/).filter(g):[]}(C);return Object.keys(T.reduce(r,{}))}function i(C,T){for(var z in C)T[z]=C[z]}function h(C,T){var z=C.prototype;if(!(z instanceof T)){let H=function(){};var q=H;H.prototype=T.prototype,i(z,H=new H),C.prototype=z=H}z.constructor!=C&&(typeof C!="function"&&console.error("unknown Class:"+C),z.constructor=C)}var c={},a=c.ELEMENT_NODE=1,w=c.ATTRIBUTE_NODE=2,s=c.TEXT_NODE=3,d=c.CDATA_SECTION_NODE=4,_=c.ENTITY_REFERENCE_NODE=5,n=c.ENTITY_NODE=6,e=c.PROCESSING_INSTRUCTION_NODE=7,u=c.COMMENT_NODE=8,v=c.DOCUMENT_NODE=9,b=c.DOCUMENT_TYPE_NODE=10,x=c.DOCUMENT_FRAGMENT_NODE=11,p=c.NOTATION_NODE=12,S={},j={},U=(S.INDEX_SIZE_ERR=(j[1]="Index size error",1),S.DOMSTRING_SIZE_ERR=(j[2]="DOMString size error",2),S.HIERARCHY_REQUEST_ERR=(j[3]="Hierarchy request error",3)),P=(S.WRONG_DOCUMENT_ERR=(j[4]="Wrong document",4),S.INVALID_CHARACTER_ERR=(j[5]="Invalid character",5),S.NO_DATA_ALLOWED_ERR=(j[6]="No data allowed",6),S.NO_MODIFICATION_ALLOWED_ERR=(j[7]="No modification allowed",7),S.NOT_FOUND_ERR=(j[8]="Not found",8)),W=(S.NOT_SUPPORTED_ERR=(j[9]="Not supported",9),S.INUSE_ATTRIBUTE_ERR=(j[10]="Attribute in use",10));S.INVALID_STATE_ERR=(j[11]="Invalid state",11),S.SYNTAX_ERR=(j[12]="Syntax error",12),S.INVALID_MODIFICATION_ERR=(j[13]="Invalid modification",13),S.NAMESPACE_ERR=(j[14]="Invalid namespace",14),S.INVALID_ACCESS_ERR=(j[15]="Invalid access",15);function E(C,T){if(T instanceof Error)var z=T;else z=this,Error.call(this,j[C]),this.message=j[C],Error.captureStackTrace&&Error.captureStackTrace(this,E);return z.code=C,T&&(this.message=this.message+": "+T),z}function X(){}function Q(C,T){this._node=C,this._refresh=T,J(this)}function J(C){var T=C._node._inc||C._node.ownerDocument._inc;if(C._inc!=T){var z=C._refresh(C._node);M(C,"length",z.length),i(z,C),C._inc=T}}function ct(){}function et(C,T){for(var z=C.length;z--;)if(C[z]===T)return z}function ht(C,T,z,q){if(q?T[et(T,q)]=z:T[T.length++]=z,C){z.ownerElement=C;var H=C.ownerDocument;H&&(q&&mt(H,C,q),function(Y,tt,it){Y&&Y._inc++,it.namespaceURI===f.XMLNS&&(tt._nsMap[it.prefix?it.localName:""]=it.value)}(H,C,z))}}function G(C,T,z){var q=et(T,z);if(!(q>=0))throw E(P,new Error(C.tagName+"@"+z));for(var H=T.length-1;q<H;)T[q]=T[++q];if(T.length=H,C){var Y=C.ownerDocument;Y&&(mt(Y,C,z),z.ownerElement=null)}}function $(){}function at(){}function st(C){return(C=="<"?"&lt;":C==">"&&"&gt;")||C=="&"&&"&amp;"||C=='"'&&"&quot;"||"&#"+C.charCodeAt()+";"}function ot(C,T){if(T(C))return!0;if(C=C.firstChild)do if(ot(C,T))return!0;while(C=C.nextSibling)}function yt(){}function mt(C,T,z,q){C&&C._inc++,z.namespaceURI===f.XMLNS&&delete T._nsMap[z.prefix?z.localName:""]}function dt(C,T,z){if(C&&C._inc){C._inc++;var q=T.childNodes;if(z)q[q.length++]=z;else{for(var H=T.firstChild,Y=0;H;)q[Y++]=H,H=H.nextSibling;q.length=Y}}}function pt(C,T){var z=T.previousSibling,q=T.nextSibling;return z?z.nextSibling=q:C.firstChild=q,q?q.previousSibling=z:C.lastChild=z,dt(C.ownerDocument,C),T}function _t(C,T,z){var q=T.parentNode;if(q&&q.removeChild(T),T.nodeType===x){var H=T.firstChild;if(H==null)return T;var Y=T.lastChild}else H=Y=T;var tt=z?z.previousSibling:C.lastChild;H.previousSibling=tt,Y.nextSibling=z,tt?tt.nextSibling=H:C.firstChild=H,z==null?C.lastChild=Y:z.previousSibling=Y;do H.parentNode=C;while(H!==Y&&(H=H.nextSibling));return dt(C.ownerDocument||C,C),T.nodeType==x&&(T.firstChild=T.lastChild=null),T}function bt(){this._nsMap={}}function O(){}function m(){}function t(){}function I(){}function D(){}function A(){}function R(){}function F(){}function Z(){}function K(){}function V(){}function nt(){}function lt(C,T){var z=[],q=this.nodeType==9&&this.documentElement||this,H=q.prefix,Y=q.namespaceURI;if(Y&&H==null&&(H=q.lookupPrefix(Y))==null)var tt=[{namespace:Y,prefix:null}];return B(this,z,C,T,tt),z.join("")}function rt(C,T,z){var q=C.prefix||"",H=C.namespaceURI;if(!H||q==="xml"&&H===f.XML||H===f.XMLNS)return!1;for(var Y=z.length;Y--;){var tt=z[Y];if(tt.prefix===q)return tt.namespace!==H}return!0}function L(C,T,z){C.push(" ",T,'="',z.replace(/[<&"]/g,st),'"')}function B(C,T,z,q,H){if(H||(H=[]),q){if(!(C=q(C)))return;if(typeof C=="string")return void T.push(C)}switch(C.nodeType){case a:var Y=C.attributes,tt=Y.length,it=C.firstChild,ut=C.tagName,ft=ut;if(!(z=f.isHTML(C.namespaceURI)||z)&&!C.prefix&&C.namespaceURI){for(var vt,gt=0;gt<Y.length;gt++)if(Y.item(gt).name==="xmlns"){vt=Y.item(gt).value;break}if(!vt){for(var wt=H.length-1;wt>=0;wt--)if((Et=H[wt]).prefix===""&&Et.namespace===C.namespaceURI){vt=Et.namespace;break}}if(vt!==C.namespaceURI)for(wt=H.length-1;wt>=0;wt--){var Et;if((Et=H[wt]).namespace===C.namespaceURI){Et.prefix&&(ft=Et.prefix+":"+ut);break}}}T.push("<",ft);for(var St=0;St<tt;St++)(Nt=Y.item(St)).prefix=="xmlns"?H.push({prefix:Nt.localName,namespace:Nt.value}):Nt.nodeName=="xmlns"&&H.push({prefix:"",namespace:Nt.value});for(St=0;St<tt;St++){var Nt,Rt,zt;rt(Nt=Y.item(St),0,H)&&(L(T,(Rt=Nt.prefix||"")?"xmlns:"+Rt:"xmlns",zt=Nt.namespaceURI),H.push({prefix:Rt,namespace:zt})),B(Nt,T,z,q,H)}if(ut===ft&&rt(C,0,H)&&(L(T,(Rt=C.prefix||"")?"xmlns:"+Rt:"xmlns",zt=C.namespaceURI),H.push({prefix:Rt,namespace:zt})),it||z&&!/^(?:meta|link|img|br|hr|input)$/i.test(ut)){if(T.push(">"),z&&/^script$/i.test(ut))for(;it;)it.data?T.push(it.data):B(it,T,z,q,H.slice()),it=it.nextSibling;else for(;it;)B(it,T,z,q,H.slice()),it=it.nextSibling;T.push("</",ft,">")}else T.push("/>");return;case v:case x:for(it=C.firstChild;it;)B(it,T,z,q,H.slice()),it=it.nextSibling;return;case w:return L(T,C.name,C.value);case s:return T.push(C.data.replace(/[<&]/g,st).replace(/]]>/g,"]]&gt;"));case d:return T.push("<![CDATA[",C.data,"]]>");case u:return T.push("<!--",C.data,"-->");case b:var pe=C.publicId,Mt=C.systemId;if(T.push("<!DOCTYPE ",C.name),pe)T.push(" PUBLIC ",pe),Mt&&Mt!="."&&T.push(" ",Mt),T.push(">");else if(Mt&&Mt!=".")T.push(" SYSTEM ",Mt,">");else{var me=C.internalSubset;me&&T.push(" [",me,"]"),T.push(">")}return;case e:return T.push("<?",C.target," ",C.data,"?>");case _:return T.push("&",C.nodeName,";");default:T.push("??",C.nodeName)}}function M(C,T,z){C[T]=z}E.prototype=Error.prototype,i(S,E),X.prototype={length:0,item:function(C){return this[C]||null},toString:function(C,T){for(var z=[],q=0;q<this.length;q++)B(this[q],z,C,T);return z.join("")}},Q.prototype.item=function(C){return J(this),this[C]},h(Q,X),ct.prototype={length:0,item:X.prototype.item,getNamedItem:function(C){for(var T=this.length;T--;){var z=this[T];if(z.nodeName==C)return z}},setNamedItem:function(C){var T=C.ownerElement;if(T&&T!=this._ownerElement)throw new E(W);var z=this.getNamedItem(C.nodeName);return ht(this._ownerElement,this,C,z),z},setNamedItemNS:function(C){var T,z=C.ownerElement;if(z&&z!=this._ownerElement)throw new E(W);return T=this.getNamedItemNS(C.namespaceURI,C.localName),ht(this._ownerElement,this,C,T),T},removeNamedItem:function(C){var T=this.getNamedItem(C);return G(this._ownerElement,this,T),T},removeNamedItemNS:function(C,T){var z=this.getNamedItemNS(C,T);return G(this._ownerElement,this,z),z},getNamedItemNS:function(C,T){for(var z=this.length;z--;){var q=this[z];if(q.localName==T&&q.namespaceURI==C)return q}return null}},$.prototype={hasFeature:function(C,T){return!0},createDocument:function(C,T,z){var q=new yt;if(q.implementation=this,q.childNodes=new X,q.doctype=z||null,z&&q.appendChild(z),T){var H=q.createElementNS(C,T);q.appendChild(H)}return q},createDocumentType:function(C,T,z){var q=new A;return q.name=C,q.nodeName=C,q.publicId=T||"",q.systemId=z||"",q}},at.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(C,T){return _t(this,C,T)},replaceChild:function(C,T){this.insertBefore(C,T),T&&this.removeChild(T)},removeChild:function(C){return pt(this,C)},appendChild:function(C){return this.insertBefore(C,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(C){return function T(z,q,H){var Y=new q.constructor;for(var tt in q){var it=q[tt];typeof it!="object"&&it!=Y[tt]&&(Y[tt]=it)}switch(q.childNodes&&(Y.childNodes=new X),Y.ownerDocument=z,Y.nodeType){case a:var ut=q.attributes,ft=Y.attributes=new ct,vt=ut.length;ft._ownerElement=Y;for(var gt=0;gt<vt;gt++)Y.setAttributeNode(T(z,ut.item(gt),!0));break;case w:H=!0}if(H)for(var wt=q.firstChild;wt;)Y.appendChild(T(z,wt,H)),wt=wt.nextSibling;return Y}(this.ownerDocument||this,this,C)},normalize:function(){for(var C=this.firstChild;C;){var T=C.nextSibling;T&&T.nodeType==s&&C.nodeType==s?(this.removeChild(T),C.appendData(T.data)):(C.normalize(),C=T)}},isSupported:function(C,T){return this.ownerDocument.implementation.hasFeature(C,T)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(C){for(var T=this;T;){var z=T._nsMap;if(z){for(var q in z)if(z[q]==C)return q}T=T.nodeType==w?T.ownerDocument:T.parentNode}return null},lookupNamespaceURI:function(C){for(var T=this;T;){var z=T._nsMap;if(z&&C in z)return z[C];T=T.nodeType==w?T.ownerDocument:T.parentNode}return null},isDefaultNamespace:function(C){return this.lookupPrefix(C)==null}},i(c,at),i(c,at.prototype),yt.prototype={nodeName:"#document",nodeType:v,doctype:null,documentElement:null,_inc:1,insertBefore:function(C,T){if(C.nodeType==x){for(var z=C.firstChild;z;){var q=z.nextSibling;this.insertBefore(z,T),z=q}return C}return this.documentElement==null&&C.nodeType==a&&(this.documentElement=C),_t(this,C,T),C.ownerDocument=this,C},removeChild:function(C){return this.documentElement==C&&(this.documentElement=null),pt(this,C)},importNode:function(C,T){return function z(q,H,Y){var tt;switch(H.nodeType){case a:(tt=H.cloneNode(!1)).ownerDocument=q;case x:break;case w:Y=!0}if(tt||(tt=H.cloneNode(!1)),tt.ownerDocument=q,tt.parentNode=null,Y)for(var it=H.firstChild;it;)tt.appendChild(z(q,it,Y)),it=it.nextSibling;return tt}(this,C,T)},getElementById:function(C){var T=null;return ot(this.documentElement,function(z){if(z.nodeType==a&&z.getAttribute("id")==C)return T=z,!0}),T},getElementsByClassName:function(C){var T=l(C);return new Q(this,function(z){var q=[];return T.length>0&&ot(z.documentElement,function(H){if(H!==z&&H.nodeType===a){var Y=H.getAttribute("class");if(Y){var tt=C===Y;if(!tt){var it=l(Y);tt=T.every((ut=it,function(ft){return ut&&ut.indexOf(ft)!==-1}))}tt&&q.push(H)}}var ut}),q})},createElement:function(C){var T=new bt;return T.ownerDocument=this,T.nodeName=C,T.tagName=C,T.localName=C,T.childNodes=new X,(T.attributes=new ct)._ownerElement=T,T},createDocumentFragment:function(){var C=new K;return C.ownerDocument=this,C.childNodes=new X,C},createTextNode:function(C){var T=new t;return T.ownerDocument=this,T.appendData(C),T},createComment:function(C){var T=new I;return T.ownerDocument=this,T.appendData(C),T},createCDATASection:function(C){var T=new D;return T.ownerDocument=this,T.appendData(C),T},createProcessingInstruction:function(C,T){var z=new V;return z.ownerDocument=this,z.tagName=z.target=C,z.nodeValue=z.data=T,z},createAttribute:function(C){var T=new O;return T.ownerDocument=this,T.name=C,T.nodeName=C,T.localName=C,T.specified=!0,T},createEntityReference:function(C){var T=new Z;return T.ownerDocument=this,T.nodeName=C,T},createElementNS:function(C,T){var z=new bt,q=T.split(":"),H=z.attributes=new ct;return z.childNodes=new X,z.ownerDocument=this,z.nodeName=T,z.tagName=T,z.namespaceURI=C,q.length==2?(z.prefix=q[0],z.localName=q[1]):z.localName=T,H._ownerElement=z,z},createAttributeNS:function(C,T){var z=new O,q=T.split(":");return z.ownerDocument=this,z.nodeName=T,z.name=T,z.namespaceURI=C,z.specified=!0,q.length==2?(z.prefix=q[0],z.localName=q[1]):z.localName=T,z}},h(yt,at),bt.prototype={nodeType:a,hasAttribute:function(C){return this.getAttributeNode(C)!=null},getAttribute:function(C){var T=this.getAttributeNode(C);return T&&T.value||""},getAttributeNode:function(C){return this.attributes.getNamedItem(C)},setAttribute:function(C,T){var z=this.ownerDocument.createAttribute(C);z.value=z.nodeValue=""+T,this.setAttributeNode(z)},removeAttribute:function(C){var T=this.getAttributeNode(C);T&&this.removeAttributeNode(T)},appendChild:function(C){return C.nodeType===x?this.insertBefore(C,null):function(T,z){var q=z.parentNode;if(q){var H=T.lastChild;q.removeChild(z),H=T.lastChild}return H=T.lastChild,z.parentNode=T,z.previousSibling=H,z.nextSibling=null,H?H.nextSibling=z:T.firstChild=z,T.lastChild=z,dt(T.ownerDocument,T,z),z}(this,C)},setAttributeNode:function(C){return this.attributes.setNamedItem(C)},setAttributeNodeNS:function(C){return this.attributes.setNamedItemNS(C)},removeAttributeNode:function(C){return this.attributes.removeNamedItem(C.nodeName)},removeAttributeNS:function(C,T){var z=this.getAttributeNodeNS(C,T);z&&this.removeAttributeNode(z)},hasAttributeNS:function(C,T){return this.getAttributeNodeNS(C,T)!=null},getAttributeNS:function(C,T){var z=this.getAttributeNodeNS(C,T);return z&&z.value||""},setAttributeNS:function(C,T,z){var q=this.ownerDocument.createAttributeNS(C,T);q.value=q.nodeValue=""+z,this.setAttributeNode(q)},getAttributeNodeNS:function(C,T){return this.attributes.getNamedItemNS(C,T)},getElementsByTagName:function(C){return new Q(this,function(T){var z=[];return ot(T,function(q){q===T||q.nodeType!=a||C!=="*"&&q.tagName!=C||z.push(q)}),z})},getElementsByTagNameNS:function(C,T){return new Q(this,function(z){var q=[];return ot(z,function(H){H===z||H.nodeType!==a||C!=="*"&&H.namespaceURI!==C||T!=="*"&&H.localName!=T||q.push(H)}),q})}},yt.prototype.getElementsByTagName=bt.prototype.getElementsByTagName,yt.prototype.getElementsByTagNameNS=bt.prototype.getElementsByTagNameNS,h(bt,at),O.prototype.nodeType=w,h(O,at),m.prototype={data:"",substringData:function(C,T){return this.data.substring(C,C+T)},appendData:function(C){C=this.data+C,this.nodeValue=this.data=C,this.length=C.length},insertData:function(C,T){this.replaceData(C,0,T)},appendChild:function(C){throw new Error(j[U])},deleteData:function(C,T){this.replaceData(C,T,"")},replaceData:function(C,T,z){z=this.data.substring(0,C)+z+this.data.substring(C+T),this.nodeValue=this.data=z,this.length=z.length}},h(m,at),t.prototype={nodeName:"#text",nodeType:s,splitText:function(C){var T=this.data,z=T.substring(C);T=T.substring(0,C),this.data=this.nodeValue=T,this.length=T.length;var q=this.ownerDocument.createTextNode(z);return this.parentNode&&this.parentNode.insertBefore(q,this.nextSibling),q}},h(t,m),I.prototype={nodeName:"#comment",nodeType:u},h(I,m),D.prototype={nodeName:"#cdata-section",nodeType:d},h(D,m),A.prototype.nodeType=b,h(A,at),R.prototype.nodeType=p,h(R,at),F.prototype.nodeType=n,h(F,at),Z.prototype.nodeType=_,h(Z,at),K.prototype.nodeName="#document-fragment",K.prototype.nodeType=x,h(K,at),V.prototype.nodeType=e,h(V,at),nt.prototype.serializeToString=function(C,T,z){return lt.call(C,T,z)},at.prototype.toString=lt;try{Object.defineProperty&&(Object.defineProperty(Q.prototype,"length",{get:function(){return J(this),this.$$length}}),Object.defineProperty(at.prototype,"textContent",{get:function(){return function C(T){switch(T.nodeType){case a:case x:var z=[];for(T=T.firstChild;T;)T.nodeType!==7&&T.nodeType!==8&&z.push(C(T)),T=T.nextSibling;return z.join("");default:return T.nodeValue}}(this)},set:function(C){switch(this.nodeType){case a:case x:for(;this.firstChild;)this.removeChild(this.firstChild);(C||String(C))&&this.appendChild(this.ownerDocument.createTextNode(C));break;default:this.data=C,this.value=C,this.nodeValue=C}}}),M=function(C,T,z){C["$$"+T]=z})}catch{}y.DocumentType=A,y.DOMException=E,y.DOMImplementation=$,y.Element=bt,y.Node=at,y.NodeList=X,y.XMLSerializer=nt},function(k,y,o){var f=o(52),g=typeof self=="object"&&self&&self.Object===Object&&self,r=f||g||Function("return this")();k.exports=r},function(k,y,o){var f=o(26).Symbol;k.exports=f},function(k,y,o){var f=o(21),g=o(19);k.exports=function(r,l,i){var h=!0,c=!0;if(typeof r!="function")throw new TypeError("Expected a function");return g(i)&&(h="leading"in i?!!i.leading:h,c="trailing"in i?!!i.trailing:c),f(r,l,{leading:h,maxWait:l,trailing:c})}},function(k,y){k.exports=N},function(k,y,o){o.r(y),function(f){var g=o(24),r=o(16),l=o(2),i=o(12),h=o(0),c=o(1);o(20),o(10),o(22);function a(w,s){return new g.a(w,s)}a.VERSION=c.b,f!==void 0&&(f.EPUBJS_VERSION=c.b),a.Book=g.a,a.Rendition=r.a,a.Contents=i.a,a.CFI=l.a,a.utils=h,y.default=a}.call(this,o(17))},function(k,y,o){var f=o(32),g=o(40),r=o(41),l=o(42);(k.exports=function(i,h){var c,a,w,s,d;return arguments.length<2||typeof i!="string"?(s=h,h=i,i=null):s=arguments[2],i==null?(c=w=!0,a=!1):(c=l.call(i,"c"),a=l.call(i,"e"),w=l.call(i,"w")),d={value:h,configurable:c,enumerable:a,writable:w},s?f(g(s),d):d}).gs=function(i,h,c){var a,w,s,d;return typeof i!="string"?(s=c,c=h,h=i,i=null):s=arguments[3],h==null?h=void 0:r(h)?c==null?c=void 0:r(c)||(s=c,c=void 0):(s=h,h=c=void 0),i==null?(a=!0,w=!1):(a=l.call(i,"c"),w=l.call(i,"e")),d={get:h,set:c,configurable:a,enumerable:w},s?f(g(s),d):d}},function(k,y,o){k.exports=o(33)()?Object.assign:o(34)},function(k,y,o){k.exports=function(){var f,g=Object.assign;return typeof g=="function"&&(g(f={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),f.foo+f.bar+f.trzy==="razdwatrzy")}},function(k,y,o){var f=o(35),g=o(39),r=Math.max;k.exports=function(l,i){var h,c,a,w=r(arguments.length,2);for(l=Object(g(l)),a=function(s){try{l[s]=i[s]}catch(d){h||(h=d)}},c=1;c<w;++c)f(i=arguments[c]).forEach(a);if(h!==void 0)throw h;return l}},function(k,y,o){k.exports=o(36)()?Object.keys:o(37)},function(k,y,o){k.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(k,y,o){var f=o(18),g=Object.keys;k.exports=function(r){return g(f(r)?Object(r):r)}},function(k,y,o){k.exports=function(){}},function(k,y,o){var f=o(18);k.exports=function(g){if(!f(g))throw new TypeError("Cannot use null or undefined");return g}},function(k,y,o){var f=o(18),g=Array.prototype.forEach,r=Object.create,l=function(i,h){var c;for(c in i)h[c]=i[c]};k.exports=function(i){var h=r(null);return g.call(arguments,function(c){f(c)&&l(Object(c),h)}),h}},function(k,y,o){k.exports=function(f){return typeof f=="function"}},function(k,y,o){k.exports=o(43)()?String.prototype.contains:o(44)},function(k,y,o){var f="razdwatrzy";k.exports=function(){return typeof f.contains=="function"&&f.contains("dwa")===!0&&f.contains("foo")===!1}},function(k,y,o){var f=String.prototype.indexOf;k.exports=function(g){return f.call(this,g,arguments[1])>-1}},function(k,y,o){k.exports=function(f){if(typeof f!="function")throw new TypeError(f+" is not a function");return f}},function(k,y,o){var f=o(14),g=o(25),r=o(47),l=o(48),i=g.DOMImplementation,h=f.NAMESPACE,c=l.ParseError,a=l.XMLReader;function w(u){this.options=u||{locator:{}}}function s(){this.cdata=!1}function d(u,v){v.lineNumber=u.lineNumber,v.columnNumber=u.columnNumber}function _(u){if(u)return`
@`+(u.systemId||"")+"#[line:"+u.lineNumber+",col:"+u.columnNumber+"]"}function n(u,v,b){return typeof u=="string"?u.substr(v,b):u.length>=v+b||v?new java.lang.String(u,v,b)+"":u}function e(u,v){u.currentElement?u.currentElement.appendChild(v):u.doc.appendChild(v)}w.prototype.parseFromString=function(u,v){var b=this.options,x=new a,p=b.domBuilder||new s,S=b.errorHandler,j=b.locator,U=b.xmlns||{},P=/\/x?html?$/.test(v),W=P?r.HTML_ENTITIES:r.XML_ENTITIES;return j&&p.setDocumentLocator(j),x.errorHandler=function(E,X,Q){if(!E){if(X instanceof s)return X;E=X}var J={},ct=E instanceof Function;function et(ht){var G=E[ht];!G&&ct&&(G=E.length==2?function($){E(ht,$)}:E),J[ht]=G&&function($){G("[xmldom "+ht+"]	"+$+_(Q))}||function(){}}return Q=Q||{},et("warning"),et("error"),et("fatalError"),J}(S,p,j),x.domBuilder=b.domBuilder||p,P&&(U[""]=h.HTML),U.xml=U.xml||h.XML,u&&typeof u=="string"?x.parse(u,U,W):x.errorHandler.error("invalid doc source"),p.doc},s.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(u,v,b,x){var p=this.doc,S=p.createElementNS(u,b||v),j=x.length;e(this,S),this.currentElement=S,this.locator&&d(this.locator,S);for(var U=0;U<j;U++){u=x.getURI(U);var P=x.getValue(U),W=(b=x.getQName(U),p.createAttributeNS(u,b));this.locator&&d(x.getLocator(U),W),W.value=W.nodeValue=P,S.setAttributeNode(W)}},endElement:function(u,v,b){var x=this.currentElement;x.tagName,this.currentElement=x.parentNode},startPrefixMapping:function(u,v){},endPrefixMapping:function(u){},processingInstruction:function(u,v){var b=this.doc.createProcessingInstruction(u,v);this.locator&&d(this.locator,b),e(this,b)},ignorableWhitespace:function(u,v,b){},characters:function(u,v,b){if(u=n.apply(this,arguments)){if(this.cdata)var x=this.doc.createCDATASection(u);else x=this.doc.createTextNode(u);this.currentElement?this.currentElement.appendChild(x):/^\s*$/.test(u)&&this.doc.appendChild(x),this.locator&&d(this.locator,x)}},skippedEntity:function(u){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(u){(this.locator=u)&&(u.lineNumber=0)},comment:function(u,v,b){u=n.apply(this,arguments);var x=this.doc.createComment(u);this.locator&&d(this.locator,x),e(this,x)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(u,v,b){var x=this.doc.implementation;if(x&&x.createDocumentType){var p=x.createDocumentType(u,v,b);this.locator&&d(this.locator,p),e(this,p),this.doc.doctype=p}},warning:function(u){console.warn("[xmldom warning]	"+u,_(this.locator))},error:function(u){console.error("[xmldom error]	"+u,_(this.locator))},fatalError:function(u){throw new c(u,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(u){s.prototype[u]=function(){return null}}),y.__DOMHandler=s,y.DOMParser=w,y.DOMImplementation=g.DOMImplementation,y.XMLSerializer=g.XMLSerializer},function(k,y,o){var f=o(14).freeze;y.XML_ENTITIES=f({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),y.HTML_ENTITIES=f({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}),y.entityMap=y.HTML_ENTITIES},function(k,y,o){var f=o(14).NAMESPACE,g=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+g.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),l=new RegExp("^"+g.source+r.source+"*(?::"+g.source+r.source+"*)?$");function i(v,b){this.message=v,this.locator=b,Error.captureStackTrace&&Error.captureStackTrace(this,i)}function h(){}function c(v,b){return b.lineNumber=v.lineNumber,b.columnNumber=v.columnNumber,b}function a(v,b,x,p,S,j){function U(J,ct,et){x.attributeNames.hasOwnProperty(J)&&j.fatalError("Attribute "+J+" redefined"),x.addValue(J,ct,et)}for(var P,W=++b,E=0;;){var X=v.charAt(W);switch(X){case"=":if(E===1)P=v.slice(b,W),E=3;else{if(E!==2)throw new Error("attribute equal must after attrName");E=3}break;case"'":case'"':if(E===3||E===1){if(E===1&&(j.warning('attribute value must after "="'),P=v.slice(b,W)),b=W+1,!((W=v.indexOf(X,b))>0))throw new Error("attribute value no end '"+X+"' match");U(P,Q=v.slice(b,W).replace(/&#?\w+;/g,S),b-1),E=5}else{if(E!=4)throw new Error('attribute value must after "="');U(P,Q=v.slice(b,W).replace(/&#?\w+;/g,S),b),j.warning('attribute "'+P+'" missed start quot('+X+")!!"),b=W+1,E=5}break;case"/":switch(E){case 0:x.setTagName(v.slice(b,W));case 5:case 6:case 7:E=7,x.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return j.error("unexpected end of input"),E==0&&x.setTagName(v.slice(b,W)),W;case">":switch(E){case 0:x.setTagName(v.slice(b,W));case 5:case 6:case 7:break;case 4:case 1:(Q=v.slice(b,W)).slice(-1)==="/"&&(x.closed=!0,Q=Q.slice(0,-1));case 2:E===2&&(Q=P),E==4?(j.warning('attribute "'+Q+'" missed quot(")!'),U(P,Q.replace(/&#?\w+;/g,S),b)):(f.isHTML(p[""])&&Q.match(/^(?:disabled|checked|selected)$/i)||j.warning('attribute "'+Q+'" missed value!! "'+Q+'" instead!!'),U(Q,Q,b));break;case 3:throw new Error("attribute value missed!!")}return W;case"":X=" ";default:if(X<=" ")switch(E){case 0:x.setTagName(v.slice(b,W)),E=6;break;case 1:P=v.slice(b,W),E=2;break;case 4:var Q=v.slice(b,W).replace(/&#?\w+;/g,S);j.warning('attribute "'+Q+'" missed quot(")!!'),U(P,Q,b);case 5:E=6}else switch(E){case 2:x.tagName,f.isHTML(p[""])&&P.match(/^(?:disabled|checked|selected)$/i)||j.warning('attribute "'+P+'" missed value!! "'+P+'" instead2!!'),U(P,P,b),b=W,E=1;break;case 5:j.warning('attribute space is required"'+P+'"!!');case 6:E=1,b=W;break;case 3:E=4,b=W;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}W++}}function w(v,b,x){for(var p=v.tagName,S=null,j=v.length;j--;){var U=v[j],P=U.qName,W=U.value;if((J=P.indexOf(":"))>0)var E=U.prefix=P.slice(0,J),X=P.slice(J+1),Q=E==="xmlns"&&X;else X=P,E=null,Q=P==="xmlns"&&"";U.localName=X,Q!==!1&&(S==null&&(S={},_(x,x={})),x[Q]=S[Q]=W,U.uri=f.XMLNS,b.startPrefixMapping(Q,W))}for(j=v.length;j--;)(E=(U=v[j]).prefix)&&(E==="xml"&&(U.uri=f.XML),E!=="xmlns"&&(U.uri=x[E||""]));var J;(J=p.indexOf(":"))>0?(E=v.prefix=p.slice(0,J),X=v.localName=p.slice(J+1)):(E=null,X=v.localName=p);var ct=v.uri=x[E||""];if(b.startElement(ct,X,p,v),!v.closed)return v.currentNSMap=x,v.localNSMap=S,!0;if(b.endElement(ct,X,p),S)for(E in S)b.endPrefixMapping(E)}function s(v,b,x,p,S){if(/^(?:script|textarea)$/i.test(x)){var j=v.indexOf("</"+x+">",b),U=v.substring(b+1,j);if(/[&<]/.test(U))return/^script$/i.test(x)?(S.characters(U,0,U.length),j):(U=U.replace(/&#?\w+;/g,p),S.characters(U,0,U.length),j)}return b+1}function d(v,b,x,p){var S=p[x];return S==null&&((S=v.lastIndexOf("</"+x+">"))<b&&(S=v.lastIndexOf("</"+x)),p[x]=S),S<b}function _(v,b){for(var x in v)b[x]=v[x]}function n(v,b,x,p){switch(v.charAt(b+2)){case"-":return v.charAt(b+3)==="-"?(S=v.indexOf("-->",b+4))>b?(x.comment(v,b+4,S-b-4),S+3):(p.error("Unclosed comment"),-1):-1;default:if(v.substr(b+3,6)=="CDATA["){var S=v.indexOf("]]>",b+9);return x.startCDATA(),x.characters(v,b+9,S-b-9),x.endCDATA(),S+3}var j=function(Q,J){var ct,et=[],ht=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ht.lastIndex=J,ht.exec(Q);ct=ht.exec(Q);)if(et.push(ct),ct[1])return et}(v,b),U=j.length;if(U>1&&/!doctype/i.test(j[0][0])){var P=j[1][0],W=!1,E=!1;U>3&&(/^public$/i.test(j[2][0])?(W=j[3][0],E=U>4&&j[4][0]):/^system$/i.test(j[2][0])&&(E=j[3][0]));var X=j[U-1];return x.startDTD(P,W,E),x.endDTD(),X.index+X[0].length}}return-1}function e(v,b,x){var p=v.indexOf("?>",b);if(p){var S=v.substring(b,p).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return S?(S[0].length,x.processingInstruction(S[1],S[2]),p+2):-1}return-1}function u(){this.attributeNames={}}i.prototype=new Error,i.prototype.name=i.name,h.prototype={parse:function(v,b,x){var p=this.domBuilder;p.startDocument(),_(b,b={}),function(S,j,U,P,W){function E(F){var Z=F.slice(1,-1);return Z in U?U[Z]:Z.charAt(0)==="#"?function(K){if(K>65535){var V=55296+((K-=65536)>>10),nt=56320+(1023&K);return String.fromCharCode(V,nt)}return String.fromCharCode(K)}(parseInt(Z.substr(1).replace("x","0x"))):(W.error("entity not found:"+F),F)}function X(F){if(F>at){var Z=S.substring(at,F).replace(/&#?\w+;/g,E);ht&&Q(at),P.characters(Z,0,F-at),at=F}}function Q(F,Z){for(;F>=ct&&(Z=et.exec(S));)J=Z.index,ct=J+Z[0].length,ht.lineNumber++;ht.columnNumber=F-J+1}for(var J=0,ct=0,et=/.*(?:\r\n?|\n)|.*$/g,ht=P.locator,G=[{currentNSMap:j}],$={},at=0;;){try{var st=S.indexOf("<",at);if(st<0){if(!S.substr(at).match(/^\s*$/)){var ot=P.doc,yt=ot.createTextNode(S.substr(at));ot.appendChild(yt),P.currentElement=yt}return}switch(st>at&&X(st),S.charAt(st+1)){case"/":var mt=S.indexOf(">",st+3),dt=S.substring(st+2,mt).replace(/[ \t\n\r]+$/g,""),pt=G.pop();mt<0?(dt=S.substring(st+2).replace(/[\s<].*/,""),W.error("end tag name: "+dt+" is not complete:"+pt.tagName),mt=st+1+dt.length):dt.match(/\s</)&&(dt=dt.replace(/[\s<].*/,""),W.error("end tag name: "+dt+" maybe not complete"),mt=st+1+dt.length);var _t=pt.localNSMap,bt=pt.tagName==dt;if(bt||pt.tagName&&pt.tagName.toLowerCase()==dt.toLowerCase()){if(P.endElement(pt.uri,pt.localName,dt),_t)for(var O in _t)P.endPrefixMapping(O);bt||W.fatalError("end tag name: "+dt+" is not match the current start tagName:"+pt.tagName)}else G.push(pt);mt++;break;case"?":ht&&Q(st),mt=e(S,st,P);break;case"!":ht&&Q(st),mt=n(S,st,P,W);break;default:ht&&Q(st);var m=new u,t=G[G.length-1].currentNSMap,I=(mt=a(S,st,m,t,E,W),m.length);if(!m.closed&&d(S,mt,m.tagName,$)&&(m.closed=!0,U.nbsp||W.warning("unclosed xml attribute")),ht&&I){for(var D=c(ht,{}),A=0;A<I;A++){var R=m[A];Q(R.offset),R.locator=c(ht,{})}P.locator=D,w(m,P,t)&&G.push(m),P.locator=ht}else w(m,P,t)&&G.push(m);f.isHTML(m.uri)&&!m.closed?mt=s(S,mt,m.tagName,E,P):mt++}}catch(F){if(F instanceof i)throw F;W.error("element parse error: "+F),mt=-1}mt>at?at=mt:X(Math.max(st,at)+1)}}(v,b,x,p,this.errorHandler),p.endDocument()}},u.prototype={setTagName:function(v){if(!l.test(v))throw new Error("invalid tagName:"+v);this.tagName=v},addValue:function(v,b,x){if(!l.test(v))throw new Error("invalid attribute:"+v);this.attributeNames[v]=this.length,this[this.length++]={qName:v,value:b,offset:x}},length:0,getLocalName:function(v){return this[v].localName},getLocator:function(v){return this[v].locator},getQName:function(v){return this[v].qName},getURI:function(v){return this[v].uri},getValue:function(v){return this[v].value}},y.XMLReader=h,y.ParseError=i},function(k,y,o){function f(g){return document.createElementNS("http://www.w3.org/2000/svg",g)}Object.defineProperty(y,"__esModule",{value:!0}),y.createElement=f,y.default={createElement:f}},function(k,y,o){function f(l,i){function h(s){for(var d=i.length-1;d>=0;d--){var _=i[d],n=s.clientX,e=s.clientY;if(s.touches&&s.touches.length&&(n=s.touches[0].clientX,e=s.touches[0].clientY),r(_,l,n,e)){_.dispatchEvent(g(s));break}}}if(l.nodeName==="iframe"||l.nodeName==="IFRAME")try{this.target=l.contentDocument}catch{this.target=l}else this.target=l;for(var c=["mouseup","mousedown","click","touchstart"],a=0;a<c.length;a++){var w=c[a];this.target.addEventListener(w,function(s){return h(s)},!1)}}function g(l){var i=Object.assign({},l,{bubbles:!1});try{return new MouseEvent(l.type,i)}catch{var h=document.createEvent("MouseEvents");return h.initMouseEvent(l.type,!1,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget),h}}function r(l,i,h,c){var a=i.getBoundingClientRect();function w(n,e,u){var v=n.top-a.top,b=n.left-a.left,x=v+n.height,p=b+n.width;return v<=u&&b<=e&&x>u&&p>e}if(!w(l.getBoundingClientRect(),h,c))return!1;for(var s=l.getClientRects(),d=0,_=s.length;d<_;d++)if(w(s[d],h,c))return!0;return!1}Object.defineProperty(y,"__esModule",{value:!0}),y.proxyMouse=f,y.clone=g,y.default={proxyMouse:f}},function(k,y,o){var f=o(26);k.exports=function(){return f.Date.now()}},function(k,y,o){(function(f){var g=typeof f=="object"&&f&&f.Object===Object&&f;k.exports=g}).call(this,o(17))},function(k,y,o){var f=o(54),g=o(19),r=o(56),l=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,h=/^0o[0-7]+$/i,c=parseInt;k.exports=function(a){if(typeof a=="number")return a;if(r(a))return NaN;if(g(a)){var w=typeof a.valueOf=="function"?a.valueOf():a;a=g(w)?w+"":w}if(typeof a!="string")return a===0?a:+a;a=f(a);var s=i.test(a);return s||h.test(a)?c(a.slice(2),s?2:8):l.test(a)?NaN:+a}},function(k,y,o){var f=o(55),g=/^\s+/;k.exports=function(r){return r&&r.slice(0,f(r)+1).replace(g,"")}},function(k,y){var o=/\s/;k.exports=function(f){for(var g=f.length;g--&&o.test(f.charAt(g)););return g}},function(k,y,o){var f=o(57),g=o(60);k.exports=function(r){return typeof r=="symbol"||g(r)&&f(r)=="[object Symbol]"}},function(k,y,o){var f=o(27),g=o(58),r=o(59),l=f?f.toStringTag:void 0;k.exports=function(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":l&&l in Object(i)?g(i):r(i)}},function(k,y,o){var f=o(27),g=Object.prototype,r=g.hasOwnProperty,l=g.toString,i=f?f.toStringTag:void 0;k.exports=function(h){var c=r.call(h,i),a=h[i];try{h[i]=void 0;var w=!0}catch{}var s=l.call(h);return w&&(c?h[i]=a:delete h[i]),s}},function(k,y){var o=Object.prototype.toString;k.exports=function(f){return o.call(f)}},function(k,y){k.exports=function(o){return o!=null&&typeof o=="object"}}]).default});const Ut=[];function Le(N,k){return{subscribe:ze(N,k).subscribe}}function ze(N,k=xt){let y;const o=new Set;function f(l){if(Zt(N,l)&&(N=l,y)){const i=!Ut.length;for(const h of o)h[1](),Ut.push(h,N);if(i){for(let h=0;h<Ut.length;h+=2)Ut[h][0](Ut[h+1]);Ut.length=0}}}function g(l){f(l(N))}function r(l,i=xt){const h=[l,i];return o.add(h),o.size===1&&(y=k(f)||xt),l(N),()=>{o.delete(h),o.size===0&&y&&(y(),y=null)}}return{set:f,update:g,subscribe:r}}function De(N,k,y){const o=!Array.isArray(N),f=o?[N]:N,g=k.length<2;return Le(y,r=>{let l=!1;const i=[];let h=0,c=xt;const a=()=>{if(h)return;c();const s=k(o?i[0]:i,r);g?r(s):c=ue(s)?s:xt},w=f.map((s,d)=>Me(s,_=>{i[d]=_,h&=~(1<<d),l&&a()},()=>{h|=1<<d}));return l=!0,a(),function(){Vt(w),c(),l=!1}})}function Ke(N,k){if(N instanceof RegExp)return{keys:!1,pattern:N};var y,o,f,g,r=[],l="",i=N.split("/");for(i[0]||i.shift();f=i.shift();)y=f[0],y==="*"?(r.push("wild"),l+="/(.*)"):y===":"?(o=f.indexOf("?",1),g=f.indexOf(".",1),r.push(f.substring(1,~o?o:~g?g:f.length)),l+=~o&&!~g?"(?:/([^/]+?))?":"/([^/]+?)",~g&&(l+=(~o?"?":"")+"\\"+f.substring(g))):l+="/"+f;return{keys:r,pattern:new RegExp("^"+l+(k?"(?=$|/)":"/?$"),"i")}}function Je(N){let k,y,o;const f=[N[2]];var g=N[0];function r(l){let i={};for(let h=0;h<f.length;h+=1)i=Se(i,f[h]);return{props:i}}return g&&(k=ee(g,r()),k.$on("routeEvent",N[7])),{c(){k&&Xt(k.$$.fragment),y=ie()},m(l,i){k&&Pt(k,l,i),Ct(l,y,i),o=!0},p(l,i){const h=i&4?Ae(f,[Re(l[2])]):{};if(i&1&&g!==(g=l[0])){if(k){re();const c=k;It(c.$$.fragment,1,0,()=>{Bt(c,1)}),se()}g?(k=ee(g,r()),k.$on("routeEvent",l[7]),Xt(k.$$.fragment),Tt(k.$$.fragment,1),Pt(k,y.parentNode,y)):k=null}else g&&k.$set(h)},i(l){o||(k&&Tt(k.$$.fragment,l),o=!0)},o(l){k&&It(k.$$.fragment,l),o=!1},d(l){l&&kt(y),k&&Bt(k,l)}}}function Qe(N){let k,y,o;const f=[{params:N[1]},N[2]];var g=N[0];function r(l){let i={};for(let h=0;h<f.length;h+=1)i=Se(i,f[h]);return{props:i}}return g&&(k=ee(g,r()),k.$on("routeEvent",N[6])),{c(){k&&Xt(k.$$.fragment),y=ie()},m(l,i){k&&Pt(k,l,i),Ct(l,y,i),o=!0},p(l,i){const h=i&6?Ae(f,[i&2&&{params:l[1]},i&4&&Re(l[2])]):{};if(i&1&&g!==(g=l[0])){if(k){re();const c=k;It(c.$$.fragment,1,0,()=>{Bt(c,1)}),se()}g?(k=ee(g,r()),k.$on("routeEvent",l[6]),Xt(k.$$.fragment),Tt(k.$$.fragment,1),Pt(k,y.parentNode,y)):k=null}else g&&k.$set(h)},i(l){o||(k&&Tt(k.$$.fragment,l),o=!0)},o(l){k&&It(k.$$.fragment,l),o=!1},d(l){l&&kt(y),k&&Bt(k,l)}}}function ti(N){let k,y,o,f;const g=[Qe,Je],r=[];function l(i,h){return i[1]?0:1}return k=l(N),y=r[k]=g[k](N),{c(){y.c(),o=ie()},m(i,h){r[k].m(i,h),Ct(i,o,h),f=!0},p(i,[h]){let c=k;k=l(i),k===c?r[k].p(i,h):(re(),It(r[c],1,1,()=>{r[c]=null}),se(),y=r[k],y?y.p(i,h):(y=r[k]=g[k](i),y.c()),Tt(y,1),y.m(o.parentNode,o))},i(i){f||(Tt(y),f=!0)},o(i){It(y),f=!1},d(i){r[k].d(i),i&&kt(o)}}}function we(){const N=window.location.href.indexOf("#/");let k=N>-1?window.location.href.substr(N+1):"/";const y=k.indexOf("?");let o="";return y>-1&&(o=k.substr(y+1),k=k.substr(0,y)),{location:k,querystring:o}}const fe=Le(null,function(k){k(we());const y=()=>{k(we())};return window.addEventListener("hashchange",y,!1),function(){window.removeEventListener("hashchange",y,!1)}});De(fe,N=>N.location);De(fe,N=>N.querystring);const _e=ze(void 0);function ei(N){N?window.scrollTo(N.__svelte_spa_router_scrollX,N.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function ii(N,k,y){let{routes:o={}}=k,{prefix:f=""}=k,{restoreScrollState:g=!1}=k;class r{constructor(x,p){if(!p||typeof p!="function"&&(typeof p!="object"||p._sveltesparouter!==!0))throw Error("Invalid component object");if(!x||typeof x=="string"&&(x.length<1||x.charAt(0)!="/"&&x.charAt(0)!="*")||typeof x=="object"&&!(x instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:S,keys:j}=Ke(x);this.path=x,typeof p=="object"&&p._sveltesparouter===!0?(this.component=p.component,this.conditions=p.conditions||[],this.userData=p.userData,this.props=p.props||{}):(this.component=()=>Promise.resolve(p),this.conditions=[],this.props={}),this._pattern=S,this._keys=j}match(x){if(f){if(typeof f=="string")if(x.startsWith(f))x=x.substr(f.length)||"/";else return null;else if(f instanceof RegExp){const U=x.match(f);if(U&&U[0])x=x.substr(U[0].length)||"/";else return null}}const p=this._pattern.exec(x);if(p===null)return null;if(this._keys===!1)return p;const S={};let j=0;for(;j<this._keys.length;){try{S[this._keys[j]]=decodeURIComponent(p[j+1]||"")||null}catch{S[this._keys[j]]=null}j++}return S}async checkConditions(x){for(let p=0;p<this.conditions.length;p++)if(!await this.conditions[p](x))return!1;return!0}}const l=[];o instanceof Map?o.forEach((b,x)=>{l.push(new r(x,b))}):Object.keys(o).forEach(b=>{l.push(new r(b,o[b]))});let i=null,h=null,c={};const a=Xe();async function w(b,x){await Ve(),a(b,x)}let s=null,d=null;g&&(d=b=>{b.state&&(b.state.__svelte_spa_router_scrollY||b.state.__svelte_spa_router_scrollX)?s=b.state:s=null},window.addEventListener("popstate",d),We(()=>{ei(s)}));let _=null,n=null;const e=fe.subscribe(async b=>{_=b;let x=0;for(;x<l.length;){const p=l[x].match(b.location);if(!p){x++;continue}const S={route:l[x].path,location:b.location,querystring:b.querystring,userData:l[x].userData,params:p&&typeof p=="object"&&Object.keys(p).length?p:null};if(!await l[x].checkConditions(S)){y(0,i=null),n=null,w("conditionsFailed",S);return}w("routeLoading",Object.assign({},S));const j=l[x].component;if(n!=j){j.loading?(y(0,i=j.loading),n=j,y(1,h=j.loadingParams),y(2,c={}),w("routeLoaded",Object.assign({},S,{component:i,name:i.name,params:h}))):(y(0,i=null),n=null);const U=await j();if(b!=_)return;y(0,i=U&&U.default||U),n=j}p&&typeof p=="object"&&Object.keys(p).length?y(1,h=p):y(1,h=null),y(2,c=l[x].props),w("routeLoaded",Object.assign({},S,{component:i,name:i.name,params:h})).then(()=>{_e.set(h)});return}y(0,i=null),n=null,_e.set(void 0)});He(()=>{e(),d&&window.removeEventListener("popstate",d)});function u(b){ve.call(this,N,b)}function v(b){ve.call(this,N,b)}return N.$$set=b=>{"routes"in b&&y(3,o=b.routes),"prefix"in b&&y(4,f=b.prefix),"restoreScrollState"in b&&y(5,g=b.restoreScrollState)},N.$$.update=()=>{N.$$.dirty&32&&(history.scrollRestoration=g?"manual":"auto")},[i,h,c,o,f,g,u,v]}class ni extends Qt{constructor(k){super(),Jt(this,k,ii,ti,Zt,{routes:3,prefix:4,restoreScrollState:5})}}function xe(){return navigator.storage?navigator.storage.getDirectory().then(async N=>{const k=[];for await(const[y,o]of N.entries())k.push({key:y,value:o});return k}).catch(N=>console.error(N)):(console.log("no storage"),Promise.resolve([]))}function ri(N){return window.FileReader?new Promise((k,y)=>{const o=new FileReader;o.onload=function(f){const g=f.target.result;navigator.storage&&navigator.storage.getDirectory().then(r=>r.getFileHandle(N.name,{create:!0})).then(r=>r.createWritable()).then(r=>r.write(g).then(()=>r.close())).catch(r=>(console.error(r),y(r))).finally(()=>k())},o.readAsArrayBuffer(N)}):Promise.resolve()}function si(N){return navigator.storage.getDirectory().then(k=>k.getFileHandle(N)).then(k=>k.getFile())}function Ee(N,k,y){const o=N.slice();return o[3]=k[y].key,o}function oi(N){let k;return{c(){k=Ot("p"),k.textContent="lol"},m(y,o){Ct(y,k,o)},p:xt,d(y){y&&kt(k)}}}function ai(N){let k,y=N[2],o=[];for(let f=0;f<y.length;f+=1)o[f]=ke(Ee(N,y,f));return{c(){for(let f=0;f<o.length;f+=1)o[f].c();k=ie()},m(f,g){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(f,g);Ct(f,k,g)},p(f,g){if(g&1){y=f[2];let r;for(r=0;r<y.length;r+=1){const l=Ee(f,y,r);o[r]?o[r].p(l,g):(o[r]=ke(l),o[r].c(),o[r].m(k.parentNode,k))}for(;r<o.length;r+=1)o[r].d(1);o.length=y.length}},d(f){Fe(o,f),f&&kt(k)}}}function ke(N){let k,y,o=N[3]+"",f,g,r;return{c(){k=Ot("li"),y=Ot("a"),f=Wt(o),r=Gt(),Lt(y,"href",g=`#/reader/${encodeURI(N[3])}`)},m(l,i){Ct(l,k,i),Dt(k,y),Dt(y,f),Dt(k,r)},p(l,i){i&1&&o!==(o=l[3]+"")&&ae(f,o),i&1&&g!==(g=`#/reader/${encodeURI(l[3])}`)&&Lt(y,"href",g)},d(l){l&&kt(k)}}}function hi(N){let k;return{c(){k=Ot("p"),k.textContent="loading books..."},m(y,o){Ct(y,k,o)},p:xt,d(y){y&&kt(k)}}}function li(N){let k,y,o,f,g,r,l,i,h={ctx:N,current:null,token:null,hasCatch:!0,pending:hi,then:ai,catch:oi,value:2};return ce(y=N[0],h),{c(){k=Ot("ul"),h.block.c(),o=Gt(),f=Ot("label"),f.textContent="Add a book",g=Gt(),r=Ot("input"),Lt(f,"for","book-input"),Lt(r,"id","book-input"),Lt(r,"type","file")},m(c,a){Ct(c,k,a),h.block.m(k,h.anchor=null),h.mount=()=>k,h.anchor=null,Ct(c,o,a),Ct(c,f,a),Ct(c,g,a),Ct(c,r,a),l||(i=Oe(r,"change",N[1]),l=!0)},p(c,[a]){N=c,h.ctx=N,a&1&&y!==(y=N[0])&&ce(y,h)||Ie(h,N,a)},i:xt,o:xt,d(c){c&&kt(k),h.block.d(),h.token=null,h=null,c&&kt(o),c&&kt(f),c&&kt(g),c&&kt(r),l=!1,i()}}}function ci(){navigator.storage.estimate().then(({quota:N,usage:k})=>{console.log(N,k)})}function ui(N,k,y){let o=xe();async function f(g){await ri(g.target.files[0]),y(0,o=xe()),g.target.value=""}return ci(),[o,f]}class di extends Qt{constructor(k){super(),Jt(this,k,ui,li,Zt,{})}}function fi(N){let k,y,o,f,g;return{c(){k=Ot("header"),y=Ot("h1"),o=Wt(N[0]),f=Wt(" - "),g=Wt(N[1]),Lt(y,"class","svelte-1748qjf")},m(r,l){Ct(r,k,l),Dt(k,y),Dt(y,o),Dt(y,f),Dt(y,g)},p(r,[l]){l&1&&ae(o,r[0]),l&2&&ae(g,r[1])},i:xt,o:xt,d(r){r&&kt(k)}}}function pi(N,k,y){let{title:o}=k,{author:f}=k;return N.$$set=g=>{"title"in g&&y(0,o=g.title),"author"in g&&y(1,f=g.author)},[o,f]}class mi extends Qt{constructor(k){super(),Jt(this,k,pi,fi,Zt,{title:0,author:1})}}const{document:gi}=Ge;function vi(N){return{c:xt,m:xt,p:xt,i:xt,o:xt,d:xt}}function bi(N){let k,y;return k=new mi({props:{title:N[9].title,author:N[9].creator}}),{c(){Xt(k.$$.fragment)},m(o,f){Pt(k,o,f),y=!0},p:xt,i(o){y||(Tt(k.$$.fragment,o),y=!0)},o(o){It(k.$$.fragment,o),y=!1},d(o){Bt(k,o)}}}function yi(N){let k;return{c(){k=Ot("p"),k.textContent="loading"},m(y,o){Ct(y,k,o)},p:xt,i:xt,o:xt,d(y){y&&kt(k)}}}function wi(N){let k,y,o,f,g,r,l={ctx:N,current:null,token:null,hasCatch:!1,pending:yi,then:bi,catch:vi,value:9,blocks:[,,,]};return ce(N[0].loaded.metadata,l),{c(){k=Gt(),l.block.c(),y=Gt(),o=Ot("div"),Lt(o,"id","viewer"),Lt(o,"class","svelte-8unc5z")},m(i,h){Ct(i,k,h),l.block.m(i,l.anchor=h),l.mount=()=>y.parentNode,l.anchor=y,Ct(i,y,h),Ct(i,o,h),f=!0,g||(r=Oe(gi,"keyup",N[1]),g=!0)},p(i,[h]){N=i,Ie(l,N,h)},i(i){f||(Tt(l.block),f=!0)},o(i){for(let h=0;h<3;h+=1){const c=l.blocks[h];It(c)}f=!1},d(i){i&&kt(k),l.block.d(i),l.token=null,l=null,i&&kt(y),i&&kt(o),g=!1,r()}}}function _i(N){return localStorage.getItem(N)}function xi(N,k,y){let{params:o={}}=k;const f=_i(o.bookName);console.log(f);const g=ePub();let r=null;function l(w){w.next().then(()=>h(w))}function i(w){w.prev().then(()=>h(w))}async function h(w){const s=await w.currentLocation();localStorage.setItem(o.bookName,s.start.cfi)}function c(w){r&&((w.keyCode||w.which)===37&&i(r),(w.keyCode||w.which)===39&&l(r))}function a(w,s){console.log(w.screenX-s.document.body.clientWidth),console.log(w.pageX,w.offsetX,w.clientX,w.screenX),w.screenX>document.body.clientWidth/2?l(r):i(r)}if(window.FileReader){const w=new FileReader;w.onload=function(s){const d=s.target.result;g.open(d,"binary"),r=g.renderTo("viewer",{width:"100%",height:"90vh",spread:"none"}),r.on("rendered",(_,n)=>{n.document.addEventListener("click",e=>{a(e,n)})}),r.display(f??void 0)},si(o.bookName).then(s=>{w.readAsArrayBuffer(s)})}return N.$$set=w=>{"params"in w&&y(2,o=w.params)},[g,c,o]}class Ei extends Qt{constructor(k){super(),Jt(this,k,xi,wi,Zt,{params:2})}}function ki(N){let k,y,o;return y=new ni({props:{routes:N[0]}}),{c(){k=Ot("main"),Xt(y.$$.fragment)},m(f,g){Ct(f,k,g),Pt(y,k,null),o=!0},p:xt,i(f){o||(Tt(y.$$.fragment,f),o=!0)},o(f){It(y.$$.fragment,f),o=!1},d(f){f&&kt(k),Bt(y)}}}function Si(N){return[{"/":di,"/reader/:bookName":Ei}]}class Ci extends Qt{constructor(k){super(),Jt(this,k,Si,ki,Zt,{})}}new Ci({target:document.getElementById("app")})});export default Oi();
